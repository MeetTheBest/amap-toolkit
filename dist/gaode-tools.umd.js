(function(ut,bt){typeof exports=="object"&&typeof module!="undefined"?bt(exports):typeof define=="function"&&define.amd?define(["exports"],bt):(ut=typeof globalThis!="undefined"?globalThis:ut||self,bt(ut["gaode-tools"]={}))})(this,function(ut){"use strict";var E1=Object.defineProperty,S1=Object.defineProperties;var C1=Object.getOwnPropertyDescriptors;var Xl=Object.getOwnPropertySymbols;var _1=Object.prototype.hasOwnProperty,M1=Object.prototype.propertyIsEnumerable;var ja=(ut,bt,Ct)=>bt in ut?E1(ut,bt,{enumerable:!0,configurable:!0,writable:!0,value:Ct}):ut[bt]=Ct,Vt=(ut,bt)=>{for(var Ct in bt||(bt={}))_1.call(bt,Ct)&&ja(ut,Ct,bt[Ct]);if(Xl)for(var Ct of Xl(bt))M1.call(bt,Ct)&&ja(ut,Ct,bt[Ct]);return ut},Ya=(ut,bt)=>S1(ut,C1(bt));var B=(ut,bt,Ct)=>(ja(ut,typeof bt!="symbol"?bt+"":bt,Ct),Ct);var Rr=(ut,bt,Ct)=>new Promise((Ze,fr)=>{var yr=ir=>{try{xe(Ct.next(ir))}catch(be){fr(be)}},Je=ir=>{try{xe(Ct.throw(ir))}catch(be){fr(be)}},xe=ir=>ir.done?Ze(ir.value):Promise.resolve(ir.value).then(yr,Je);xe((Ct=Ct.apply(ut,bt)).next())});const bt={"border-color":"#e1f5fe","font-size":"12px","border-radius":".25rem","background-color":"rgba(0,0,0,.4)","border-width":0,"text-align":"center",color:"#fff"},Ct=()=>Math.random().toString(16).substring(2),Ze=(t,r=2)=>Number.isNaN(+t)?t:+t.toFixed(Math.max(r,0)),fr=(t="",r={})=>new AMap.Text({text:t,style:Vt(Vt({},bt),r),offset:[0,-10]}),yr=(t,r)=>{const e=t.divideBy(2).add(r.divideBy(2));return{text:`${Math.round(t.distance(r))}ç±³`,textPos:e}};let Je=class{constructor(r){B(this,"map");B(this,"startPointToCursorText",null);B(this,"lastPointToCursorText",null);B(this,"startPosition",null);B(this,"lastPosition",null);B(this,"getClickPosition",r=>{const e=r.lnglat;this.startPosition?this.startPosition&&(this.lastPosition=e,this.createDistanceText()):this.startPosition=e});B(this,"onMouseMoveInDrawPolygon",r=>{if(!this.startPosition||!this.lastPosition)return;const e=r.lnglat;this.updateDistanceText(this.startPointToCursorText,yr(this.startPosition,e)),this.updateDistanceText(this.lastPointToCursorText,yr(this.lastPosition,e))});if(!r)throw new Error("map not found!");this.map=r}open(){this.start()}start(){this.map.on("click",this.getClickPosition),this.map.on("mousemove",this.onMouseMoveInDrawPolygon)}close(){this.stop()}stop(){this.map.off("click",this.getClickPosition),this.map.off("mousemove",this.onMouseMoveInDrawPolygon)}createDistanceText(){this.startPointToCursorText&&this.lastPointToCursorText||(this.startPointToCursorText=fr(),this.startPointToCursorText.setMap(this.map),this.lastPointToCursorText=fr(),this.lastPointToCursorText.setMap(this.map))}updateDistanceText(r,{text:e,textPos:n}){r.setText(e),r.setPosition(n)}removeDistanceText(){var r,e;(r=this.startPointToCursorText)==null||r.remove(),this.startPointToCursorText=null,(e=this.lastPointToCursorText)==null||e.remove(),this.lastPointToCursorText=null}reset(){return this.startPosition=null,this.lastPosition=null,this.removeDistanceText(),this}destroy(){return this.reset(),this.stop(),this}};var xe=typeof global=="object"&&global&&global.Object===Object&&global;const ir=xe;var be=typeof self=="object"&&self&&self.Object===Object&&self,Hl=ir||be||Function("return this")();const Jt=Hl;var Vl=Jt.Symbol;const ar=Vl;var Wa=Object.prototype,ql=Wa.hasOwnProperty,Ul=Wa.toString,Ee=ar?ar.toStringTag:void 0;function Kl(t){var r=ql.call(t,Ee),e=t[Ee];try{t[Ee]=void 0;var n=!0}catch(a){}var i=Ul.call(t);return n&&(r?t[Ee]=e:delete t[Ee]),i}var Zl=Object.prototype,Jl=Zl.toString;function Ql(t){return Jl.call(t)}var tf="[object Null]",rf="[object Undefined]",Xa=ar?ar.toStringTag:void 0;function Or(t){return t==null?t===void 0?rf:tf:Xa&&Xa in Object(t)?Kl(t):Ql(t)}function Ir(t){return t!=null&&typeof t=="object"}var ef="[object Symbol]";function Qe(t){return typeof t=="symbol"||Ir(t)&&Or(t)==ef}function Ha(t,r){for(var e=-1,n=t==null?0:t.length,i=Array(n);++e<n;)i[e]=r(t[e],e,t);return i}var nf=Array.isArray;const kr=nf;var af=1/0,Va=ar?ar.prototype:void 0,qa=Va?Va.toString:void 0;function Ua(t){if(typeof t=="string")return t;if(kr(t))return Ha(t,Ua)+"";if(Qe(t))return qa?qa.call(t):"";var r=t+"";return r=="0"&&1/t==-af?"-0":r}var of=/\s/;function sf(t){for(var r=t.length;r--&&of.test(t.charAt(r)););return r}var uf=/^\s+/;function lf(t){return t&&t.slice(0,sf(t)+1).replace(uf,"")}function cr(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var Ka=0/0,ff=/^[-+]0x[0-9a-f]+$/i,cf=/^0b[01]+$/i,vf=/^0o[0-7]+$/i,df=parseInt;function Za(t){if(typeof t=="number")return t;if(Qe(t))return Ka;if(cr(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=cr(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=lf(t);var e=cf.test(t);return e||vf.test(t)?df(t.slice(2),e?2:8):ff.test(t)?Ka:+t}function pf(t){return t}var hf="[object AsyncFunction]",gf="[object Function]",mf="[object GeneratorFunction]",yf="[object Proxy]";function Ja(t){if(!cr(t))return!1;var r=Or(t);return r==gf||r==mf||r==hf||r==yf}var xf=Jt["__core-js_shared__"];const Hn=xf;var Qa=function(){var t=/[^.]+$/.exec(Hn&&Hn.keys&&Hn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function bf(t){return!!Qa&&Qa in t}var Ef=Function.prototype,Sf=Ef.toString;function Ar(t){if(t!=null){try{return Sf.call(t)}catch(r){}try{return t+""}catch(r){}}return""}var Cf=/[\\^$.*+?()[\]{}|]/g,_f=/^\[object .+?Constructor\]$/,Mf=Function.prototype,Tf=Object.prototype,Pf=Mf.toString,Df=Tf.hasOwnProperty,wf=RegExp("^"+Pf.call(Df).replace(Cf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rf(t){if(!cr(t)||bf(t))return!1;var r=Ja(t)?wf:_f;return r.test(Ar(t))}function Of(t,r){return t==null?void 0:t[r]}function Br(t,r){var e=Of(t,r);return Rf(e)?e:void 0}var If=Br(Jt,"WeakMap");const Vn=If;var to=Object.create,kf=function(){function t(){}return function(r){if(!cr(r))return{};if(to)return to(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}();const Af=kf;function Bf(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)}function zf(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r}var Gf=800,Lf=16,Ff=Date.now;function Nf(t){var r=0,e=0;return function(){var n=Ff(),i=Lf-(n-e);if(e=n,i>0){if(++r>=Gf)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}function $f(t){return function(){return t}}var jf=function(){try{var t=Br(Object,"defineProperty");return t({},"",{}),t}catch(r){}}();const tn=jf;var Yf=tn?function(t,r){return tn(t,"toString",{configurable:!0,enumerable:!1,value:$f(r),writable:!0})}:pf,Wf=Nf(Yf);const Xf=Wf;function Hf(t,r){for(var e=-1,n=t==null?0:t.length;++e<n&&r(t[e],e,t)!==!1;);return t}var Vf=9007199254740991,qf=/^(?:0|[1-9]\d*)$/;function Uf(t,r){var e=typeof t;return r=r==null?Vf:r,!!r&&(e=="number"||e!="symbol"&&qf.test(t))&&t>-1&&t%1==0&&t<r}function ro(t,r,e){r=="__proto__"&&tn?tn(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e}function eo(t,r){return t===r||t!==t&&r!==r}var Kf=Object.prototype,Zf=Kf.hasOwnProperty;function no(t,r,e){var n=t[r];(!(Zf.call(t,r)&&eo(n,e))||e===void 0&&!(r in t))&&ro(t,r,e)}function Se(t,r,e,n){var i=!e;e||(e={});for(var a=-1,o=r.length;++a<o;){var s=r[a],u=n?n(e[s],t[s],s,e,t):void 0;u===void 0&&(u=t[s]),i?ro(e,s,u):no(e,s,u)}return e}var io=Math.max;function Jf(t,r,e){return r=io(r===void 0?t.length-1:r,0),function(){for(var n=arguments,i=-1,a=io(n.length-r,0),o=Array(a);++i<a;)o[i]=n[r+i];i=-1;for(var s=Array(r+1);++i<r;)s[i]=n[i];return s[r]=e(o),Bf(t,this,s)}}var Qf=9007199254740991;function ao(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Qf}function oo(t){return t!=null&&ao(t.length)&&!Ja(t)}var tc=Object.prototype;function qn(t){var r=t&&t.constructor,e=typeof r=="function"&&r.prototype||tc;return t===e}function rc(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}var ec="[object Arguments]";function so(t){return Ir(t)&&Or(t)==ec}var uo=Object.prototype,nc=uo.hasOwnProperty,ic=uo.propertyIsEnumerable,ac=so(function(){return arguments}())?so:function(t){return Ir(t)&&nc.call(t,"callee")&&!ic.call(t,"callee")};const lo=ac;function oc(){return!1}var fo=typeof ut=="object"&&ut&&!ut.nodeType&&ut,co=fo&&typeof module=="object"&&module&&!module.nodeType&&module,sc=co&&co.exports===fo,vo=sc?Jt.Buffer:void 0,uc=vo?vo.isBuffer:void 0,lc=uc||oc;const po=lc;var fc="[object Arguments]",cc="[object Array]",vc="[object Boolean]",dc="[object Date]",pc="[object Error]",hc="[object Function]",gc="[object Map]",mc="[object Number]",yc="[object Object]",xc="[object RegExp]",bc="[object Set]",Ec="[object String]",Sc="[object WeakMap]",Cc="[object ArrayBuffer]",_c="[object DataView]",Mc="[object Float32Array]",Tc="[object Float64Array]",Pc="[object Int8Array]",Dc="[object Int16Array]",wc="[object Int32Array]",Rc="[object Uint8Array]",Oc="[object Uint8ClampedArray]",Ic="[object Uint16Array]",kc="[object Uint32Array]",yt={};yt[Mc]=yt[Tc]=yt[Pc]=yt[Dc]=yt[wc]=yt[Rc]=yt[Oc]=yt[Ic]=yt[kc]=!0,yt[fc]=yt[cc]=yt[Cc]=yt[vc]=yt[_c]=yt[dc]=yt[pc]=yt[hc]=yt[gc]=yt[mc]=yt[yc]=yt[xc]=yt[bc]=yt[Ec]=yt[Sc]=!1;function Ac(t){return Ir(t)&&ao(t.length)&&!!yt[Or(t)]}function Un(t){return function(r){return t(r)}}var ho=typeof ut=="object"&&ut&&!ut.nodeType&&ut,Ce=ho&&typeof module=="object"&&module&&!module.nodeType&&module,Bc=Ce&&Ce.exports===ho,Kn=Bc&&ir.process,zc=function(){try{var t=Ce&&Ce.require&&Ce.require("util").types;return t||Kn&&Kn.binding&&Kn.binding("util")}catch(r){}}();const Kr=zc;var go=Kr&&Kr.isTypedArray,Gc=go?Un(go):Ac;const Lc=Gc;var Fc=Object.prototype,Nc=Fc.hasOwnProperty;function mo(t,r){var e=kr(t),n=!e&&lo(t),i=!e&&!n&&po(t),a=!e&&!n&&!i&&Lc(t),o=e||n||i||a,s=o?rc(t.length,String):[],u=s.length;for(var l in t)(r||Nc.call(t,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||a&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Uf(l,u)))&&s.push(l);return s}function yo(t,r){return function(e){return t(r(e))}}var $c=yo(Object.keys,Object);const jc=$c;var Yc=Object.prototype,Wc=Yc.hasOwnProperty;function Xc(t){if(!qn(t))return jc(t);var r=[];for(var e in Object(t))Wc.call(t,e)&&e!="constructor"&&r.push(e);return r}function Zn(t){return oo(t)?mo(t):Xc(t)}function Hc(t){var r=[];if(t!=null)for(var e in Object(t))r.push(e);return r}var Vc=Object.prototype,qc=Vc.hasOwnProperty;function Uc(t){if(!cr(t))return Hc(t);var r=qn(t),e=[];for(var n in t)n=="constructor"&&(r||!qc.call(t,n))||e.push(n);return e}function Jn(t){return oo(t)?mo(t,!0):Uc(t)}var Kc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zc=/^\w*$/;function Jc(t,r){if(kr(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||Qe(t)?!0:Zc.test(t)||!Kc.test(t)||r!=null&&t in Object(r)}var Qc=Br(Object,"create");const _e=Qc;function tv(){this.__data__=_e?_e(null):{},this.size=0}function rv(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}var ev="__lodash_hash_undefined__",nv=Object.prototype,iv=nv.hasOwnProperty;function av(t){var r=this.__data__;if(_e){var e=r[t];return e===ev?void 0:e}return iv.call(r,t)?r[t]:void 0}var ov=Object.prototype,sv=ov.hasOwnProperty;function uv(t){var r=this.__data__;return _e?r[t]!==void 0:sv.call(r,t)}var lv="__lodash_hash_undefined__";function fv(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=_e&&r===void 0?lv:r,this}function zr(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}zr.prototype.clear=tv,zr.prototype.delete=rv,zr.prototype.get=av,zr.prototype.has=uv,zr.prototype.set=fv;function cv(){this.__data__=[],this.size=0}function rn(t,r){for(var e=t.length;e--;)if(eo(t[e][0],r))return e;return-1}var vv=Array.prototype,dv=vv.splice;function pv(t){var r=this.__data__,e=rn(r,t);if(e<0)return!1;var n=r.length-1;return e==n?r.pop():dv.call(r,e,1),--this.size,!0}function hv(t){var r=this.__data__,e=rn(r,t);return e<0?void 0:r[e][1]}function gv(t){return rn(this.__data__,t)>-1}function mv(t,r){var e=this.__data__,n=rn(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this}function vr(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}vr.prototype.clear=cv,vr.prototype.delete=pv,vr.prototype.get=hv,vr.prototype.has=gv,vr.prototype.set=mv;var yv=Br(Jt,"Map");const Me=yv;function xv(){this.size=0,this.__data__={hash:new zr,map:new(Me||vr),string:new zr}}function bv(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}function en(t,r){var e=t.__data__;return bv(r)?e[typeof r=="string"?"string":"hash"]:e.map}function Ev(t){var r=en(this,t).delete(t);return this.size-=r?1:0,r}function Sv(t){return en(this,t).get(t)}function Cv(t){return en(this,t).has(t)}function _v(t,r){var e=en(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this}function xr(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}xr.prototype.clear=xv,xr.prototype.delete=Ev,xr.prototype.get=Sv,xr.prototype.has=Cv,xr.prototype.set=_v;var Mv="Expected a function";function Qn(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError(Mv);var e=function(){var n=arguments,i=r?r.apply(this,n):n[0],a=e.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return e.cache=a.set(i,o)||a,o};return e.cache=new(Qn.Cache||xr),e}Qn.Cache=xr;var Tv=500;function Pv(t){var r=Qn(t,function(n){return e.size===Tv&&e.clear(),n}),e=r.cache;return r}var Dv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wv=/\\(\\)?/g,Rv=Pv(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(Dv,function(e,n,i,a){r.push(i?a.replace(wv,"$1"):n||e)}),r});const Ov=Rv;function Iv(t){return t==null?"":Ua(t)}function ti(t,r){return kr(t)?t:Jc(t,r)?[t]:Ov(Iv(t))}var kv=1/0;function xo(t){if(typeof t=="string"||Qe(t))return t;var r=t+"";return r=="0"&&1/t==-kv?"-0":r}function bo(t,r){r=ti(r,t);for(var e=0,n=r.length;t!=null&&e<n;)t=t[xo(r[e++])];return e&&e==n?t:void 0}function Eo(t,r,e){var n=t==null?void 0:bo(t,r);return n===void 0?e:n}function ri(t,r){for(var e=-1,n=r.length,i=t.length;++e<n;)t[i+e]=r[e];return t}var So=ar?ar.isConcatSpreadable:void 0;function Av(t){return kr(t)||lo(t)||!!(So&&t&&t[So])}function Co(t,r,e,n,i){var a=-1,o=t.length;for(e||(e=Av),i||(i=[]);++a<o;){var s=t[a];r>0&&e(s)?r>1?Co(s,r-1,e,n,i):ri(i,s):n||(i[i.length]=s)}return i}function Bv(t){var r=t==null?0:t.length;return r?Co(t,1):[]}function zv(t){return Xf(Jf(t,void 0,Bv),t+"")}var Gv=yo(Object.getPrototypeOf,Object);const ei=Gv;var Lv="[object Object]",Fv=Function.prototype,Nv=Object.prototype,_o=Fv.toString,$v=Nv.hasOwnProperty,jv=_o.call(Object);function Yv(t){if(!Ir(t)||Or(t)!=Lv)return!1;var r=ei(t);if(r===null)return!0;var e=$v.call(r,"constructor")&&r.constructor;return typeof e=="function"&&e instanceof e&&_o.call(e)==jv}function Wv(t,r,e){var n=-1,i=t.length;r<0&&(r=-r>i?0:i+r),e=e>i?i:e,e<0&&(e+=i),i=r>e?0:e-r>>>0,r>>>=0;for(var a=Array(i);++n<i;)a[n]=t[n+r];return a}function Xv(){this.__data__=new vr,this.size=0}function Hv(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e}function Vv(t){return this.__data__.get(t)}function qv(t){return this.__data__.has(t)}var Uv=200;function Kv(t,r){var e=this.__data__;if(e instanceof vr){var n=e.__data__;if(!Me||n.length<Uv-1)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new xr(n)}return e.set(t,r),this.size=e.size,this}function Zr(t){var r=this.__data__=new vr(t);this.size=r.size}Zr.prototype.clear=Xv,Zr.prototype.delete=Hv,Zr.prototype.get=Vv,Zr.prototype.has=qv,Zr.prototype.set=Kv;function Zv(t,r){return t&&Se(r,Zn(r),t)}function Jv(t,r){return t&&Se(r,Jn(r),t)}var Mo=typeof ut=="object"&&ut&&!ut.nodeType&&ut,To=Mo&&typeof module=="object"&&module&&!module.nodeType&&module,Qv=To&&To.exports===Mo,Po=Qv?Jt.Buffer:void 0,Do=Po?Po.allocUnsafe:void 0;function td(t,r){if(r)return t.slice();var e=t.length,n=Do?Do(e):new t.constructor(e);return t.copy(n),n}function rd(t,r){for(var e=-1,n=t==null?0:t.length,i=0,a=[];++e<n;){var o=t[e];r(o,e,t)&&(a[i++]=o)}return a}function wo(){return[]}var ed=Object.prototype,nd=ed.propertyIsEnumerable,Ro=Object.getOwnPropertySymbols,id=Ro?function(t){return t==null?[]:(t=Object(t),rd(Ro(t),function(r){return nd.call(t,r)}))}:wo;const ni=id;function ad(t,r){return Se(t,ni(t),r)}var od=Object.getOwnPropertySymbols,sd=od?function(t){for(var r=[];t;)ri(r,ni(t)),t=ei(t);return r}:wo;const Oo=sd;function ud(t,r){return Se(t,Oo(t),r)}function Io(t,r,e){var n=r(t);return kr(t)?n:ri(n,e(t))}function ld(t){return Io(t,Zn,ni)}function ko(t){return Io(t,Jn,Oo)}var fd=Br(Jt,"DataView");const ii=fd;var cd=Br(Jt,"Promise");const ai=cd;var vd=Br(Jt,"Set");const oi=vd;var Ao="[object Map]",dd="[object Object]",Bo="[object Promise]",zo="[object Set]",Go="[object WeakMap]",Lo="[object DataView]",pd=Ar(ii),hd=Ar(Me),gd=Ar(ai),md=Ar(oi),yd=Ar(Vn),Gr=Or;(ii&&Gr(new ii(new ArrayBuffer(1)))!=Lo||Me&&Gr(new Me)!=Ao||ai&&Gr(ai.resolve())!=Bo||oi&&Gr(new oi)!=zo||Vn&&Gr(new Vn)!=Go)&&(Gr=function(t){var r=Or(t),e=r==dd?t.constructor:void 0,n=e?Ar(e):"";if(n)switch(n){case pd:return Lo;case hd:return Ao;case gd:return Bo;case md:return zo;case yd:return Go}return r});const si=Gr;var xd=Object.prototype,bd=xd.hasOwnProperty;function Ed(t){var r=t.length,e=new t.constructor(r);return r&&typeof t[0]=="string"&&bd.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var Sd=Jt.Uint8Array;const Fo=Sd;function ui(t){var r=new t.constructor(t.byteLength);return new Fo(r).set(new Fo(t)),r}function Cd(t,r){var e=r?ui(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var _d=/\w*$/;function Md(t){var r=new t.constructor(t.source,_d.exec(t));return r.lastIndex=t.lastIndex,r}var No=ar?ar.prototype:void 0,$o=No?No.valueOf:void 0;function Td(t){return $o?Object($o.call(t)):{}}function Pd(t,r){var e=r?ui(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var Dd="[object Boolean]",wd="[object Date]",Rd="[object Map]",Od="[object Number]",Id="[object RegExp]",kd="[object Set]",Ad="[object String]",Bd="[object Symbol]",zd="[object ArrayBuffer]",Gd="[object DataView]",Ld="[object Float32Array]",Fd="[object Float64Array]",Nd="[object Int8Array]",$d="[object Int16Array]",jd="[object Int32Array]",Yd="[object Uint8Array]",Wd="[object Uint8ClampedArray]",Xd="[object Uint16Array]",Hd="[object Uint32Array]";function Vd(t,r,e){var n=t.constructor;switch(r){case zd:return ui(t);case Dd:case wd:return new n(+t);case Gd:return Cd(t,e);case Ld:case Fd:case Nd:case $d:case jd:case Yd:case Wd:case Xd:case Hd:return Pd(t,e);case Rd:return new n;case Od:case Ad:return new n(t);case Id:return Md(t);case kd:return new n;case Bd:return Td(t)}}function qd(t){return typeof t.constructor=="function"&&!qn(t)?Af(ei(t)):{}}var Ud="[object Map]";function Kd(t){return Ir(t)&&si(t)==Ud}var jo=Kr&&Kr.isMap,Zd=jo?Un(jo):Kd;const Jd=Zd;var Qd="[object Set]";function tp(t){return Ir(t)&&si(t)==Qd}var Yo=Kr&&Kr.isSet,rp=Yo?Un(Yo):tp;const ep=rp;var np=1,ip=2,ap=4,Wo="[object Arguments]",op="[object Array]",sp="[object Boolean]",up="[object Date]",lp="[object Error]",Xo="[object Function]",fp="[object GeneratorFunction]",cp="[object Map]",vp="[object Number]",Ho="[object Object]",dp="[object RegExp]",pp="[object Set]",hp="[object String]",gp="[object Symbol]",mp="[object WeakMap]",yp="[object ArrayBuffer]",xp="[object DataView]",bp="[object Float32Array]",Ep="[object Float64Array]",Sp="[object Int8Array]",Cp="[object Int16Array]",_p="[object Int32Array]",Mp="[object Uint8Array]",Tp="[object Uint8ClampedArray]",Pp="[object Uint16Array]",Dp="[object Uint32Array]",gt={};gt[Wo]=gt[op]=gt[yp]=gt[xp]=gt[sp]=gt[up]=gt[bp]=gt[Ep]=gt[Sp]=gt[Cp]=gt[_p]=gt[cp]=gt[vp]=gt[Ho]=gt[dp]=gt[pp]=gt[hp]=gt[gp]=gt[Mp]=gt[Tp]=gt[Pp]=gt[Dp]=!0,gt[lp]=gt[Xo]=gt[mp]=!1;function nn(t,r,e,n,i,a){var o,s=r&np,u=r&ip,l=r&ap;if(e&&(o=i?e(t,n,i,a):e(t)),o!==void 0)return o;if(!cr(t))return t;var f=kr(t);if(f){if(o=Ed(t),!s)return zf(t,o)}else{var c=si(t),v=c==Xo||c==fp;if(po(t))return td(t,s);if(c==Ho||c==Wo||v&&!i){if(o=u||v?{}:qd(t),!s)return u?ud(t,Jv(o,t)):ad(t,Zv(o,t))}else{if(!gt[c])return i?t:{};o=Vd(t,c,s)}}a||(a=new Zr);var d=a.get(t);if(d)return d;a.set(t,o),ep(t)?t.forEach(function(g){o.add(nn(g,r,e,g,t,a))}):Jd(t)&&t.forEach(function(g,m){o.set(m,nn(g,r,e,m,t,a))});var p=l?u?ko:ld:u?Jn:Zn,h=f?void 0:p(t);return Hf(h||t,function(g,m){h&&(m=g,g=t[m]),no(o,m,nn(g,r,e,m,t,a))}),o}var wp=function(){return Jt.Date.now()};const li=wp;var Rp="Expected a function",Op=Math.max,Ip=Math.min;function kp(t,r,e){var n,i,a,o,s,u,l=0,f=!1,c=!1,v=!0;if(typeof t!="function")throw new TypeError(Rp);r=Za(r)||0,cr(e)&&(f=!!e.leading,c="maxWait"in e,a=c?Op(Za(e.maxWait)||0,r):a,v="trailing"in e?!!e.trailing:v);function d(x){var S=n,_=i;return n=i=void 0,l=x,o=t.apply(_,S),o}function p(x){return l=x,s=setTimeout(m,r),f?d(x):o}function h(x){var S=x-u,_=x-l,T=r-S;return c?Ip(T,a-_):T}function g(x){var S=x-u,_=x-l;return u===void 0||S>=r||S<0||c&&_>=a}function m(){var x=li();if(g(x))return y(x);s=setTimeout(m,h(x))}function y(x){return s=void 0,v&&n?d(x):(n=i=void 0,o)}function b(){s!==void 0&&clearTimeout(s),l=0,n=u=i=s=void 0}function E(){return s===void 0?o:y(li())}function C(){var x=li(),S=g(x);if(n=arguments,i=this,u=x,S){if(s===void 0)return p(u);if(c)return clearTimeout(s),s=setTimeout(m,r),d(u)}return s===void 0&&(s=setTimeout(m,r)),o}return C.cancel=b,C.flush=E,C}function Ap(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}function Bp(t,r){return r.length<2?t:bo(t,Wv(r,0,-1))}function zp(t,r){return r=ti(r,t),t=Bp(t,r),t==null||delete t[xo(Ap(r))]}function Gp(t){return Yv(t)?void 0:t}var Lp=1,Fp=2,Np=4,$p=zv(function(t,r){var e={};if(t==null)return e;var n=!1;r=Ha(r,function(a){return a=ti(a,t),n||(n=a.length>1),a}),Se(t,ko(t),e),n&&(e=nn(e,Lp|Fp|Np,Gp));for(var i=r.length;i--;)zp(e,r[i]);return e});const jp=$p;var Yp="Expected a function";function Wp(t,r,e){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(Yp);return cr(e)&&(n="leading"in e?!!e.leading:n,i="trailing"in e?!!e.trailing:i),kp(t,r,{leading:n,maxWait:r,trailing:i})}const Vo={radius:6,zIndex:0,strokeOpacity:0,fillOpacity:0};class fi{constructor(r){B(this,"map");B(this,"options",Vt({},Vo));B(this,"circleMarkers",[]);this.map=r}setOptions(r){return this.options=Vt(Vt({},r),jp(Vo,"radius")),this}createCircleMarkersByPaths(r){this.removeFromTheMap(),this.reset(),r.forEach(e=>{this.circleMarkers.push(this.createCircleMarker(e))}),this.addToMap()}createCircleMarker(r){return new AMap.CircleMarker(Vt({center:r},this.options))}addToMap(){this.map.add(this.circleMarkers)}removeFromTheMap(){this.map.remove(this.circleMarkers)}getPointInCircleMarkers(r){var e;return(e=this.circleMarkers.find(n=>this.isPointInCircle(r,n)))!=null?e:null}getInCircleMarkersPoint(r){const e=this.circleMarkers.find(i=>this.isPointInCircle(r,i));return this.circleMarkers.findIndex(i=>i===e)%2===0?null:e!=null?e:null}isPointInCircle(r,e){return e.contains(r)}reset(){this.circleMarkers=[]}destroy(){this.removeFromTheMap(),this.reset()}}const qo={zIndex:1,strokeColor:"#00D3FC",strokeWeight:8,strokeOpacity:0};class Uo{constructor(r){B(this,"map");B(this,"linesPath",[]);B(this,"lines",[]);if(!r)throw new Error("map not found");this.map=r}getLinesByPaths(r){let e=0;const n=r.length;for(;e<n;){const i=e+1>=n?0:e+1;this.linesPath.push([r[e],r[i]]),e++}return this.linesPath}createLinesByPaths(r){this.reset(),this.getLinesByPaths(r)}createPolyLine(r){return new AMap.Polyline(Vt({path:r},qo))}addToMap(){this.map.add(this.lines)}removeFromTheMap(){this.map.remove(this.lines)}getPointInPolyline(r){const e=this.map.getResolution(),n=qo.strokeWeight*e;return this.linesPath.find(a=>AMap.GeometryUtil.isPointOnSegment(r,a[0],a[1],n))}reset(){this.linesPath=[],this.lines=[]}}class Ko{constructor(r,e){B(this,"map");B(this,"circleMarkers",null);B(this,"midCircleMarkers",null);B(this,"lines",null);B(this,"polygonEditor",null);B(this,"polygonPaths",[]);B(this,"polygonTotalPaths",[]);B(this,"polygon",null);B(this,"startPointToCursorText",null);B(this,"lastPointToCursorText",null);B(this,"lineLengthText",null);B(this,"circleMarker",null);B(this,"midCircleMarker",null);B(this,"startPosition",null);B(this,"lastPosition",null);B(this,"editingMidTipMarkerListPath",null);B(this,"onPolygonEditorAdjust",({target:r})=>{this.polygonPaths=r.getPath(),this.circleMarkers.createCircleMarkersByPaths(this.polygonPaths),this.lines.createLinesByPaths(this.polygonPaths),Promise.resolve().then(()=>{this.polygonTotalPaths=this.getPolygonEditorTargetTotalPaths(),this.midCircleMarkers.createCircleMarkersByPaths(this.polygonTotalPaths)}),this.reset()});B(this,"onMouseDown",r=>{const e=r.lnglat;this.circleMarker=this.circleMarkers.getPointInCircleMarkers(e),this.midCircleMarker=this.midCircleMarkers.getInCircleMarkersPoint(e)});B(this,"onMovePolygonEditorPoint",r=>{if(this.midCircleMarker)return;if(!this.circleMarker){this.reset();return}const e=this.circleMarker.getCenter(),n=f=>`${f.lng}-${f.lat}`;let i=this.polygonPaths.findIndex(f=>n(f)===n(e));if(i===-1)return;const a=this.polygonPaths.length,o=i-1<=-1?a-1:i-1,s=i+1>=a?0:i+1,u=this.polygonPaths.at(o),l=this.polygonPaths.at(s);this.setPosition(u,l),this.onMouseMoveInDrawPolygon(r)});B(this,"onMovePolygonEditorMidPoint",r=>{if(this.circleMarker)return;if(!this.midCircleMarker){this.reset();return}const e=this.midCircleMarker.getCenter(),n=f=>`${f.lng}-${f.lat}`;let i=this.polygonTotalPaths.findIndex(f=>n(f)===n(e));if(i===-1)return;const a=this.polygonTotalPaths.length,o=i-1<=-1?a-1:i-1,s=i+1>=a?0:i+1,u=this.polygonTotalPaths.at(o),l=this.polygonTotalPaths.at(s);this.setPosition(u,l),this.onMouseMoveInDrawPolygon(r)});B(this,"onMouseUp",()=>{this.circleMarker=null,this.midCircleMarker=null,this.reset()});B(this,"onInPolygonEditorLine",r=>{if(this.circleMarker)return this.removeLineDistanceText();const e=r.lnglat,n=this.lines.getPointInPolyline(e);if(!n)return this.removeLineDistanceText();const[i,a]=n;this.lineLengthText||(this.lineLengthText=fr(),this.lineLengthText.add(this.map)),this.updateDistanceText(this.lineLengthText,yr(i,a))});B(this,"onMouseMoveInDrawPolygon",r=>{if(!this.startPosition||!this.lastPosition)return;const e=r.lnglat;this.updateDistanceText(this.startPointToCursorText,yr(this.startPosition,e)),this.updateDistanceText(this.lastPointToCursorText,yr(this.lastPosition,e))});if(!r)throw new Error("map not found!");this.map=r,e&&(this.polygonEditor=e),this.circleMarkers=new fi(this.map),this.midCircleMarkers=new fi(this.map),this.lines=new Uo(this.map)}getPolygonEditorTargetPaths(){var r,e,n;return this.polygonEditor?(n=(e=(r=this.polygonEditor)==null?void 0:r.getTarget)==null?void 0:e.call(r).getPath())!=null?n:[]:[]}setEditingMidTipMarkerListPath(r){return this.editingMidTipMarkerListPath=r,this}getEditingMidTipMarkerList(){var e,n;const{singleRingListHandle:r}=this.polygonEditor;if(this.editingMidTipMarkerListPath){if(typeof this.editingMidTipMarkerListPath=="function")return this.editingMidTipMarkerListPath(this.polygonEditor);if(typeof this.editingMidTipMarkerListPath=="string")return Eo(this.polygonEditor,this.editingMidTipMarkerListPath)}return(e=this.polygonEditor.editingMidTipMarkerList)!=null&&e.length?this.polygonEditor.editingMidTipMarkerList:r?(n=r==null?void 0:r.list)==null?void 0:n.editingMidTipMarkerList:[]}getPolygonEditorTargetTotalPaths(){const r=this.getPolygonEditorTargetPaths(),e=this.getEditingMidTipMarkerList();let n=0;const i=[],a=r.length;for(;n<a;){i.push(r[n]);const o=e[n];o&&i.push(o.getCenter()),n++}return i}open(r){this.start(r)}start(r){var i,a,o;if(!r&&!this.polygonEditor)throw new Error("polygonEditor not found");this.polygonEditor=r;const{controlPoint:e,midControlPoint:n}=this.polygonEditor;return this.polygonPaths=this.getPolygonEditorTargetPaths(),this.circleMarkers.setOptions(e).createCircleMarkersByPaths(this.polygonPaths),this.polygonTotalPaths=this.getPolygonEditorTargetTotalPaths(),this.midCircleMarkers.setOptions(n).createCircleMarkersByPaths(this.polygonTotalPaths),this.lines.createLinesByPaths(this.polygonPaths),(i=this.polygonEditor)==null||i.on("adjust",this.onPolygonEditorAdjust),(a=this.polygonEditor)==null||a.on("removenode",this.onPolygonEditorAdjust),(o=this.polygonEditor)==null||o.on("addnode",this.onPolygonEditorAdjust),this.map.on("mousedown",this.onMouseDown),this.map.on("mousemove",this.onMovePolygonEditorPoint),this.map.on("mousemove",this.onMovePolygonEditorMidPoint),this.map.on("mousemove",this.onInPolygonEditorLine),this.map.on("mouseup",this.onMouseUp),this}close(){this.stop()}stop(){var r,e,n;(r=this.polygonEditor)==null||r.off("adjust",this.onPolygonEditorAdjust),(e=this.polygonEditor)==null||e.off("removenode",this.onPolygonEditorAdjust),(n=this.polygonEditor)==null||n.off("addnode",this.onPolygonEditorAdjust),this.map.off("mousedown",this.onMouseDown),this.map.off("mousemove",this.onMovePolygonEditorPoint),this.map.off("mousemove",this.onMovePolygonEditorMidPoint),this.map.off("mousemove",this.onInPolygonEditorLine),this.map.off("mouseup",this.onMouseUp)}startLineRanging(r){if(!r)throw new Error("polygonEditor not found");this.polygon||(this.polygon=r,this.lines.createLinesByPaths(this.polygon.getPath()),this.map.on("mousemove",this.onInPolygonEditorLine))}stopLineRanging(){this.map.off("mousemove",this.onInPolygonEditorLine)}setPosition(r,e){this.startPosition=r,this.lastPosition=e,this.createDistanceText()}createDistanceText(){this.startPointToCursorText&&this.lastPointToCursorText||(this.startPointToCursorText=fr(),this.lastPointToCursorText=fr(),this.startPointToCursorText.setMap(this.map),this.lastPointToCursorText.setMap(this.map))}updateDistanceText(r,{text:e,textPos:n}){r.setText(e),r.setPosition(n)}removeLineDistanceText(){var r;(r=this.lineLengthText)==null||r.remove(),this.lineLengthText=null}removeDistanceText(){var r,e;(r=this.startPointToCursorText)==null||r.remove(),(e=this.lastPointToCursorText)==null||e.remove(),this.startPointToCursorText=null,this.lastPointToCursorText=null}reset(){return this.startPosition=null,this.lastPosition=null,this.removeDistanceText(),this.removeLineDistanceText(),this}destroy(){return this.reset(),this.stop(),this.circleMarkers.destroy(),this}destroyLineRanging(){return this.polygon=null,this.startPosition=null,this.lastPosition=null,this.removeLineDistanceText(),this.stopLineRanging(),this}}class Zo{constructor(r,e){B(this,"opts");B(this,"map");B(this,"lines",null);B(this,"polygon",null);B(this,"lineLengthText",null);B(this,"editingMidTipMarkerListPath",null);B(this,"onPolygonRanging",r=>{const e=r.lnglat,n=this.lines.getPointInPolyline(e);if(!n)return this.removeLineDistanceText();const[i,a]=n;this.lineLengthText||(this.lineLengthText=fr(),this.lineLengthText.add(this.map)),this.updateDistanceText(this.lineLengthText,yr(i,a))});B(this,"onRotateEndEnd",()=>Rr(this,null,function*(){yield Promise.resolve();const r=this.polygon;this.onDragEnd({target:r})}));B(this,"onDragEnd",r=>Rr(this,null,function*(){var n;const e=r.target;(n=this.lines)==null||n.reset(),yield Promise.resolve(),this.lines.createLinesByPaths(e.getPath())}));if(!r)throw new Error("map not found!");this.opts=e,this.map=r,this.lines=new Uo(this.map),this.immediateActive()}get immediate(){var r;return(r=this.opts)==null?void 0:r.immediate}get draggable(){var e;return((e=this.polygon)==null?void 0:e.getOptions()).draggable}get rotatable(){var r;return(r=this.polygon)==null?void 0:r.rotatable}immediateActive(){var e;const r=(e=this.opts)==null?void 0:e.target;this.immediate&&r instanceof AMap.Polygon&&this.open(r)}open(r){this.start(r||this.polygon)}start(r){!r||this.polygon||(this.polygon=r,this.lines.createLinesByPaths(this.polygon.getPath()),this.map.on("mousemove",this.onPolygonRanging),this.registryPolygonEvents())}registryPolygonEvents(){this.polygon&&(this.draggable&&this.polygon.on("dragend",this.onDragEnd),this.rotatable&&"likeRectangle"in this.polygon&&this.polygon.on("rotateEnd",this.onRotateEndEnd))}destroyPolygonEvents(){this.polygon&&this.polygon.off("dragend",this.onDragEnd)}close(){this.stop()}stop(){this.map.off("mousemove",this.onPolygonRanging)}updateDistanceText(r,{text:e,textPos:n}){r.setText(e),r.setPosition(n)}removeLineDistanceText(){var r;(r=this.lineLengthText)==null||r.remove(),this.lineLengthText=null}destroy(){return this.polygon=null,this.stop(),this.removeLineDistanceText(),this.destroyPolygonEvents(),this}}class ci{constructor(){B(this,"events",{})}getEvents(r){return this.events[r]||(this.events[r]=[]),this.events[r]}emit(r,...e){this.getEvents(r).forEach(i=>i(...e))}on(r,e){!r||typeof r!="string"||this.getEvents(r).push(e)}once(r,e){if(!r||typeof r!="string")return;const n=i=>{e(i),this.off(r,n)};this.on(r,n)}off(r,e){!r||typeof r!="string"||(this.events[r]=this.getEvents(r).filter(n=>n!==e))}hasEvents(r,e){return!!this.getEvents(r).find(n=>n===e)}clearEvents(r){r?this.events[r]=[]:this.events={}}}class Jo extends ci{constructor(e){super();B(this,"map");B(this,"circleMarkers",null);B(this,"polygonEditor",null);B(this,"polygonTotalPaths",[]);B(this,"circleMarker",null);B(this,"editingMidTipMarkerListPath",null);B(this,"onPolygonEditorAdjust",()=>{Promise.resolve().then(()=>{this.polygonTotalPaths=this.getPolygonEditorTargetTotalPaths(),this.circleMarkers.createCircleMarkersByPaths(this.polygonTotalPaths)})});B(this,"onMouseDown",e=>{const n=e.lnglat;this.circleMarker=this.circleMarkers.getPointInCircleMarkers(n),!(!this.circleMarker||!this.getEvents("mousedown").length)&&this.emit("mousedown",this.circleMarker)});B(this,"onMouseMove",e=>{!this.circleMarker||!this.getEvents("mousemove").length||this.emit("mousemove",this.circleMarker,e)});B(this,"onMouseUp",()=>{!this.getEvents("mouseup").length||!this.circleMarker||(this.emit("mouseup",this.circleMarker),this.circleMarker=null)});this.map=e.map,this.polygonEditor=e,this.circleMarkers=new fi(this.map),this.open(this.polygonEditor)}getPolygonEditorTargetPaths(){var e;return this.polygonEditor?(e=this.polygonEditor.getTarget().getPath())!=null?e:[]:[]}setEditingMidTipMarkerListPath(e){return this.editingMidTipMarkerListPath=e,this}getEditingMidTipMarkerList(){var n,i;const{singleRingListHandle:e}=this.polygonEditor;if(this.editingMidTipMarkerListPath){if(typeof this.editingMidTipMarkerListPath=="function")return this.editingMidTipMarkerListPath(this.polygonEditor);if(typeof this.editingMidTipMarkerListPath=="string")return Eo(this.polygonEditor,this.editingMidTipMarkerListPath)}return(n=this.polygonEditor.editingMidTipMarkerList)!=null&&n.length?this.polygonEditor.editingMidTipMarkerList:e?(i=e==null?void 0:e.list)==null?void 0:i.editingMidTipMarkerList:[]}getPolygonEditorTargetTotalPaths(){const e=this.getPolygonEditorTargetPaths(),n=this.getEditingMidTipMarkerList();let i=0;const a=[],o=e.length;for(;i<o;){a.push(e[i]);const s=n[i];s&&a.push(s.getCenter()),i++}return a}open(e){this.start(e)}start(e){var i,a,o;if(!e&&!this.polygonEditor)throw new Error("polygonEditor not found");this.polygonEditor=e;const{midControlPoint:n}=this.polygonEditor;return this.polygonTotalPaths=this.getPolygonEditorTargetTotalPaths(),this.circleMarkers.setOptions(n).createCircleMarkersByPaths(this.polygonTotalPaths),(i=this.polygonEditor)==null||i.on("adjust",this.onPolygonEditorAdjust),(a=this.polygonEditor)==null||a.on("removenode",this.onPolygonEditorAdjust),(o=this.polygonEditor)==null||o.on("addnode",this.onPolygonEditorAdjust),this.map.on("mousedown",this.onMouseDown),this.map.on("mousemove",this.onMouseMove),this.map.on("mouseup",this.onMouseUp),this}close(){this.stop()}stop(){this.map.off("mousedown",this.onMouseDown),this.map.off("mousemove",this.onMouseMove),this.map.off("mouseup",this.onMouseUp)}destroy(){return this.close(),this.circleMarkers.destroy(),this}}function Xp(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return r.map(function(n){return n.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function Hp(t,r){return r.replace(/([^}{]*){/gm,function(e,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function dr(t,r){return function(e){e&&(t[r]=e)}}function Qo(t,r,e){return function(n){n&&(t[r][e]=n)}}function ts(t,r){return function(e){var n=e.prototype;t.forEach(function(i){r(n,i)})}}function Vp(t,r){return r===void 0&&(r={}),function(e,n){t.forEach(function(i){var a=r[i]||i;a in e||(e[a]=function(){for(var o,s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var l=(o=this[n])[i].apply(o,s);return l===this[n]?this:l})})}}var qp="function",Up="object",Kp="string",Zp="number",vi="undefined",rs=typeof window!==vi,Jp=typeof document!==vi&&document,Qp=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Mt=1e-7,an={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,r){return t*r/100},vw:function(t,r){return r===void 0&&(r=window.innerWidth),t/100*r},vh:function(t,r){return r===void 0&&(r=window.innerHeight),t/100*r},vmax:function(t,r){return r===void 0&&(r=Math.max(window.innerWidth,window.innerHeight)),t/100*r},vmin:function(t,r){return r===void 0&&(r=Math.min(window.innerWidth,window.innerHeight)),t/100*r}};/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function th(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),i=0,r=0;r<e;r++)for(var a=arguments[r],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function Lr(t,r,e,n){return(t*n+r*e)/(e+n)}function on(t){return typeof t===vi}function Qt(t){return t&&typeof t===Up}function Tt(t){return Array.isArray(t)}function jt(t){return typeof t===Kp}function Jr(t){return typeof t===Zp}function di(t){return typeof t===qp}function rh(t,r){var e=t===""||t==" ",n=r===""||r==" ";return n&&e||t===r}function es(t,r,e,n,i){var a=pi(t,r,e);return a?e:eh(t,r,e+1,n,i)}function pi(t,r,e){if(!t.ignore)return null;var n=r.slice(Math.max(e-3,0),e+3).join("");return new RegExp(t.ignore).exec(n)}function eh(t,r,e,n,i){for(var a=function(l){var f=r[l].trim();if(f===t.close&&!pi(t,r,l))return{value:l};var c=l,v=Yt(i,function(d){var p=d.open;return p===f});if(v&&(c=es(v,r,l,n,i)),c===-1)return o=l,"break";l=c,o=l},o,s=e;s<n;++s){var u=a(s);if(s=o,typeof u=="object")return u.value;if(u==="break")break}return-1}function hi(t,r){var e=jt(r)?{separator:r}:r,n=e.separator,i=n===void 0?",":n,a=e.isSeparateFirst,o=e.isSeparateOnlyOpenClose,s=e.isSeparateOpenClose,u=s===void 0?o:s,l=e.openCloseCharacters,f=l===void 0?Qp:l,c=f.map(function(S){var _=S.open,T=S.close;return _===T?_:_+"|"+T}).join("|"),v="(\\s*"+i+"\\s*|"+c+"|\\s+)",d=new RegExp(v,"g"),p=t.split(d).filter(function(S){return S&&S!=="undefined"}),h=p.length,g=[],m=[];function y(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var b=function(S){var _=p[S].trim(),T=S,D=Yt(f,function(w){var I=w.open;return I===_}),O=Yt(f,function(w){var I=w.close;return I===_});if(D){if(T=es(D,p,S,h,f),T!==-1&&u)return y()&&a||(g.push(p.slice(S,T+1).join("")),S=T,a)?(E=S,"break"):(E=S,"continue")}else if(O&&!pi(O,p,S)){var R=th(f);return R.splice(f.indexOf(O),1),{value:hi(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:o,isSeparateOpenClose:u,openCloseCharacters:R})}}else if(rh(_,i)&&!o)return y(),a?(E=S,"break"):(E=S,"continue");T===-1&&(T=h-1),m.push(p.slice(S,T+1).join("")),S=T,E=S},E,C=0;C<h;++C){var x=b(C);if(C=E,typeof x=="object")return x.value;if(x==="break")break}return m.length&&g.push(m.join("")),g}function br(t){return hi(t,"")}function Fr(t){return hi(t,",")}function ns(t){var r=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!r||r.length<4?{}:{prefix:r[1],value:r[2],suffix:r[3]}}function Te(t){var r=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!r)return{prefix:"",unit:"",value:NaN};var e=r[1],n=r[2],i=r[3];return{prefix:e,unit:i,value:parseFloat(n)}}function nh(t){return t.replace(/[\s-_]+([^\s-_])/g,function(r,e){return e.toUpperCase()})}function sn(t,r){return r===void 0&&(r="-"),t.replace(/([a-z])([A-Z])/g,function(e,n,i){return""+n+r+i.toLowerCase()})}function Pe(){return Date.now?Date.now():new Date().getTime()}function pr(t,r,e){e===void 0&&(e=-1);for(var n=t.length,i=0;i<n;++i)if(r(t[i],i,t))return i;return e}function Yt(t,r,e){var n=pr(t,r);return n>-1?t[n]:e}var is=function(){var t=Pe(),r=rs&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return r?r.bind(window):function(e){var n=Pe(),i=setTimeout(function(){e(n-t)},1e3/60);return i}}(),ih=function(){var t=rs&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(r){clearTimeout(r)}}();function hr(t){return Object.keys(t)}function ah(t){var r=hr(t);return r.map(function(e){return t[e]})}function dt(t,r){var e=Te(t),n=e.value,i=e.unit;if(Qt(r)){var a=r[i];if(a){if(di(a))return a(n);if(an[i])return an[i](n,a)}}else if(i==="%")return n*r/100;return an[i]?an[i](n):n}function gi(t,r,e){return Math.max(r,Math.min(t,e))}function as(t,r,e,n){return n===void 0&&(n=t[0]/t[1]),[[et(r[0],Mt),et(r[0]/n,Mt)],[et(r[1]*n,Mt),et(r[1],Mt)]].filter(function(i){return i.every(function(a,o){var s=r[o],u=et(s,Mt);return e?a<=s||a<=u:a>=s||a>=u})})[0]||t}function os(t,r,e,n){if(!n)return t.map(function(d,p){return gi(d,r[p],e[p])});var i=t[0],a=t[1],o=n===!0?i/a:n,s=as(t,r,!1,o),u=s[0],l=s[1],f=as(t,e,!0,o),c=f[0],v=f[1];return i<u||a<l?(i=u,a=l):(i>c||a>v)&&(i=c,a=v),[i,a]}function oh(t){for(var r=t.length,e=0,n=r-1;n>=0;--n)e+=t[n];return e}function mi(t){for(var r=t.length,e=0,n=r-1;n>=0;--n)e+=t[n];return r?e/r:0}function _t(t,r){var e=r[0]-t[0],n=r[1]-t[1],i=Math.atan2(n,e);return i>=0?i:i+Math.PI*2}function sh(t){return[0,1].map(function(r){return mi(t.map(function(e){return e[r]}))})}function ss(t){var r=sh(t),e=_t(r,t[0]),n=_t(r,t[1]);return e<n&&n-e<Math.PI||e>n&&n-e<-Math.PI?1:-1}function gr(t,r){return Math.sqrt(Math.pow((r?r[0]:0)-t[0],2)+Math.pow((r?r[1]:0)-t[1],2))}function et(t,r){if(!r)return t;var e=1/r;return Math.round(t/r)/e}function us(t,r){return t.forEach(function(e,n){t[n]=et(t[n],r)}),t}function uh(t){for(var r=[],e=0;e<t;++e)r.push(e);return r}function lh(t){return t.reduce(function(r,e){return r.concat(e)},[])}function ls(t,r){t.indexOf(r)===-1&&t.push(r)}function wt(t,r){return t.classList?t.classList.contains(r):!!t.className.match(new RegExp("(\\s|^)"+r+"(\\s|$)"))}function fs(t,r){t.classList?t.classList.add(r):t.className+=" "+r}function cs(t,r){if(t.classList)t.classList.remove(r);else{var e=new RegExp("(\\s|^)"+r+"(\\s|$)");t.className=t.className.replace(e," ")}}function At(t,r,e,n){t.addEventListener(r,e,n)}function Rt(t,r,e,n){t.removeEventListener(r,e,n)}function Qr(t){return(t==null?void 0:t.ownerDocument)||Jp}function yi(t){return Qr(t).documentElement}function Er(t){return Qr(t).body}function Sr(t){var r;return((r=t==null?void 0:t.ownerDocument)===null||r===void 0?void 0:r.defaultView)||window}function vs(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function te(t){return Qt(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var fh=function(){function t(){this.keys=[],this.values=[]}var r=t.prototype;return r.get=function(e){return this.values[this.keys.indexOf(e)]},r.set=function(e,n){var i=this.keys,a=this.values,o=i.indexOf(e),s=o===-1?i.length:o;i[s]=e,a[s]=n},t}(),ch=function(){function t(){this.object={}}var r=t.prototype;return r.get=function(e){return this.object[e]},r.set=function(e,n){this.object[e]=n},t}(),vh=typeof Map=="function",dh=function(){function t(){}var r=t.prototype;return r.connect=function(e,n){this.prev=e,this.next=n,e&&(e.next=this),n&&(n.prev=this)},r.disconnect=function(){var e=this.prev,n=this.next;e&&(e.next=n),n&&(n.prev=e)},r.getIndex=function(){for(var e=this,n=-1;e;)e=e.prev,++n;return n},t}();function ph(t,r){var e=[],n=[];return t.forEach(function(i){var a=i[0],o=i[1],s=new dh;e[a]=s,n[o]=s}),e.forEach(function(i,a){i.connect(e[a-1])}),t.filter(function(i,a){return!r[a]}).map(function(i,a){var o=i[0],s=i[1];if(o===s)return[0,0];var u=e[o],l=n[s-1],f=u.getIndex();u.disconnect(),l?u.connect(l,l.next):u.connect(void 0,e[0]);var c=u.getIndex();return[f,c]})}var hh=function(){function t(e,n,i,a,o,s,u,l){this.prevList=e,this.list=n,this.added=i,this.removed=a,this.changed=o,this.maintained=s,this.changedBeforeAdded=u,this.fixed=l}var r=t.prototype;return Object.defineProperty(r,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(r,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),r.caculateOrdered=function(){var e=ph(this.changedBeforeAdded,this.fixed),n=this.changed,i=[];this.cacheOrdered=e.filter(function(a,o){var s=a[0],u=a[1],l=n[o],f=l[0],c=l[1];if(s!==u)return i.push([f,c]),!0}),this.cachePureChanged=i},t}();function De(t,r,e){var n=vh?Map:e?ch:fh,i=e||function(y){return y},a=[],o=[],s=[],u=t.map(i),l=r.map(i),f=new n,c=new n,v=[],d=[],p={},h=[],g=0,m=0;return u.forEach(function(y,b){f.set(y,b)}),l.forEach(function(y,b){c.set(y,b)}),u.forEach(function(y,b){var E=c.get(y);typeof E=="undefined"?(++m,o.push(b)):p[E]=m}),l.forEach(function(y,b){var E=f.get(y);typeof E=="undefined"?(a.push(b),++g):(s.push([E,b]),m=p[b]||0,v.push([E-m,b-g]),d.push(b===E),E!==b&&h.push([E,b]))}),o.reverse(),new hh(t,r,a,o,h,s,v,d)}var gh=function(){function t(e,n){e===void 0&&(e=[]),this.findKeyCallback=n,this.list=[].slice.call(e)}var r=t.prototype;return r.update=function(e){var n=[].slice.call(e),i=De(this.list,n,this.findKeyCallback);return this.list=n,i},t}(),xi=function(t,r){return xi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},xi(t,r)};function we(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");xi(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var or=function(){return or=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},or.apply(this,arguments)};function ds(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e}function ps(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))}function hs(t){var r=0;return t.map(function(e){return e==null?"$compat".concat(++r):"".concat(e)})}function gs(t){var r=[];return t.forEach(function(e){r=r.concat(Tt(e)?gs(e):e)}),r}function bi(t,r){if(!r)return t;for(var e in r)on(t[e])&&(t[e]=r[e]);return t}function un(t,r){if(t===r)return!1;for(var e in t)if(!(e in r))return!0;for(var e in r)if(t[e]!==r[e])return!0;return!1}function ms(t){var r=t.className,e=ds(t,["className"]);return r!=null&&(e.class=r),delete e.style,delete e.children,e}function ys(t){var r={},e={};for(var n in t)n.indexOf("on")===0?e[n]=t[n]:r[n]=t[n];return[r,e]}function ln(t){if(!t)return null;var r=t.b;return te(r)?r:ln(t.c)}function xs(t){var r=t.parentNode;r&&r.removeChild(t)}function bs(t){t.forEach(function(r){r()})}function mh(){return this.constructor(this.props,this.context)}var Ei=0,fn=function(){function t(e,n,i,a,o,s,u){u===void 0&&(u={}),this.t=e,this.d=n,this.k=i,this.i=a,this.c=o,this.ref=s,this.ps=u,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var r=t.prototype;return r.s=function(){return!0},r.u=function(e,n,i,a,o){var s=this,u=s.d,l=ah(n).filter(function(p){return p.$_req}),f=gs(l.map(function(p){return p.$_subs})),c=Yt(f,function(p){return p.d===u});if(s.b&&!jt(i)&&!o&&!s.s(i.props,a)&&!c){var v=f.reduce(function(p,h){var g=h.d;return p[0]?p[0].d===g&&p.push(h):g>u&&p.push(h),p},[]);return v.forEach(function(p){Oe(p,p._ps,[p.o],e,n,!0)}),!1}s.o=i,s.ss(a);var d=s.ps;return jt(i)||(s.ps=i.props,s.ref=i.ref),Si(this),s.r(e,n,s.b?d:{},a),!0},r.md=function(){this.rr()},r.ss=function(){},r.ud=function(){this.rr()},r.rr=function(){var e=this,n=e.ref,i=e.fr;n&&n(i?i.current:e.b)},t}();function Es(){return Object.__CROACT_CURRENT_INSTNACE__}function yh(){return Ei}function xh(t){Ei=t}function Si(t){return Object.__CROACT_CURRENT_INSTNACE__=t,Ei=0,t}var Ci=function(){function t(e,n){e===void 0&&(e={}),this.props=e,this.context=n,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var r=t.prototype;return r.render=function(){return null},r.shouldComponentUpdate=function(e,n){return this.props!==e||this.state!==n},r.setState=function(e,n,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=or(or({},a.$_state),e),i?a.$_setState(n,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(n,i)})},r.forceUpdate=function(e){this.setState({},e,!0)},r.componentDidMount=function(){},r.componentDidUpdate=function(e,n){},r.componentWillUnmount=function(){},r.$_setState=function(e,n){var i=[],a=this.$_p,o=Oe(a.c,[a],[a.o],i,a._cs,or(or({},this.state),this.$_state),n);o&&(e&&i.push(e),bs(i),Si(null))},t}(),Ss=function(t){we(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}var e=r.prototype;return e.shouldComponentUpdate=function(n,i){return un(this.props,n)||un(this.state,i)},r}(Ci);function Cs(t){var r=function(e){r.current=e};return r.current=t,r}function bh(t){return t._fr=!0,t}function Eh(t,r,e,n){var i,a;return!((i=t==null?void 0:t.prototype)===null||i===void 0)&&i.render?a=new t(r,e):(a=new Ci(r,e),a.constructor=t,t._fr?(n.fr=Cs(),a.render=function(){return this.constructor(this.props,n.fr)}):a.render=mh),a.$_p=n,a}var Sh=function(t){we(r,t);function r(n,i,a,o,s,u,l){l===void 0&&(l={});var f=t.call(this,n,i,a,o,s,u,bi(l,n.defaultProps))||this;return f.typ="comp",f._usefs=[],f._uefs=[],f._defs=[],f}var e=r.prototype;return e.s=function(n,i){var a=this.b;return a.shouldComponentUpdate(bi(n,this.t.defaultProps),i||a.state)!==!1},e.r=function(n,i,a){var o,s,u=this,l=u.t;u.ps=bi(u.ps,u.t.defaultProps);var f=u.ps,c=!u.b,v=l.contextType,d=u.b,p=v==null?void 0:v.get(u);u._cs=i,c?(d=Eh(l,f,p,u),u.b=d):(d.props=f,d.context=p);var h=d.state;u._usefs=[],u._uefs=[];var g=d.render();((s=(o=g==null?void 0:g.props)===null||o===void 0?void 0:o.children)===null||s===void 0?void 0:s.length)===0&&(g.props.children=u.ps.children);var m=or(or({},i),d.$_cs);Oe(u,u._ps,g?[g]:[],n,m),c?u._uefs.push(function(){v==null||v.register(u),d.componentDidMount()}):u._uefs.push(function(){d.componentDidUpdate(a,h)}),n.push(function(){u._usefs.forEach(function(y){y()}),c?u.md():u.ud(),u._defs=u._uefs.map(function(y){return y()})})},e.ss=function(n){var i=this.b;!i||!n||(i.state=n)},e.un=function(){var n,i=this;i._ps.forEach(function(o){o.un()});var a=i.t;(n=a.contextType)===null||n===void 0||n.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(o){o&&o()}),i.b.componentWillUnmount()},r}(fn);function Ch(t,r,e){var n=_i(ms(t),ms(r)),i=n.added,a=n.removed,o=n.changed;for(var s in i)e.setAttribute(s,i[s]);for(var u in o)e.setAttribute(u,o[u][1]);for(var l in a)e.removeAttribute(l)}function _h(t,r,e){var n=_i(t,r),i=n.added,a=n.removed;for(var o in a)e.e(o,!0);for(var s in i)e.e(s)}function _i(t,r){var e=hr(t),n=hr(r),i=De(e,n,function(u){return u}),a={},o={},s={};return i.added.forEach(function(u){var l=n[u];a[l]=r[l]}),i.removed.forEach(function(u){var l=e[u];o[l]=t[l]}),i.maintained.forEach(function(u){var l=u[0],f=e[l],c=[t[f],r[f]];t[f]!==r[f]&&(s[f]=c)}),{added:a,removed:o,changed:s}}function Mh(t,r,e){var n=e.style,i=_i(t,r),a=i.added,o=i.removed,s=i.changed;for(var u in a){var l=sn(u,"-");n.setProperty(l,a[u])}for(var u in s){var f=sn(u,"-");n.setProperty(f,s[u][1])}for(var u in o){var c=sn(u,"-");n.removeProperty(c)}}function Th(t){return t.replace(/^on/g,"").toLowerCase()}var Ph=function(t){we(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.typ="elem",n._es={},n._svg=!1,n}var e=r.prototype;return e.e=function(n,i){var a=this,o=a._es,s=a.b,u=Th(n);i?(Rt(s,u,o[n]),delete o[n]):(o[n]=function(l){var f,c;(c=(f=a.ps)[n])===null||c===void 0||c.call(f,l)},At(s,u,o[n]))},e.s=function(n){return un(this.ps,n)},e.r=function(n,i,a){var o,s=this,u=!s.b,l=s.ps;if(u){var f=ln(s.c),c=!1;s._svg||s.t==="svg"?c=!0:c=f&&f.ownerSVGElement,s._svg=c;var v=(o=s._hyd)===null||o===void 0?void 0:o.splice(0,1)[0],d=s.t;if(v)s._hyd=[].slice.call(v.children||[]);else{var p=Qr(f);c?v=p.createElementNS("http://www.w3.org/2000/svg",d):v=p.createElement(d)}s.b=v}Oe(s,s._ps,l.children,n,i);var h=s.b,g=ys(a),m=g[0],y=g[1],b=ys(l),E=b[0],C=b[1];return Ch(m,E,h),_h(y,C,s),Mh(a.style||{},l.style||{},h),n.push(function(){u?s.md():s.ud()}),!0},e.un=function(){var n=this,i=n._es,a=n.b;for(var o in i)Rt(a,o,i[o]);n._ps.forEach(function(s){s.un()}),n._es={},n._sel||xs(a)},r}(fn);function Re(t){if(!t||te(t))return t;var r=t.$_p._ps;return r.length?Re(r[0].b):null}function _s(t){if(t){if(t.b&&te(t.b))return t;var r=t._ps;return r.length?_s(r[0]):null}}function tr(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var i=r||{},a=i.key,o=i.ref,s=ds(i,["key","ref"]);return{type:t,key:a,ref:o,props:or(or({},s),{children:lh(e).filter(function(u){return u!=null&&u!==!1})})}}var Ms=function(t){we(r,t);function r(n,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=n,a}var e=r.prototype;return e.r=function(){return!0},e.un=function(){},r}(fn),Dh=function(t){we(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.typ="text",n}var e=r.prototype;return e.r=function(n){var i,a=this,o=!a.b;if(o){var s=ln(a.c),u=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=u||Qr(s).createTextNode(a.t.replace("text_",""))}return n.push(function(){o?a.md():a.ud()}),!0},e.un=function(){xs(this.b)},r}(fn);function wh(t,r,e){var n=e.map(function(u){return jt(u)?null:u.key}),i=hs(r.map(function(u){return u.k})),a=hs(n),o=De(i,a,function(u){return u});o.removed.forEach(function(u){r.splice(u,1)[0].un()}),o.ordered.forEach(function(u){var l=u[0],f=u[1],c=r.splice(l,1)[0];r.splice(f,0,c);var v=Re(c.b),d=Re(r[f+1]&&r[f+1].b);v&&v.parentNode.insertBefore(v,d)}),o.added.forEach(function(u){r.splice(u,0,Ts(e[u],n[u],u,t))});var s=o.maintained.filter(function(u){u[0];var l=u[1],f=e[l],c=r[l],v=jt(f)?"text_".concat(f):f.type;return v!==c.t?(c.un(),r.splice(l,1,Ts(f,n[l],l,t)),!0):(c.i=l,!1)});return ps(ps([],o.added,!0),s.map(function(u){u[0];var l=u[1];return l}),!0)}function Rh(t,r){for(var e=t._ps,n=e.length,i=r.i+1;i<n;++i){var a=Re(e[i].b);if(a)return a}return null}function Ts(t,r,e,n){var i=n.d+1;if(jt(t)||Jr(t))return new Dh("text_".concat(t),i,r,e,n,null,{});var a=t.type,o=typeof a=="string"?Ph:Sh;return new o(a,i,r,e,n,t.ref,t.props)}function Oe(t,r,e,n,i,a,o){var s=wh(t,r,e),u=t._hyd,l=r.filter(function(c,v){return c._hyd=u,c.u(n,i,e[v],a,o)});t.typ==="container"&&t._sel&&r.forEach(function(c){var v=_s(c);v&&(v._sel=!0)}),t._hyd=null;var f=ln(t);return f&&s.reverse().forEach(function(c){var v=r[c],d=Re(v.b);if(d&&f!==d&&!d.parentNode){var p=Rh(t,v);f.insertBefore(d,p)}}),l.length>0}function Oh(t,r,e,n){e===void 0&&(e=r.__CROACT__),n===void 0&&(n={});var i=!!e;e||(e=new Ms(r));var a=[];return Oe(e,e._ps,t?[t]:[],a,n,void 0,void 0),bs(a),Si(null),i||(r.__CROACT__=e),e}function Ps(t,r,e){return!e&&t&&(e=new Ms(r.parentElement),e._hyd=[r],e._sel=!0),Oh(t,r,e),e}function Ds(t){var r=Es(),e=r._hs||(r._hs=[]),n=yh(),i=e[n];if(xh(n+1),i){if(!un(i.deps,t.deps))return i.updated=!1,i;e[n]=t}else e.push(t);return t.value=t.func(),t.updated=!0,t}function Ih(t,r){var e=Ds({func:t,deps:r});return e.value}function kh(t){return Ih(function(){return Cs(t)},[])}function ws(t,r,e){var n=Es(),i=Ds({func:function(){return t},deps:r}),a=e?n._usefs:n._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function Ah(t,r,e){ws(function(){t==null||t(r())},e,!0)}function Mi(t,r){for(var e=t.length,n=0;n<e;++n)if(r(t[n],n))return!0;return!1}function Rs(t,r){for(var e=t.length,n=0;n<e;++n)if(r(t[n],n))return t[n];return null}function Os(t){var r=t;if(typeof r=="undefined"){if(typeof navigator=="undefined"||!navigator)return"";r=navigator.userAgent||""}return r.toLowerCase()}function Ti(t,r){try{return new RegExp(t,"g").exec(r)}catch(e){return null}}function Bh(){if(typeof navigator=="undefined"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,r=t.brands||t.uaList;return!!(r&&r.length)}function zh(t,r){var e=Ti("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",r);return e?e[3]:""}function Pi(t){return t.replace(/_/g,".")}function Ie(t,r){var e=null,n="-1";return Mi(t,function(i){var a=Ti("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",r);return!a||i.brand?!1:(e=i,n=a[3]||"-1",i.versionAlias?n=i.versionAlias:i.versionTest&&(n=zh(i.versionTest.toLowerCase(),r)||n),n=Pi(n),!0)}),{preset:e,version:n}}function ke(t,r){var e={brand:"",version:"-1"};return Mi(t,function(n){var i=Is(r,n);return i?(e.brand=n.id,e.version=n.versionAlias||i.version,e.version!=="-1"):!1}),e}function Is(t,r){return Rs(t,function(e){var n=e.brand;return Ti(""+r.test,n.toLowerCase())})}var Di=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],ks=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],wi=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],As=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Bs=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function zs(t){return!!Ie(As,t).preset}function Gh(t){var r=Os(t),e=!!/mobi/g.exec(r),n={name:"unknown",version:"-1",majorVersion:-1,webview:zs(r),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=Ie(Di,r),o=a.preset,s=a.version,u=Ie(Bs,r),l=u.preset,f=u.version,c=Ie(ks,r);if(n.chromium=!!c.preset,n.chromiumVersion=c.version,!n.chromium){var v=Ie(wi,r);n.webkit=!!v.preset,n.webkitVersion=v.version}return l&&(i.name=l.id,i.version=f,i.majorVersion=parseInt(f,10)),o&&(n.name=o.id,n.version=s,n.webview&&i.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:i,isMobile:e,isHints:!1}}function Lh(t){var r=navigator.userAgentData,e=(r.uaList||r.brands).slice(),n=t&&t.fullVersionList,i=r.mobile||!1,a=e[0],o=(t&&t.platform||r.platform||navigator.platform).toLowerCase(),s={name:a.brand,version:a.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!ke(As,e).brand||zs(Os())},u={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&Mi(wi,function(p){return Is(e,p)});var l=ke(ks,e);if(s.chromium=!!l.brand,s.chromiumVersion=l.version,!s.chromium){var f=ke(wi,e);s.webkit=!!f.brand,s.webkitVersion=f.version}var c=Rs(Bs,function(p){return new RegExp(""+p.test,"g").exec(o)});if(u.name=c?c.id:"",t&&(u.version=t.platformVersion),n&&n.length){var v=ke(Di,n);s.name=v.brand||s.name,s.version=v.version||s.version}else{var d=ke(Di,e);s.name=d.brand||s.name,s.version=d.brand&&t?t.uaFullVersion:d.version}return s.webkit&&(u.name=i?"ios":"mac"),u.name==="ios"&&s.webview&&(s.version="-1"),u.version=Pi(u.version),s.version=Pi(s.version),u.majorVersion=parseInt(u.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:u,isMobile:i,isHints:!0}}function Fh(t){return typeof t=="undefined"&&Bh()?Lh():Gh(t)}function Nh(t,r,e,n,i,a){for(var o=0;o<i;++o){var s=e+o*i,u=n+o*i;t[s]+=t[u]*a,r[s]+=r[u]*a}}function $h(t,r,e,n,i){for(var a=0;a<i;++a){var o=e+a*i,s=n+a*i,u=t[o],l=r[o];t[o]=t[s],t[s]=u,r[o]=r[s],r[s]=l}}function jh(t,r,e,n,i){for(var a=0;a<n;++a){var o=e+a*n;t[o]/=i,r[o]/=i}}function Gs(t,r,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),i=0;i<e;++i)n[i*e+r-1]=0,n[(r-1)*e+i]=0;return n[(r-1)*(e+1)]=1,n}function sr(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=t.slice(),n=xt(r),i=0;i<r;++i){var a=r*i+i;if(!et(e[a],Mt)){for(var o=i+1;o<r;++o)if(e[r*i+o]){$h(e,n,i,o,r);break}}if(!et(e[a],Mt))return[];jh(e,n,i,r,e[a]);for(var o=0;o<r;++o){var s=o,u=o+i*r,l=e[u];!et(l,Mt)||i===o||Nh(e,n,s,i,r,-l)}}return n}function Yh(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=[],n=0;n<r;++n)for(var i=0;i<r;++i)e[i*r+n]=t[r*n+i];return e}function Ls(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=[],n=t[r*r-1],i=0;i<r-1;++i)e[i]=t[r*(r-1)+i]/n;return e[r-1]=0,e}function Wh(t,r){for(var e=xt(r),n=0;n<r-1;++n)e[r*(r-1)+n]=t[n]||0;return e}function Nr(t,r){for(var e=t.slice(),n=t.length;n<r-1;++n)e[n]=0;return e[r-1]=1,e}function rr(t,r,e){if(r===void 0&&(r=Math.sqrt(t.length)),r===e)return t;for(var n=xt(e),i=Math.min(r,e),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)n[a*e+o]=t[a*r+o];n[(a+1)*e-1]=t[(a+1)*r-1],n[(e-1)*e+a]=t[(r-1)*r+a]}return n[e*e-1]=t[r*r-1],n}function cn(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=xt(t);return r.forEach(function(i){n=pt(n,i,t)}),n}function pt(t,r,e){e===void 0&&(e=Math.sqrt(t.length));var n=[],i=t.length/e,a=r.length/i;if(i){if(!a)return t}else return r;for(var o=0;o<e;++o)for(var s=0;s<a;++s){n[s*e+o]=0;for(var u=0;u<i;++u)n[s*e+o]+=t[u*e+o]*r[s*i+u]}return n}function ft(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),i=0;i<e;++i)n[i]=n[i]+r[i];return n}function tt(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),i=0;i<e;++i)n[i]=n[i]-r[i];return n}function Xh(t,r){return r===void 0&&(r=t.length===6),r?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function Fs(t,r){return r===void 0&&(r=t.length===9),r?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Bt(t,r,e){e===void 0&&(e=r.length);var n=pt(t,r,e),i=n[e-1];return n.map(function(a){return a/i})}function Hh(t,r){return pt(t,[1,0,0,0,0,Math.cos(r),Math.sin(r),0,0,-Math.sin(r),Math.cos(r),0,0,0,0,1],4)}function Vh(t,r){return pt(t,[Math.cos(r),0,-Math.sin(r),0,0,1,0,0,Math.sin(r),0,Math.cos(r),0,0,0,0,1],4)}function qh(t,r){return pt(t,Be(r,4))}function vn(t,r){var e=r[0],n=e===void 0?1:e,i=r[1],a=i===void 0?1:i,o=r[2],s=o===void 0?1:o;return pt(t,[n,0,0,0,0,a,0,0,0,0,s,0,0,0,0,1],4)}function Ae(t,r){return Bt(Be(r,3),Nr(t,3))}function Ri(t,r){var e=r[0],n=e===void 0?0:e,i=r[1],a=i===void 0?0:i,o=r[2],s=o===void 0?0:o;return pt(t,[1,0,0,0,0,1,0,0,0,0,1,0,n,a,s,1],4)}function Ns(t,r){return pt(t,r,4)}function Be(t,r){var e=Math.cos(t),n=Math.sin(t),i=xt(r);return i[0]=e,i[1]=n,i[r]=-n,i[r+1]=e,i}function xt(t){for(var r=t*t,e=[],n=0;n<r;++n)e[n]=n%(t+1)?0:1;return e}function Oi(t,r){for(var e=xt(r),n=Math.min(t.length,r-1),i=0;i<n;++i)e[(r+1)*i]=t[i];return e}function $r(t,r){for(var e=xt(r),n=Math.min(t.length,r-1),i=0;i<n;++i)e[r*(r-1)+i]=t[i];return e}function Ii(t,r,e,n,i,a,o,s){var u=t[0],l=t[1],f=r[0],c=r[1],v=e[0],d=e[1],p=n[0],h=n[1],g=i[0],m=i[1],y=a[0],b=a[1],E=o[0],C=o[1],x=s[0],S=s[1],_=[u,0,f,0,v,0,p,0,l,0,c,0,d,0,h,0,1,0,1,0,1,0,1,0,0,u,0,f,0,v,0,p,0,l,0,c,0,d,0,h,0,1,0,1,0,1,0,1,-g*u,-m*u,-y*f,-b*f,-E*v,-C*v,-x*p,-S*p,-g*l,-m*l,-y*c,-b*c,-E*d,-C*d,-x*h,-S*h],T=sr(_,8);if(!T.length)return[];var D=pt(T,[g,m,y,b,E,C,x,S],8);return D[8]=1,rr(Yh(D),3,4)}var ze=function(){return ze=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},ze.apply(this,arguments)};function Uh(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ge(t,r){return r===void 0&&(r=0),re(ee(t,r))}function Kh(t,r){var e=Bt(t,[r[0],r[1]||0,r[2]||0,1],4),n=e[3]||1;return[e[0]/n,e[1]/n,e[2]/n]}function re(t){var r=Uh();return t.forEach(function(e){var n=e.matrixFunction,i=e.functionValue;n&&(r=n(r,i))}),r}function ee(t,r){r===void 0&&(r=0);var e=Tt(t)?t:br(t);return e.map(function(n){var i=ns(n),a=i.prefix,o=i.value,s=null,u=a,l="";if(a==="translate"||a==="translateX"||a==="translate3d"){var f=Qt(r)?ze(ze({},r),{"o%":r["%"]}):{"%":r,"o%":r},c=Fr(o).map(function(w,I){return I===0&&"x%"in f?f["%"]=r["x%"]:I===1&&"y%"in f?f["%"]=r["y%"]:f["%"]=r["o%"],dt(w,f)}),v=c[0],d=c[1],p=d===void 0?0:d,h=c[2],g=h===void 0?0:h;s=Ri,l=[v,p,g]}else if(a==="translateY"){var m=Qt(r)?ze({"%":r["y%"]},r):{"%":r},p=dt(o,m);s=Ri,l=[0,p,0]}else if(a==="translateZ"){var g=parseFloat(o);s=Ri,l=[0,0,g]}else if(a==="scale"||a==="scale3d"){var y=Fr(o).map(function(w){return parseFloat(w)}),b=y[0],E=y[1],C=E===void 0?b:E,x=y[2],S=x===void 0?1:x;s=vn,l=[b,C,S]}else if(a==="scaleX"){var b=parseFloat(o);s=vn,l=[b,1,1]}else if(a==="scaleY"){var C=parseFloat(o);s=vn,l=[1,C,1]}else if(a==="scaleZ"){var S=parseFloat(o);s=vn,l=[1,1,S]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var _=Te(o),T=_.unit,D=_.value,O=T==="rad"?D:D*Math.PI/180;a==="rotate"||a==="rotateZ"?(u="rotateZ",s=qh):a==="rotateX"?s=Hh:a==="rotateY"&&(s=Vh),l=O}else if(a==="matrix3d")s=Ns,l=Fr(o).map(function(w){return parseFloat(w)});else if(a==="matrix"){var R=Fr(o).map(function(w){return parseFloat(w)});s=Ns,l=[R[0],R[1],0,0,R[2],R[3],0,0,0,0,1,0,R[4],R[5],0,1]}else u="";return{name:a,functionName:u,value:o,matrixFunction:s,functionValue:l}})}/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var ki=function(t,r){return ki=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},ki(t,r)};function Zh(t,r){ki(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var $s=typeof Map=="function"?void 0:function(){var t=0;return function(r){return r.__DIFF_KEY__||(r.__DIFF_KEY__=++t)}}(),Jh=function(t){Zh(r,t);function r(e){return e===void 0&&(e=[]),t.call(this,e,$s)||this}return r}(gh);function Qh(t,r){return De(t,r,$s)}const js=Jh;/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Ai=function(){return Ai=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Ai.apply(this,arguments)};function tg(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),i=0,r=0;r<e;r++)for(var a=arguments[r],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}var rg=function(){function t(){this._events={}}var r=t.prototype;return r.on=function(e,n){if(Qt(e))for(var i in e)this.on(i,e[i]);else this._addEvent(e,n,{});return this},r.off=function(e,n){if(!e)this._events={};else if(Qt(e))for(var i in e)this.off(i);else if(!n)this._events[e]=[];else{var a=this._events[e];if(a){var o=pr(a,function(s){return s.listener===n});o>-1&&a.splice(o,1)}}return this},r.once=function(e,n){var i=this;return n&&this._addEvent(e,n,{once:!0}),new Promise(function(a){i._addEvent(e,a,{once:!0})})},r.emit=function(e,n){var i=this;n===void 0&&(n={});var a=this._events[e];if(!e||!a)return!0;var o=!1;return n.eventType=e,n.stop=function(){o=!0},n.currentTarget=this,tg(a).forEach(function(s){s.listener(n),s.once&&i.off(e,s.listener)}),!o},r.trigger=function(e,n){return n===void 0&&(n={}),this.emit(e,n)},r._addEvent=function(e,n,i){var a=this._events;a[e]=a[e]||[];var o=a[e];o.push(Ai({listener:n},i))},t}();const dn=rg;/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Bi=function(t,r){return Bi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Bi(t,r)};function eg(t,r){Bi(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var ne=function(){return ne=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},ne.apply(this,arguments)};function ng(t){var r=t.container;return r===document.body?[r.scrollLeft||document.documentElement.scrollLeft,r.scrollTop||document.documentElement.scrollTop]:[r.scrollLeft,r.scrollTop]}function Ys(t,r){return t.addEventListener("scroll",r),function(){t.removeEventListener("scroll",r)}}function pn(t){if(t){if(jt(t))return document.querySelector(t)}else return null;if(di(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var ig=function(t){eg(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var i=n._currentOptions;n._lock||!i||n.emit("scrollDrag",{next:function(a){n.checkScroll({container:i.container,inputEvent:a})}})},n}var e=r.prototype;return e.dragStart=function(n,i){var a=pn(i.container);if(!a){this._flag=!1;return}var o=0,s=0,u=0,l=0;if(a===document.body)u=window.innerWidth,l=window.innerHeight;else{var f=a.getBoundingClientRect();o=f.top,s=f.left,u=f.width,l=f.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:o,left:s,width:u,height:l},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},e.drag=function(n,i){if(clearTimeout(this._timer),!!this._flag){var a=n.clientX,o=n.clientY,s=i.threshold,u=s===void 0?0:s,l=this,f=l._startRect,c=l._startPos;this._currentOptions=i;var v=[0,0];return f.top>o-u?(c[1]>f.top||o<c[1])&&(v[1]=-1):f.top+f.height<o+u&&(c[1]<f.top+f.height||o>c[1])&&(v[1]=1),f.left>a-u?(c[0]>f.left||a<c[0])&&(v[0]=-1):f.left+f.width<a+u&&(c[0]<f.left+f.width||a>c[0])&&(v[0]=1),!v[0]&&!v[1]?!1:this._continueDrag(ne(ne({},i),{direction:v,inputEvent:n,isDrag:!0}))}},e.checkScroll=function(n){var i=this;if(this._isWait)return!1;var a=n.prevScrollPos,o=a===void 0?this._prevScrollPos:a,s=n.direction,u=n.throttleTime,l=u===void 0?0:u,f=n.inputEvent,c=n.isDrag,v=this._getScrollPosition(s||[0,0],n),d=v[0]-o[0],p=v[1]-o[1],h=s||[d?Math.abs(d)/d:0,p?Math.abs(p)/p:0];return this._prevScrollPos=v,this._lock=!1,!d&&!p?!1:(this.emit("move",{offsetX:h[0]?d:0,offsetY:h[1]?p:0,inputEvent:f}),l&&c&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},l)),!0)},e.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},e._getScrollPosition=function(n,i){var a=i.container,o=i.getScrollPosition,s=o===void 0?ng:o;return s({container:pn(a),direction:n})},e._continueDrag=function(n){var i=this,a,o=n.container,s=n.direction,u=n.throttleTime,l=n.useScroll,f=n.isDrag,c=n.inputEvent;if(!(!this._flag||f&&this._isWait)){var v=Pe(),d=Math.max(u+this._prevTime-v,0);if(d>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},d),!1;this._prevTime=v;var p=this._getScrollPosition(s,n);this._prevScrollPos=p,f&&(this._isWait=!0),l||(this._lock=!0);var h={container:pn(o),direction:s,inputEvent:c};return(a=n.requestScroll)===null||a===void 0||a.call(n,h),this.emit("scroll",h),this._isWait=!1,l||this.checkScroll(ne(ne({},n),{prevScrollPos:p,direction:s,inputEvent:c}))}},e._registerScrollEvent=function(n){this._unregisterScrollEvent();var i=n.checkScrollEvent;if(i){var a=i===!0?Ys:i,o=pn(n.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=Ys(window,this._onScroll):this._unregister=a(o,this._onScroll)}},e._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},r}(dn);const ag=ig;/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function og(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),i=0,r=0;r<e;r++)for(var a=arguments[r],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function Wt(t){return et(t,Mt)}function sg(t,r){return t.every(function(e,n){return Wt(e-r[n])===0})}function ug(t,r){return!Wt(t[0]-r[0])&&!Wt(t[1]-r[1])}function Ws(t){return t.length<3?0:Math.abs(oh(t.map(function(r,e){var n=t[e+1]||t[0];return r[0]*n[1]-n[0]*r[1]})))/2}function Xs(t,r){var e=r.width,n=r.height,i=r.left,a=r.top,o=jr(t),s=o.minX,u=o.minY,l=o.maxX,f=o.maxY,c=e/(l-s),v=n/(f-u);return t.map(function(d){return[i+(d[0]-s)*c,a+(d[1]-u)*v]})}function jr(t){var r=t.map(function(n){return n[0]}),e=t.map(function(n){return n[1]});return{minX:Math.min.apply(Math,r),minY:Math.min.apply(Math,e),maxX:Math.max.apply(Math,r),maxY:Math.max.apply(Math,e)}}function zi(t,r,e){var n=t[0],i=t[1],a=jr(r),o=a.minX,s=a.maxX,u=[[o,i],[s,i]],l=hn(u[0],u[1]),f=Li(r),c=[];if(f.forEach(function(p){var h=hn(p[0],p[1]),g=p[0];if(sg(l,h))c.push({pos:t,line:p,type:"line"});else{var m=Hs(Gi(l,h),[u,p]);m.forEach(function(y){p.some(function(b){return ug(b,y)})?c.push({pos:y,line:p,type:"point"}):Wt(g[1]-i)!==0&&c.push({pos:y,line:p,type:"intersection"})})}}),!e&&Yt(c,function(p){return p[0]===n}))return!0;var v=0,d={};return c.forEach(function(p){var h=p.pos,g=p.type,m=p.line;if(!(h[0]>n))if(g==="intersection")++v;else{if(g==="line")return;if(g==="point"){var y=Yt(m,function(C){return C[1]!==i}),b=d[h[0]],E=y[1]>i?1:-1;b?b!==E&&++v:d[h[0]]=E}}}),v%2===1}function hn(t,r){var e=t[0],n=t[1],i=r[0],a=r[1],o=i-e,s=a-n;Math.abs(o)<Mt&&(o=0),Math.abs(s)<Mt&&(s=0);var u=0,l=0,f=0;return o?s?(u=-s/o,l=1,f=-u*e-n):(l=1,f=-n):s&&(u=-1,f=e),[u,l,f]}function Gi(t,r){var e=t[0],n=t[1],i=t[2],a=r[0],o=r[1],s=r[2],u=e===0&&a===0,l=n===0&&o===0,f=[];if(u&&l)return[];if(u){var c=-i/n,v=-s/o;return c!==v?[]:[[-1/0,c],[1/0,c]]}else if(l){var d=-i/e,p=-s/a;return d!==p?[]:[[d,-1/0],[d,1/0]]}else if(e===0){var h=-i/n,g=-(o*h+s)/a;f=[[g,h]]}else if(a===0){var h=-s/o,g=-(n*h+i)/e;f=[[g,h]]}else if(n===0){var g=-i/e,h=-(a*g+s)/o;f=[[g,h]]}else if(o===0){var g=-s/a,h=-(e*g+i)/n;f=[[g,h]]}else{var g=(n*s-o*i)/(o*e-n*a),h=-(e*g+i)/n;f=[[g,h]]}return f.map(function(m){return[m[0],m[1]]})}function Hs(t,r){var e=r.map(function(c){return[0,1].map(function(v){return[Math.min(c[0][v],c[1][v]),Math.max(c[0][v],c[1][v])]})}),n=[];if(t.length===2){var i=t[0],a=i[0],o=i[1];if(Wt(a-t[1][0])){if(!Wt(o-t[1][1])){var l=Math.max.apply(Math,e.map(function(c){return c[0][0]})),f=Math.min.apply(Math,e.map(function(c){return c[0][1]}));if(Wt(l-f)>0)return[];n=[[l,o],[f,o]]}}else{var s=Math.max.apply(Math,e.map(function(c){return c[1][0]})),u=Math.min.apply(Math,e.map(function(c){return c[1][1]}));if(Wt(s-u)>0)return[];n=[[a,s],[a,u]]}}return n.length||(n=t.filter(function(c){var v=c[0],d=c[1];return e.every(function(p){return 0<=Wt(v-p[0][0])&&0<=Wt(p[0][1]-v)&&0<=Wt(d-p[1][0])&&0<=Wt(p[1][1]-d)})})),n.map(function(c){return[Wt(c[0]),Wt(c[1])]})}function Li(t){return og(t.slice(1),[t[0]]).map(function(r,e){return[t[e],r]})}function lg(t,r){var e=t.slice(),n=r.slice();ss(e)===-1&&e.reverse(),ss(n)===-1&&n.reverse();var i=Li(e),a=Li(n),o=i.map(function(f){return hn(f[0],f[1])}),s=a.map(function(f){return hn(f[0],f[1])}),u=[];o.forEach(function(f,c){var v=i[c],d=[];s.forEach(function(p,h){var g=Gi(f,p),m=Hs(g,[v,a[h]]);d.push.apply(d,m.map(function(y){return{index1:c,index2:h,pos:y,type:"intersection"}}))}),d.sort(function(p,h){return gr(v[0],p.pos)-gr(v[0],h.pos)}),u.push.apply(u,d),zi(v[1],n)&&u.push({index1:c,index2:-1,pos:v[1],type:"inside"})}),a.forEach(function(f,c){if(zi(f[1],e)){var v=!1,d=pr(u,function(p){var h=p.index2;return h===c?(v=!0,!1):!!v});d===-1&&(v=!1,d=pr(u,function(p){var h=p.index1,g=p.index2;return h===-1&&g+1===c?(v=!0,!1):!!v})),d===-1?u.push({index1:-1,index2:c,pos:f[1],type:"inside"}):u.splice(d,0,{index1:-1,index2:c,pos:f[1],type:"inside"})}});var l={};return u.filter(function(f){var c=f.pos,v=c[0]+"x"+c[1];return l[v]?!1:(l[v]=!0,!0)})}function fg(t,r){var e=lg(t,r);return e.map(function(n){var i=n.pos;return i})}function cg(t,r){var e=fg(t,r);return Ws(e)}/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Fi=function(t,r){return Fi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Fi(t,r)};function vg(t,r){Fi(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Pt=function(){return Pt=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Pt.apply(this,arguments)};function dg(t,r){var e=r[0]-t[0],n=r[1]-t[1],i=Math.atan2(n,e);return i>=0?i:i+Math.PI*2}function Ni(t){return dg([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function pg(t){return t.touches&&t.touches.length>=2}function gn(t){return t?t.touches?gg(t.touches):[qs(t)]:[]}function hg(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function Vs(t,r,e){var n=e.length,i=Le(t,n),a=i.clientX,o=i.clientY,s=i.originalClientX,u=i.originalClientY,l=Le(r,n),f=l.clientX,c=l.clientY,v=Le(e,n),d=v.clientX,p=v.clientY,h=a-f,g=o-c,m=a-d,y=o-p;return{clientX:s,clientY:u,deltaX:h,deltaY:g,distX:m,distY:y}}function $i(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function gg(t){for(var r=Math.min(t.length,2),e=[],n=0;n<r;++n)e.push(qs(t[n]));return e}function qs(t){return{clientX:t.clientX,clientY:t.clientY}}function Le(t,r){r===void 0&&(r=t.length);for(var e={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(t.length,r),i=0;i<n;++i){var a=t[i];e.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,e.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,e.clientX+=a.clientX,e.clientY+=a.clientY}return r?{clientX:e.clientX/r,clientY:e.clientY/r,originalClientX:e.originalClientX/r,originalClientY:e.originalClientY/r}:e}var ji=function(){function t(r){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=r,this.prevClients=r,this.length=r.length}return t.prototype.getAngle=function(r){return r===void 0&&(r=this.prevClients),Ni(r)},t.prototype.getRotation=function(r){return r===void 0&&(r=this.prevClients),Ni(r)-Ni(this.startClients)},t.prototype.getPosition=function(r,e){r===void 0&&(r=this.prevClients);var n=Vs(r||this.prevClients,this.prevClients,this.startClients),i=n.deltaX,a=n.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=r,n},t.prototype.getPositions=function(r){r===void 0&&(r=this.prevClients);for(var e=this.prevClients,n=this.startClients,i=Math.min(this.length,e.length),a=[],o=0;o<i;++o)a[o]=Vs([r[o]],[e[o]],[n[o]]);return a},t.prototype.getMovement=function(r){var e=this.movement;if(!r)return e;var n=Le(r,this.length),i=Le(this.prevClients,this.length),a=n.clientX-i.clientX,o=n.clientY-i.clientY;return Math.sqrt(a*a+o*o)+e},t.prototype.getDistance=function(r){return r===void 0&&(r=this.prevClients),$i(r)},t.prototype.getScale=function(r){return r===void 0&&(r=this.prevClients),$i(r)/$i(this.startClients)},t.prototype.move=function(r,e){this.startClients.forEach(function(n){n.clientX-=r,n.clientY-=e}),this.prevClients.forEach(function(n){n.clientX-=r,n.clientY-=e})},t}(),Us=["textarea","input"],mg=function(t){vg(r,t);function r(e,n){n===void 0&&(n={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._window=window,i.onDragStart=function(v,d){if(d===void 0&&(d=!0),!(!i.flag&&v.cancelable===!1)){var p=v.type.indexOf("drag")>=-1;if(!(i.flag&&p)){i._isDragAPI=!0;var h=i.options,g=h.container,m=h.pinchOutside,y=h.preventWheelClick,b=h.preventRightClick,E=h.preventDefault,C=h.checkInput,x=h.dragFocusedInput,S=h.preventClickEventOnDragStart,_=h.preventClickEventOnDrag,T=h.preventClickEventByCondition,D=i._useTouch,O=!i.flag;if(i._isSecondaryButton=v.which===3||v.button===2,y&&(v.which===2||v.button===1)||b&&(v.which===3||v.button===2))return i.stop(),!1;if(O){var R=i._window.document.activeElement,w=v.target;if(w){var I=w.tagName.toLowerCase(),k=Us.indexOf(I)>-1,F=w.isContentEditable;if(k||F){if(C||!x&&R===w)return!1;if(R&&(R===w||F&&R.isContentEditable&&R.contains(w)))if(x)w.blur();else return!1}else if((E||v.type==="touchstart")&&R){var L=R.tagName.toLowerCase();(R.isContentEditable||Us.indexOf(L)>-1)&&R.blur()}(S||_||T)&&At(i._window,"click",i._onClick,!0)}i.clientStores=[new ji(gn(v))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=d,i._dragFlag=!0,i._prevInputEvent=v,i.data={},i.doubleFlag=Pe()-i.prevTime<200,i._isMouseEvent=hg(v),!i._isMouseEvent&&i._preventMouseEvent&&(i._preventMouseEvent=!1);var A=i._preventMouseEvent||i.emit("dragStart",Pt(Pt({data:i.data,datas:i.data,inputEvent:v,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:d,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){v.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));A===!1&&i.stop(),i._isMouseEvent&&i.flag&&E&&v.preventDefault()}if(!i.flag)return!1;var $=0;if(O?(i._attchDragEvent(),D&&m&&($=setTimeout(function(){At(g,"touchstart",i.onDragStart,{passive:!1})}))):D&&m&&Rt(g,"touchstart",i.onDragStart),i.flag&&pg(v)){if(clearTimeout($),O&&v.touches.length!==v.changedTouches.length)return;i.pinchFlag||i.onPinchStart(v)}}}},i.onDrag=function(v,d){if(i.flag){var p=i.options.preventDefault;!i._isMouseEvent&&p&&v.preventDefault(),i._prevInputEvent=v;var h=gn(v),g=i.moveClients(h,v,!1);if(i._dragFlag){if(i.pinchFlag||g.deltaX||g.deltaY){var m=i._preventMouseEvent||i.emit("drag",Pt(Pt({},g),{isScroll:!!d,inputEvent:v}));if(m===!1){i.stop();return}}i.pinchFlag&&i.onPinch(v,h)}i.getCurrentStore().getPosition(h,!0)}},i.onDragEnd=function(v){if(i.flag){var d=i.options,p=d.pinchOutside,h=d.container,g=d.preventClickEventOnDrag,m=d.preventClickEventOnDragStart,y=d.preventClickEventByCondition,b=i.isDrag;(g||m||y)&&requestAnimationFrame(function(){i._allowClickEvent()}),!y&&!m&&g&&!b&&i._allowClickEvent(),i._useTouch&&p&&Rt(h,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(v);var E=v!=null&&v.touches?gn(v):[],C=E.length;C===0||!i.options.keepDragging?i.flag=!1:i._addStore(new ji(E));var x=i._getPosition(),S=Pe(),_=!b&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=b||_?0:S,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Pt({data:i.data,datas:i.data,isDouble:_,isDrag:b,isClick:!b,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:v,isTrusted:i._isTrusted},x)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){i._preventMouseEvent=!1})})),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Rt(i._window,"click",i._onClick,!0)},i._onClick=function(v){i._allowClickEvent(),i._preventMouseEvent=!1;var d=i.options.preventClickEventByCondition;d!=null&&d(v)||(v.stopPropagation(),v.preventDefault())},i._onContextMenu=function(v){var d=i.options;d.preventRightClick?i.onDragEnd(v):v.preventDefault()},i._passCallback=function(){};var a=[].concat(e),o=a[0];i._window=vs(o)?o:Sr(o),i.options=Pt({checkInput:!1,container:o&&!("document"in o)?Sr(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var s=i.options,u=s.container,l=s.events,f=s.checkWindowBlur;if(i._useDrag=l.indexOf("drag")>-1,i._useTouch=l.indexOf("touch")>-1,i._useMouse=l.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(v){At(v,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(v){At(v,"mousedown",i.onDragStart),At(v,"mousemove",i._passCallback)}),At(u,"contextmenu",i._onContextMenu)),f&&At(Sr(),"blur",i.onBlur),i._useTouch){var c={passive:!1};a.forEach(function(v){At(v,"touchstart",i.onDragStart,c),At(v,"touchmove",i._passCallback,c)})}return i}return r.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},r.prototype.getMovement=function(e){return this.getCurrentStore().getMovement(e)+this.clientStores.slice(1).reduce(function(n,i){return n+i.movement},0)},r.prototype.isDragging=function(){return this.isDrag},r.prototype.isIdle=function(){return this._isIdle},r.prototype.isFlag=function(){return this.flag},r.prototype.isPinchFlag=function(){return this.pinchFlag},r.prototype.isDoubleFlag=function(){return this.doubleFlag},r.prototype.isPinching=function(){return this.isPinch},r.prototype.scrollBy=function(e,n,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(e,n),a&&this.onDrag(i,!0))},r.prototype.move=function(e,n){var i=e[0],a=e[1],o=this.getCurrentStore(),s=o.prevClients;return this.moveClients(s.map(function(u){var l=u.clientX,f=u.clientY;return{clientX:l+i,clientY:f+a,originalClientX:l,originalClientY:f}}),n,!0)},r.prototype.triggerDragStart=function(e){this.onDragStart(e,!1)},r.prototype.setEventData=function(e){var n=this.data;for(var i in e)n[i]=e[i];return this},r.prototype.setEventDatas=function(e){return this.setEventData(e)},r.prototype.getCurrentEvent=function(e){return e===void 0&&(e=this._prevInputEvent),Pt(Pt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},r.prototype.getEventData=function(){return this.data},r.prototype.getEventDatas=function(){return this.data},r.prototype.unset=function(){var e=this,n=this.targets,i=this.options.container;this.off(),Rt(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(a){Rt(a,"dragstart",e.onDragStart)}),this._useMouse&&(n.forEach(function(a){Rt(a,"mousedown",e.onDragStart)}),Rt(i,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(a){Rt(a,"touchstart",e.onDragStart)}),Rt(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},r.prototype.onPinchStart=function(e){var n=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new ji(gn(e));this.pinchFlag=!0,this._addStore(a);var o=this.emit("pinchStart",Pt(Pt({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:e,isTrusted:this._isTrusted,preventDefault:function(){e.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},r.prototype.onPinch=function(e,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Pt(Pt({data:this.data,datas:this.data,movement:this.getMovement(n),angle:i.getAngle(n),rotation:i.getRotation(n),touches:i.getPositions(n),scale:i.getScale(n),distance:i.getDistance(n)},i.getPosition(n)),{inputEvent:e,isTrusted:this._isTrusted}))}},r.prototype.onPinchEnd=function(e){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Pt(Pt({data:this.data,datas:this.data,isPinch:n,touches:i.getPositions()},i.getPosition()),{inputEvent:e}))}},r.prototype.getCurrentStore=function(){return this.clientStores[0]},r.prototype.moveClients=function(e,n,i){var a=this._getPosition(e,i),o=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var s=!1;return!o&&this.isDrag&&(s=!0),Pt(Pt({data:this.data,datas:this.data},a),{movement:this.getMovement(e),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:s})},r.prototype._addStore=function(e){this.clientStores.splice(0,0,e)},r.prototype._getPosition=function(e,n){var i=this.getCurrentStore(),a=i.getPosition(e,n),o=this.clientStores.slice(1).reduce(function(l,f){var c=f.getPosition();return l.distX+=c.distX,l.distY+=c.distY,l},a),s=o.distX,u=o.distY;return Pt(Pt({},a),{distX:s,distY:u})},r.prototype._attchDragEvent=function(){var e=this._window,n=this.options.container,i={passive:!1};this._isDragAPI&&(At(n,"dragover",this.onDrag,i),At(e,"dragend",this.onDragEnd)),this._useMouse&&(At(n,"mousemove",this.onDrag),At(e,"mouseup",this.onDragEnd)),this._useTouch&&(At(n,"touchmove",this.onDrag,i),At(e,"touchend",this.onDragEnd,i),At(e,"touchcancel",this.onDragEnd,i))},r.prototype._dettachDragEvent=function(){var e=this._window,n=this.options.container;this._isDragAPI&&(Rt(n,"dragover",this.onDrag),Rt(e,"dragend",this.onDragEnd)),this._useMouse&&(Rt(n,"mousemove",this.onDrag),Rt(e,"mouseup",this.onDragEnd)),this._useTouch&&(Rt(n,"touchstart",this.onDragStart),Rt(n,"touchmove",this.onDrag),Rt(e,"touchend",this.onDragEnd),Rt(e,"touchcancel",this.onDragEnd))},r}(dn);function yg(t){for(var r=5381,e=t.length;e;)r=r*33^t.charCodeAt(--e);return r>>>0}var xg=yg;function bg(t){return xg(t).toString(36)}function Eg(t){if(t&&t.getRootNode){var r=t.getRootNode();if(r.nodeType===11)return r}}function Sg(t,r,e){return e.original?r:r.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,i){var a=i.trim();return(a?Fr(a):[""]).map(function(o){var s=o.trim();return s.indexOf("@")===0?s:s.indexOf(":global")>-1?s.replace(/\:global/g,""):s.indexOf(":host")>-1?"".concat(s.replace(/\:host/g,".".concat(t))):s?".".concat(t," ").concat(s):".".concat(t)}).join(", ")+" {"})}function Cg(t,r,e,n,i){var a=Qr(n),o=a.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),o.setAttribute("data-styled-count","1"),e.nonce&&o.setAttribute("nonce",e.nonce),o.innerHTML=Sg(t,r,e),(i||a.head||a.body).appendChild(o),o}function _g(t){var r="rCS"+bg(t);return{className:r,inject:function(e,n){n===void 0&&(n={});var i=Eg(e),a=(i||e.ownerDocument||document).querySelector('style[data-styled-id="'.concat(r,'"]'));if(!a)a=Cg(r,t,n,e,i);else{var o=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var s,u=parseFloat(a.getAttribute("data-styled-count"))||0;u<=1?(a.remove?a.remove():(s=a.parentNode)===null||s===void 0||s.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(u-1))}}}}}var Yi=function(){return Yi=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Yi.apply(this,arguments)};function Mg(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e}function Ks(t,r){var e=_g(r),n=e.className;return bh(function(i,a){var o=i.className,s=o===void 0?"":o;i.cspNonce;var u=Mg(i,["className","cspNonce"]),l=kh();return Ah(a,function(){return l.current},[]),ws(function(){var f=e.inject(l.current,{nonce:i.cspNonce});return function(){f.destroy()}},[]),tr(t,Yi({ref:l,"data-styled-id":n,className:"".concat(s," ").concat(n)},u))})}var Wi=function(t,r){return Wi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Wi(t,r)};function Fe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Wi(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var M=function(){return M=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},M.apply(this,arguments)};function Tg(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e}function Pg(t,r,e,n){var i=arguments.length,a=i<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(r,e,a):o(r,e))||a);return i>3&&a&&Object.defineProperty(r,e,a),a}function Dg(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function P(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a}function N(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))}function ie(t,r){return M({events:[],props:[],name:t},r)}var wg=["n","w","s","e"],Xi=["n","w","s","e","nw","ne","sw","se"];function Rg(t,r){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(r,'deg);transform-origin: 16px 16px"></path></svg>')}function Og(t){var r=Rg(1,t),e=Math.round(t/45)*45%180,n="ns-resize";return e===135?n="nwse-resize":e===45?n="nesw-resize":e===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(r,"') 16 16, ").concat(n,";")}var ae=Fh(),Zs=ae.browser.webkit,Js=Zs&&function(){var t=typeof window=="undefined"?{userAgent:""}:window.navigator,r=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return r?parseFloat(r[1])<605:!1}(),Qs=ae.browser.name,tu=parseInt(ae.browser.version,10),Ig=Qs==="chrome",kg=ae.browser.chromium,Ag=parseInt(ae.browser.chromiumVersion,10)||0,Bg=Ig&&tu>=109||kg&&Ag>=109,zg=Qs==="firefox",Gg=parseInt(ae.browser.webkitVersion,10)>=612||tu>=15,Hi="moveable-",Lg=Xi.map(function(t){var r="",e="",n="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(r="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(r="top: 0px;",i="top"),t.indexOf("w")>-1&&(e="left: ".concat(a,";"),n="right"),t.indexOf("e")>-1&&(e="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(e).concat(r,`
        transform-origin: `).concat(n," ").concat(i,`;
    }`)}).join(`
`),Fg=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Lg,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(Og(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(Js?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),Ng=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Vi=1e-4,Gt=1e-7,mn=1e-9,qi=Math.pow(10,10),ru=-qi,$g={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Ui={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},eu={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},nu=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function Ne(t,r,e,n,i,a){var o,s;a===void 0&&(a="draggable");var u=(s=(o=r.gestos[a])===null||o===void 0?void 0:o.move(e,t.inputEvent))!==null&&s!==void 0?s:{},l=u.originalDatas||u.datas,f=l[a]||(l[a]={});return M(M({},i?ol(r,u):u),{isPinch:!!n,parentEvent:!0,datas:f,originalDatas:t.originalDatas})}var oe=function(){function t(r){var e;r===void 0&&(r="draggable"),this.ableName=r,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(e={},e[r]={},e)}return t.prototype.dragStart=function(r,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),M(M({},this.move(r,e.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(r,e){return this.move([r[0]-this.prevX,r[1]-this.prevY],e)},t.prototype.move=function(r,e){var n,i,a=!1;if(!this.isFlag)this.prevX=r[0],this.prevY=r[1],this.startX=r[0],this.startY=r[1],n=r[0],i=r[1],this.isFlag=!0;else{var o=this.isDrag;n=this.prevX+r[0],i=this.prevY+r[1],(r[0]||r[1])&&(this.isDrag=!0),!o&&this.isDrag&&(a=!0)}return this.prevX=n,this.prevY=i,{type:"drag",clientX:n,clientY:i,inputEvent:e,isFirstDrag:a,isDrag:this.isDrag,distX:n-this.startX,distY:i-this.startY,deltaX:r[0],deltaY:r[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function se(t,r,e,n){var i=t.length===16,a=i?4:3,o=Hr(t,e,n,a),s=P(o,4),u=P(s[0],2),l=u[0],f=u[1],c=P(s[1],2),v=c[0],d=c[1],p=P(s[2],2),h=p[0],g=p[1],m=P(s[3],2),y=m[0],b=m[1],E=P(St(t,r,a),2),C=E[0],x=E[1],S=Math.min(l,v,h,y),_=Math.min(f,d,g,b),T=Math.max(l,v,h,y),D=Math.max(f,d,g,b);l=l-S||0,v=v-S||0,h=h-S||0,y=y-S||0,f=f-_||0,d=d-_||0,g=g-_||0,b=b-_||0,C=C-S||0,x=x-_||0;var O=t[0],R=t[a+1],w=Zt(O*R);return{left:S,top:_,right:T,bottom:D,origin:[C,x],pos1:[l,f],pos2:[v,d],pos3:[h,g],pos4:[y,b],direction:w}}function iu(t,r){var e=r.clientX,n=r.clientY,i=r.datas,a=t.state,o=a.moveableClientRect,s=a.rootMatrix,u=a.is3d,l=a.pos1,f=o.left,c=o.top,v=u?4:3,d=P(tt(he(s,[e-f,n-c],v),l),2),p=d[0],h=d[1],g=P(ur({datas:i,distX:p,distY:h}),2),m=g[0],y=g[1];return[m,y]}function Yr(t,r){var e=r.datas,n=t.state,i=n.allMatrix,a=n.beforeMatrix,o=n.is3d,s=n.left,u=n.top,l=n.origin,f=n.offsetMatrix,c=n.targetMatrix,v=n.transformOrigin,d=o?4:3;e.is3d=o,e.matrix=i,e.targetMatrix=c,e.beforeMatrix=a,e.offsetMatrix=f,e.transformOrigin=v,e.inverseMatrix=sr(i,d),e.inverseBeforeMatrix=sr(a,d),e.absoluteOrigin=Nr(ft([s,u],l),d),e.startDragBeforeDist=Bt(e.inverseBeforeMatrix,e.absoluteOrigin,d),e.startDragDist=Bt(e.inverseMatrix,e.absoluteOrigin,d)}function jg(t){return se(t.datas.beforeTransform,[50,50],100,100).direction}function yn(t,r,e){var n=r.datas,i=r.originalDatas.beforeRenderable,a=n.transformIndex,o=i.nextTransforms,s=o.length,u=i.nextTransformAppendedIndexes,l=-1;a===-1?(e==="translate"?l=0:e==="rotate"&&(l=pr(o,function(d){return d.match(/scale\(/g)})),l===-1&&(l=o.length),n.transformIndex=l):Yt(u,function(d){return d.index===a&&d.functionName===e})?l=a:l=a+u.filter(function(d){return d.index<a}).length;var f=dm(o,t.state,l),c=f.targetFunction,v=e==="rotate"?"rotateZ":e;n.beforeFunctionTexts=f.beforeFunctionTexts,n.afterFunctionTexts=f.afterFunctionTexts,n.beforeTransform=f.beforeFunctionMatrix,n.beforeTransform2=f.beforeFunctionMatrix2,n.targetTansform=f.targetFunctionMatrix,n.afterTransform=f.afterFunctionMatrix,n.afterTransform2=f.afterFunctionMatrix2,n.targetAllTransform=f.allFunctionMatrix,c.functionName===v?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>l&&(n.isAppendTransform=!0,i.nextTransformAppendedIndexes=N(N([],P(u),!1),[{functionName:e,index:l,isAppend:!0}],!1))}function xn(t,r,e){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?e:r," ").concat(t.afterFunctionTexts.join(" "))}function Yg(t){var r=t.datas,e=t.distX,n=t.distY,i=P(ou({datas:r,distX:e,distY:n}),2),a=i[0],o=i[1],s=au(r,Wh([a,o],4));return Bt(s,Nr([0,0,0],4),4)}function au(t,r,e){var n=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,o=t.afterTransform2,s=t.targetAllTransform,u=e?pt(s,r,4):pt(r,s,4),l=pt(sr(e?a:n,4),u,4),f=pt(l,sr(e?o:i,4),4);return f}function ou(t){var r=t.datas,e=t.distX,n=t.distY,i=r.inverseBeforeMatrix,a=r.is3d,o=r.startDragBeforeDist,s=r.absoluteOrigin,u=a?4:3;return tt(Bt(i,ft(s,[e,n]),u),o)}function ur(t,r){var e=t.datas,n=t.distX,i=t.distY,a=e.inverseBeforeMatrix,o=e.inverseMatrix,s=e.is3d,u=e.startDragBeforeDist,l=e.startDragDist,f=e.absoluteOrigin,c=s?4:3;return tt(Bt(r?a:o,ft(f,[n,i]),c),r?u:l)}function Wg(t,r){var e=t.datas,n=t.distX,i=t.distY,a=e.beforeMatrix,o=e.matrix,s=e.is3d,u=e.startDragBeforeDist,l=e.startDragDist,f=e.absoluteOrigin,c=s?4:3;return tt(Bt(r?a:o,ft(r?u:l,[n,i]),c),f)}function Xg(t,r,e,n,i,a){return n===void 0&&(n=r),i===void 0&&(i=e),a===void 0&&(a=[0,0]),t?t.map(function(o,s){var u=Te(o),l=u.value,f=u.unit,c=s?i:n,v=s?e:r;if(o==="%"||isNaN(l)){var d=c?a[s]/c:0;return v*d}else if(f!=="%")return l;return v*l/100}):a}function su(t){var r=[];return t[1]>=0&&(t[0]>=0&&r.push(3),t[0]<=0&&r.push(2)),t[1]<=0&&(t[0]>=0&&r.push(1),t[0]<=0&&r.push(0)),r}function Hg(t,r){return su(r).map(function(e){return t[e]})}function Ot(t,r){var e=(r[0]+1)/2,n=(r[1]+1)/2,i=[Lr(t[0][0],t[1][0],e,1-e),Lr(t[0][1],t[1][1],e,1-e)],a=[Lr(t[2][0],t[3][0],e,1-e),Lr(t[2][1],t[3][1],e,1-e)];return[Lr(i[0],a[0],n,1-n),Lr(i[1],a[1],n,1-n)]}function Vg(t,r,e,n,i,a){var o=Hr(r,e,n,i),s=Ot(o,a),u=t[0]-s[0],l=t[1]-s[1];return[u,l]}function $e(t,r,e,n){return pt(t,Xe(r,n,e),n)}function qg(t,r,e,n){var i=t.transformOrigin,a=t.offsetMatrix,o=t.is3d,s=o?4:3,u;if(jt(e)){var l=r.beforeTransform,f=r.afterTransform;n?u=rr(Ge(e),4,s):u=rr(pt(pt(l,Ge([e]),4),f,4),4,s)}else u=e;return $e(a,u,i,s)}function Ug(t,r){var e=t.transformOrigin,n=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,o=t.targetAllTransform,s=i?4:3;return $e(n,pt(o||a,Oi(r,s),s),e,s)}function bn(t,r){var e=ue(r);return{setTransform:function(n,i){i===void 0&&(i=-1),e.startTransforms=Tt(n)?n:br(n),Ki(t,r,i)},setTransformIndex:function(n){Ki(t,r,n)}}}function En(t,r,e){var n=ue(r),i=n.startTransforms;Ki(t,r,pr(i,function(a){return a.indexOf("".concat(e,"("))===0}))}function Ki(t,r,e){var n=ue(r),i=r.datas;if(i.transformIndex=e,e!==-1){var a=n.startTransforms[e];if(a){var o=t.state,s=ee([a],{"x%":function(u){return u/100*o.offsetWidth},"y%":function(u){return u/100*o.offsetHeight}});i.startValue=s[0].functionValue}}}function Zi(t,r){var e=ue(t);e.nextTransforms=br(r)}function ue(t){return t.originalDatas.beforeRenderable}function Sn(t){var r=t.originalDatas.beforeRenderable;return r.nextTransforms}function Cn(t){return(Sn(t)||[]).join(" ")}function _n(t){return ue(t).nextStyle}function uu(t,r,e,n,i){Zi(i,r);var a=Lt.drag(t,Ne(i,t.state,e,n,!1)),o=a?a.transform:r;return M(M({transform:r,drag:a},Ft({transform:o},i)),{afterTransform:o})}function Ji(t,r,e,n,i,a){var o=qg(t.state,i,r,a),s=Jg(t,e,n,o);return s}function lu(t,r,e,n,i,a,o){var s=Ji(t,r,e,i,a,o),u=t.state,l=u.left,f=u.top,c=t.props.groupable,v=c?l:0,d=c?f:0,p=tt(n,s);return tt(p,[v,d])}function Kg(t,r,e,n,i,a,o){var s=lu(t,r,e,n,i,a,o);return s}function Zg(t,r,e){return[r?-1+t[0]/(r/2):0,e?-1+t[1]/(e/2):0]}function Jg(t,r,e,n){n===void 0&&(n=t.state.allMatrix);var i=t.state,a=i.width,o=i.height,s=i.is3d,u=s?4:3,l=[a/2*(1+r[0])+e[0],o/2*(1+r[1])+e[1]];return St(n,l,u)}function Qg(t,r,e){var n=e.fixedDirection,i=e.fixedPosition,a=e.fixedOffset;return lu(t,"rotate(".concat(r,"deg)"),n,i,a,e)}function t0(t,r,e,n,i,a){var o=t.props.groupable,s=t.state,u=s.transformOrigin,l=s.offsetMatrix,f=s.is3d,c=s.width,v=s.height,d=s.left,p=s.top,h=a.fixedDirection,g=a.nextTargetMatrix||s.targetMatrix,m=f?4:3,y=Xg(i,r,e,c,v,u),b=o?d:0,E=o?p:0,C=$e(l,g,y,m),x=Vg(n,C,r,e,m,h);return tt(x,[b,E])}function r0(t,r){return Ot(Kt(t.state),r)}function e0(t,r){var e=t.targetGesto,n=t.controlGesto,i;return e!=null&&e.isFlag()&&(i=e.getEventData()[r]),!i&&(n!=null&&n.isFlag())&&(i=n.getEventData()[r]),i||{}}function n0(t){if(t&&t.getRootNode){var r=t.getRootNode();if(r.nodeType===11)return r}}function i0(t){var r=t("scale"),e=t("rotate"),n=t("translate"),i=[];return n&&n!=="0px"&&n!=="none"&&i.push("translate(".concat(n.split(/\s+/).join(","),")")),e&&e!=="1"&&e!=="none"&&i.push("rotate(".concat(e,")")),r&&r!=="1"&&r!=="none"&&i.push("scale(".concat(r.split(/\s+/).join(","),")")),i}function fu(t,r,e){for(var n=t,i=[],a=yi(t)||Er(t),o=!e&&t===r||t===a,s=o,u=!1,l=3,f,c,v,d=!1,p=He(r,r,!0).offsetParent,h=1;n&&!s;){s=o;var g=Xt(n),m=g("position"),y=qu(n),b=m==="fixed",E=i0(g),C=Xh(tm(y)),x=void 0,S=!1,_=!1,T=0,D=0,O=0,R=0,w={hasTransform:!1,fixedContainer:null};b&&(d=!0,w=am(n),p=w.fixedContainer);var I=C.length;!u&&(I===16||E.length)&&(u=!0,l=4,ha(i),v&&(v=rr(v,3,4))),u&&I===9&&(C=rr(C,3,4));var k=im(n,t),F=k.tagName,L=k.hasOffset,A=k.isSVG,$=k.origin,j=k.targetOrigin,G=k.offset,q=P(G,2),U=q[0],W=q[1];F==="svg"&&v&&(i.push({type:"target",target:n,matrix:om(n,l)}),i.push({type:"offset",target:n,matrix:xt(l)}));var H=parseFloat(g("zoom"))||1;if(b)x=w.fixedContainer,S=!0;else{var Y=He(n,r,!1,!0,g),V=Y.offsetZoom;if(x=Y.offsetParent,S=Y.isEnd,_=Y.isStatic,h*=V,(Y.isCustomElement||V!==1)&&_)U-=x.offsetLeft,W-=x.offsetTop;else if(zg||Bg){var Q=Y.parentSlotElement;if(Q){for(var it=x,rt=0,Z=0;it&&n0(it);)rt+=it.offsetLeft,Z+=it.offsetTop,it=it.offsetParent;U-=rt,W-=Z}}}if(Zs&&!Gg&&L&&!A&&_&&(m==="relative"||m==="static")&&(U-=x.offsetLeft,W-=x.offsetTop,o=o||S),b)L&&w.hasTransform&&(O=x.clientLeft,R=x.clientTop);else if(L&&p!==x&&(T=x.clientLeft,D=x.clientTop),L&&x===a){var K=Uu(n,!1);U+=K[0],W+=K[1]}if(i.push({type:"target",target:n,matrix:Xe(C,l,$)}),E.length&&(i.push({type:"offset",target:n,matrix:xt(l)}),i.push({type:"target",target:n,matrix:Xe(Ge(E),l,$)})),L){var ct=n===t,at=ct?0:n.scrollLeft,ot=ct?0:n.scrollTop;i.push({type:"offset",target:n,matrix:$r([U-at+T-O,W-ot+D-R],l)})}else i.push({type:"offset",target:n,origin:$});if(H!==1&&i.push({type:"zoom",target:n,matrix:Xe(Oi([H,H],l),l,[0,0])}),v||(v=C),f||(f=$),c||(c=j),s||b)break;n=x,o=S,(!e||n===a)&&(s=o)}return v||(v=xt(l)),f||(f=[0,0]),c||(c=[0,0]),{zoom:h,offsetContainer:p,matrixes:i,targetMatrix:v,transformOrigin:f,targetOrigin:c,is3d:u,hasFixed:d}}var Wr=null,Xr=null,le=null;function fe(t){t?(window.Map&&(Wr=new Map,Xr=new Map),le=[]):(Wr=null,le=null,Xr=null)}function a0(t){var r=Xr==null?void 0:Xr.get(t);if(r)return r;var e=qe(t,!0);return Xr&&Xr.set(t,e),e}function o0(t,r){if(le){var e=Yt(le,function(i){return i[0][0]==t&&i[0][1]==r});if(e)return e[1]}var n=fu(t,r,!0);return le&&le.push([[t,r],n]),n}function Xt(t){var r=Wr==null?void 0:Wr.get(t);if(!r){var e=Sr(t).getComputedStyle(t);if(!Wr)return function(a){return e[a]};r={style:e,cached:{}},Wr.set(t,r)}var n=r.cached,i=r.style;return function(a){return a in n||(n[a]=i[a]),n[a]}}function er(t,r,e){var n=e.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(o,s){return a[s]=a[s]||{},a[s][r]=a[s][r]||{},M(M({},e),{isRequestChild:!0,datas:a[s][r],originalDatas:a[s]})})}function Qi(t,r,e,n,i,a,o){var s=!!e.match(/Start$/g),u=!!e.match(/End$/g),l=i.isPinch,f=i.datas,c=er(t,r.name,i),v=t.moveables,d=c.map(function(p,h){var g=v[h],m=g.state,y=m.gestos,b=p;if(s)b=new oe(o).dragStart(n,p);else{if(y[o]||(y[o]=f.childGestos[h]),!y[o])return;b=Ne(p,m,n,l,a,o)}var E=r[e](g,M(M({},b),{parentFlag:!0}));return u&&(y[o]=null),E});return s&&(f.childGestos=v.map(function(p){return p.state.gestos[o]})),d}function mr(t,r,e,n,i,a){i===void 0&&(i=function(f,c){return c});var o=!!e.match(/End$/g),s=er(t,r.name,n),u=t.moveables,l=s.map(function(f,c){var v=u[c],d=f;d=i(v,f);var p=r[e](v,M(M({},d),{parentFlag:!0}));return p&&a&&a(v,f,p,c),o&&(v.state.gestos={}),p});return l}function Mn(t,r,e,n){var i=e.fixedDirection,a=e.fixedPosition,o=n.datas.startPositions||Kt(r.state),s=Ot(o,i),u=P(Bt(Be(-t.rotation/180*Math.PI,3),[s[0]-a[0],s[1]-a[1],1],3),2),l=u[0],f=u[1];return n.datas.originalX=l,n.datas.originalY=f,n}function cu(t,r,e,n){var i=t.getState(),a=i.renderPoses,o=i.rotation,s=i.direction,u=Vr(t.props,r).zoom,l=We(o/Math.PI*180),f={},c=t.renderState;c.renderDirectionMap||(c.renderDirectionMap={});var v=c.renderDirectionMap;e.forEach(function(p){var h=p.dir;f[h]=!0});var d=Zt(s);return e.map(function(p){var h=p.data,g=p.classNames,m=p.dir,y=Ui[m];if(!y||!f[m])return null;v[m]=!0;var b=(et(l,15)+d*eu[m]+720)%180,E={};return hr(h).forEach(function(C){E["data-".concat(C)]=h[C]}),n.createElement("div",M({className:J.apply(void 0,N(["control","direction",m,r],P(g),!1)),"data-rotation":b,"data-direction":m},E,{key:"direction-".concat(m),style:Bn.apply(void 0,N([o,u],P(y.map(function(C){return a[C]})),!1))}))})}function vu(t,r,e,n){var i=Vr(t.props,e),a=i.renderDirections,o=a===void 0?r:a,s=i.displayAroundControls;if(!o)return[];var u=o===!0?Xi:o;return N(N([],P(s?gu(t,n,e,u):[]),!1),P(cu(t,e,u.map(function(l){return{data:{},classNames:[],dir:l}}),n)),!1)}function je(t,r,e,n,i,a){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var u=_t(e,n),l=r?et(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:J.apply(void 0,N(["line","direction",r?"edge":"",r],P(o),!1)),"data-rotation":l,"data-line-key":a,"data-direction":r,style:Ve(e,n,i,u)})}function du(t,r,e,n,i){var a=e===!0?wg:e;return a.map(function(o,s){var u=P(Ui[o],2),l=u[0],f=u[1];if(f!=null)return je(t,o,n[l],n[f],i,"".concat(r,"Edge").concat(s),r)}).filter(Boolean)}function pu(t){return function(r,e){var n=Vr(r.props,t).edge;return n&&(n===!0||n.length)?N(N([],P(du(e,t,n,r.getState().renderPoses,r.props.zoom)),!1),P(s0(r,t,e)),!1):hu(r,t,e)}}function hu(t,r,e){return vu(t,Xi,r,e)}function s0(t,r,e){return vu(t,["nw","ne","sw","se"],r,e)}function gu(t,r,e,n){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),o=a.renderPoses,s=a.rotation,u=a.direction,l=i.renderDirectionMap,f=t.props.zoom,c=Zt(u),v=s/Math.PI*180;return(n||hr(l)).map(function(d){var p=Ui[d];if(!p)return null;var h=(et(v,15)+c*eu[d]+720)%180,g=["around-control"];return e&&g.push("direction",e),r.createElement("div",{className:J.apply(void 0,N([],P(g),!1)),"data-rotation":h,"data-direction":d,key:"direction-around-".concat(d),style:Bn.apply(void 0,N([s,f],P(p.map(function(m){return o[m]})),!1))})})}function ta(t,r,e){var n=t||{},i=n.position,a=i===void 0?"client":i,o=n.left,s=o===void 0?-1/0:o,u=n.top,l=u===void 0?-1/0:u,f=n.right,c=f===void 0?1/0:f,v=n.bottom,d=v===void 0?1/0:v,p={position:a,left:s,top:l,right:c,bottom:d};return{vertical:mu(p,r,!0),horizontal:mu(p,e,!1)}}function Tn(t,r){var e=t.state,n=e.containerClientRect,i=n.clientHeight,a=n.clientWidth,o=n.clientLeft,s=n.clientTop,u=e.snapOffset,l=u.left,f=u.top,c=u.right,v=u.bottom,d=r||t.props.bounds||{},p=d.position||"client",h=p==="css",g=d.left,m=g===void 0?-1/0:g,y=d.top,b=y===void 0?-1/0:y,E=d.right,C=E===void 0?h?-1/0:1/0:E,x=d.bottom,S=x===void 0?h?-1/0:1/0:x;return h&&(C=a+c-l-C,S=i+v-f-S),{left:m+l-o,right:C+l-o,top:b+f-s,bottom:S+f-s}}function u0(t,r,e){var n=Tn(t),i=n.left,a=n.top,o=n.right,s=n.bottom,u=P(e,2),l=u[0],f=u[1],c=P(tt(e,r),2),v=c[0],d=c[1];z(v)<Gt&&(v=0),z(d)<Gt&&(d=0);var p=d>0,h=v>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(v===0&&d===0)return{vertical:g,horizontal:m};if(v===0)p?s<f&&(m.pos=s,m.offset=f-s):a>f&&(m.pos=a,m.offset=f-a);else if(d===0)h?o<l&&(g.pos=o,g.offset=l-o):i>l&&(g.pos=i,g.offset=l-i);else{var y=d/v,b=e[1]-y*l,E=0,C=0,x=!1;h&&o<=l?(E=y*o+b,C=o,x=!0):!h&&l<=i&&(E=y*i+b,C=i,x=!0),x&&(E<a||E>s)&&(x=!1),x||(p&&s<=f?(E=s,C=(E-b)/y,x=!0):!p&&f<=a&&(E=a,C=(E-b)/y,x=!0)),x&&(g.isBound=!0,g.pos=C,g.offset=l-C,m.isBound=!0,m.pos=E,m.offset=f-E)}return{vertical:g,horizontal:m}}function mu(t,r,e){var n=t[e?"left":"top"],i=t[e?"right":"bottom"],a=Math.min.apply(Math,N([],P(r),!1)),o=Math.max.apply(Math,N([],P(r),!1)),s=[];return n+1>a&&s.push({direction:"start",isBound:!0,offset:a-n,pos:n}),i-1<o&&s.push({direction:"end",isBound:!0,offset:o-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(u,l){return z(l.offset)-z(u.offset)})}function yu(t,r,e){var n=e?t.map(function(i){return Ae(i,e)}):t;return n.some(function(i){return i[0]<r.left&&z(i[0]-r.left)>.1||i[0]>r.right&&z(i[0]-r.right)>.1||i[1]<r.top&&z(i[1]-r.top)>.1||i[1]>r.bottom&&z(i[1]-r.bottom)>.1})}function l0(t,r,e){var n=Ut(t),i=Math.sqrt(n*n-r*r)||0;return[i,-i].sort(function(a,o){return z(a-t[e?0:1])-z(o-t[e?0:1])}).map(function(a){return _t([0,0],e?[a,r]:[r,a])})}function f0(t,r,e,n,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,o=Tn(t),s=o.left,u=o.top,l=o.right,f=o.bottom,c=s-n[0],v=l-n[0],d=u-n[1],p=f-n[1],h={left:c,top:d,right:v,bottom:p};if(!yu(e,h,0))return[];var g=[];return[[c,0],[v,0],[d,1],[p,1]].forEach(function(m){var y=P(m,2),b=y[0],E=y[1];e.forEach(function(C){var x=_t([0,0],C);g.push.apply(g,N([],P(l0(C,b,E).map(function(S){return a+S-x}).filter(function(S){return!yu(r,h,S)}).map(function(S){return et(S*180/Math.PI,Gt)})),!1))})}),g}var c0=["left","right","center"],v0=["top","bottom","middle"],xu={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Cr={start:"left",end:"right",center:"center"},_r={start:"top",end:"bottom",center:"middle"};function ce(){return{left:!1,top:!1,right:!1,bottom:!1}}function ve(t,r){var e=t.props,n=e.snappable,i=e.bounds,a=e.innerBounds,o=e.verticalGuidelines,s=e.horizontalGuidelines,u=e.snapGridWidth,l=e.snapGridHeight,f=t.state,c=f.guidelines,v=f.enableSnap;return!n||!v||r&&n!==!0&&n.indexOf(r)<0?!1:!!(u||l||i||a||c&&c.length||o&&o.length||s&&s.length)}function ra(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function d0(t,r){var e=ra(t),n={};for(var i in e)i in r&&e[i]&&(n[i]=r[i]);return n}function ea(t,r){var e=d0(t,r),n=v0.filter(function(a){return a in e}),i=c0.filter(function(a){return a in e});return{horizontalNames:n,verticalNames:i,horizontal:n.map(function(a){return e[a]}),vertical:i.map(function(a){return e[a]})}}function p0(t,r,e){var n=St(t,[r.clientLeft,r.clientTop],e);return[r.left+n[0],r.top+n[1]]}function h0(t){var r=P(t,2),e=r[0],n=r[1],i=n[0]-e[0],a=n[1]-e[1];Math.abs(i)<Mt&&(i=0),Math.abs(a)<Mt&&(a=0);var o=0,s=0,u=0;return i?a?(o=-a/i,s=1,u=o*e[0]-e[1]):(s=1,u=-e[1]):(o=-1,u=e[0]),[o,s,u].map(function(l){return et(l,Mt)})}function Pn(t,r,e,n,i,a){n===void 0&&(n=[]),i===void 0&&(i=[]);var o=t.props,s=cm(a,o.snapThreshold,5);return bu(t.state.guidelines,r,e,n,i,s)}function bu(t,r,e,n,i,a){return{vertical:Su(t,"vertical",r,a,n),horizontal:Su(t,"horizontal",e,a,i)}}function g0(t,r,e){var n=P(e,2),i=n[0],a=n[1],o=P(r,2),s=o[0],u=o[1],l=P(tt(e,r),2),f=l[0],c=l[1],v=c>0,d=f>0;f=Nn(f),c=Nn(c);var p={isSnap:!1,offset:0,pos:0},h={isSnap:!1,offset:0,pos:0};if(f===0&&c===0)return{vertical:p,horizontal:h};var g=Pn(t,f?[i]:[],c?[a]:[]),m=g.vertical,y=g.horizontal;m.posInfos.filter(function(F){var L=F.pos;return d?L>=s:L<=s}),y.posInfos.filter(function(F){var L=F.pos;return v?L>=u:L<=u}),m.isSnap=m.posInfos.length>0,y.isSnap=y.posInfos.length>0;var b=na(m),E=b.isSnap,C=b.guideline,x=na(y),S=x.isSnap,_=x.guideline,T=S?_.pos[1]:0,D=E?C.pos[0]:0;if(f===0)S&&(h.isSnap=!0,h.pos=_.pos[1],h.offset=a-h.pos);else if(c===0)E&&(p.isSnap=!0,p.pos=D,p.offset=i-D);else{var O=c/f,R=e[1]-O*i,w=0,I=0,k=!1;E?(I=D,w=O*I+R,k=!0):S&&(w=T,I=(w-R)/O,k=!0),k&&(p.isSnap=!0,p.pos=I,p.offset=i-I,h.isSnap=!0,h.pos=w,h.offset=a-w)}return{vertical:p,horizontal:h}}function Mr(t){var r="";return t===-1||t==="top"||t==="left"?r="start":t===0||t==="center"||t==="middle"?r="center":(t===1||t==="right"||t==="bottom")&&(r="end"),r}function Eu(t,r,e){var n=ea(t.props.snapDirections,r),i=Pn(t,n.vertical,n.horizontal,n.verticalNames.map(function(s){return Mr(s)}),n.horizontalNames.map(function(s){return Mr(s)}),e),a=Mr(n.horizontalNames[i.horizontal.index]),o=Mr(n.verticalNames[i.vertical.index]);return{vertical:M(M({},i.vertical),{direction:o}),horizontal:M(M({},i.horizontal),{direction:a})}}function na(t){var r=t.isSnap;if(!r)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var e=t.posInfos[0],n=e.guidelineInfos[0],i=n.offset,a=n.dist,o=n.guideline;return{isSnap:r,offset:i,dist:a,pos:e.pos,guideline:o}}function Su(t,r,e,n,i){var a,o;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var s=r==="vertical",u=s?0:1,l=e.map(function(c,v){var d=i[v]||"",p=t.map(function(h){var g=h.pos,m=c-g[u];return{offset:m,dist:z(m),guideline:h,direction:d}}).filter(function(h){var g=h.guideline,m=h.dist,y=g.type;return!(y!==r||m>n)}).sort(function(h,g){return h.dist-g.dist});return{pos:c,index:v,guidelineInfos:p,direction:d}}).filter(function(c){return c.guidelineInfos.length>0}).sort(function(c,v){return c.guidelineInfos[0].dist-v.guidelineInfos[0].dist}),f=l.length>0;return{isSnap:f,index:f?l[0].index:-1,direction:(o=(a=l[0])===null||a===void 0?void 0:a.direction)!==null&&o!==void 0?o:"",posInfos:l}}function m0(t,r,e,n){n===void 0&&(n=1);var i=[];e[0]&&e[1]?i=[e,[-e[0],e[1]],[e[0],-e[1]]]:!e[0]&&!e[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(c,v,d){var p=d[v+1]||d[0];i.push(c),i.push([(c[0]+p[0])/2,(c[1]+p[1])/2])}):t.props.keepRatio?i.push([-1,-1],[-1,1],[1,-1],[1,1],e):(i.push.apply(i,N([],P(Hg([[-1,-1],[1,-1],[-1,-1],[1,1]],e)),!1)),i.length>1&&i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]));var a=i.map(function(c){return Ot(r,c)}),o=a.map(function(c){return c[0]}),s=a.map(function(c){return c[1]}),u=Pn(t,o,s,i.map(function(c){return Mr(c[0])}),i.map(function(c){return Mr(c[1])}),n),l=Mr(i.map(function(c){return c[0]})[u.vertical.index]),f=Mr(i.map(function(c){return c[1]})[u.horizontal.index]);return{vertical:M(M({},u.vertical),{direction:l}),horizontal:M(M({},u.horizontal),{direction:f})}}function Cu(t,r){var e=z(t.offset),n=z(r.offset);return t.isBound&&r.isBound?n-e:t.isBound?-1:r.isBound?1:t.isSnap&&r.isSnap?n-e:t.isSnap?-1:r.isSnap||e<Gt?1:n<Gt?-1:e-n}function Dn(t,r){return t.slice().sort(function(e,n){var i=e.sign[r],a=n.sign[r],o=e.offset[r],s=n.offset[r];if(i){if(!a)return-1}else return 1;return Cu({isBound:e.isBound,isSnap:e.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:s})})[0]}function y0(t,r,e){var n=[];if(e)z(r[0])!==1||z(r[1])!==1?n.push([r,[-1,-1]],[r,[-1,1]],[r,[1,-1]],[r,[1,1]]):n.push([r,[t[0],-t[1]]],[r,[-t[0],t[1]]]),n.push([r,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(s){var u=[o*i[0],s*i[1]];r[0]===u[0]&&r[1]===u[1]||n.push([r,u])})})}else if(t[0]){var a=z(r[0])===1?[1]:[1,-1];a.forEach(function(o){n.push([[r[0],-1],[o*t[0],-1]],[[r[0],0],[o*t[0],0]],[[r[0],1],[o*t[0],1]])})}else if(t[1]){var a=z(r[1])===1?[1]:[1,-1];a.forEach(function(s){n.push([[-1,r[1]],[-1,s*t[1]]],[[0,r[1]],[0,s*t[1]]],[[1,r[1]],[1,s*t[1]]])})}return n}function _u(t,r){var e=mi([r[0][0],r[1][0]]),n=mi([r[0][1],r[1][1]]);return{vertical:e<=t[0],horizontal:n<=t[1]}}function ia(t,r){var e=P(r,2),n=e[0],i=e[1],a=i[0]-n[0],o=i[1]-n[1];z(a)<Gt&&(a=0),z(o)<Gt&&(o=0);var s,u;if(!a)s=n[0],u=t[0];else if(!o)s=n[1],u=t[1];else{var l=o/a;s=l*(t[0]-n[0])+n[1],u=t[1]}return s-u}function Mu(t,r,e,n){return n===void 0&&(n=Gt),t.every(function(i){var a=ia(i,r),o=a<=0;return o===e||z(a)<=n})}function Tu(t,r,e,n,i){return i===void 0&&(i=0),n&&r-i<=t||!n&&t<=e+i?{isBound:!0,offset:n?r-t:e-t}:{isBound:!1,offset:0}}function x0(t,r){var e=r.line,n=r.centerSign,i=r.verticalSign,a=r.horizontalSign,o=r.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,l=s.top,f=s.width,c=s.height,v=[[u,l],[u,l+c]],d=[[u,l],[u+f,l]],p=[[u+f,l],[u+f,l+c]],h=[[u,l+c],[u+f,l+c]];if(Mu([[u,l],[u+f,l],[u,l+c],[u+f,l+c]],e,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Tr(e,o,d,i),m=Tr(e,o,h,i),y=Tr(e,o,v,a),b=Tr(e,o,p,a),E=g.isBound&&m.isBound,C=g.isBound||m.isBound,x=y.isBound&&b.isBound,S=y.isBound||b.isBound,_=pe(g.offset,m.offset),T=pe(y.offset,b.offset),D=[0,0],O=!1,R=!1;return z(T)<z(_)?(D=[_,0],O=C,R=E):(D=[0,T],O=S,R=x),{isAllBound:R,isVerticalBound:C,isHorizontalBound:S,isBound:O,offset:D}}function Tr(t,r,e,n,i,a){var o=P(r,2),s=o[0],u=o[1],l=t[0],f=e[0],c=e[1],v=Nn(c[1]-f[1]),d=Nn(c[0]-f[0]),p=u,h=s,g=-s/u;if(d){if(!v){if(a&&!p)return{isBound:!1,offset:0};if(h){var E=(f[1]-l[1])/g+l[0];return Tu(E,f[0],c[0],n,i)}else{var y=f[1]-l[1],b=z(y)<=(i||0);return{isBound:b,offset:b?y:0}}}}else{if(a&&!h)return{isBound:!1,offset:0};if(p){var m=g*(f[0]-l[0])+l[1];return Tu(m,f[1],c[1],n,i)}else{var y=f[0]-l[0],b=z(y)<=(i||0);return{isBound:b,offset:b?y:0}}}return{isBound:!1,offset:0}}function Pu(t,r,e){return r.map(function(n){var i=x0(t,n),a=i.isBound,o=i.offset,s=i.isVerticalBound,u=i.isHorizontalBound,l=n.multiple,f=ur({datas:e,distX:o[0],distY:o[1]}).map(function(c,v){return c*(l[v]?2/l[v]:0)});return{sign:l,isBound:a,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:f}})}function b0(t,r,e){var n,i=aa(t,r,[0,0],!1).map(function(v){return M(M({},v),{multiple:v.multiple.map(function(d){return z(d)*2})})}),a=Pu(t,i,e),o=Dn(a,0),s=Dn(a,1),u=0,l=0,f=o.isVerticalBound||s.isVerticalBound,c=o.isHorizontalBound||s.isHorizontalBound;return(f||c)&&(n=P(Wg({datas:e,distX:-o.offset[0],distY:-s.offset[1]}),2),u=n[0],l=n[1]),{vertical:{isBound:f,offset:u},horizontal:{isBound:c,offset:l}}}function E0(t,r){var e=[],n=t[0],i=t[1];return n&&i?e.push([[0,i*2],t,[-n,i]],[[n*2,0],t,[n,-i]]):n?(e.push([[n*2,0],[n,1],[n,-1]]),r&&e.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):i?(e.push([[0,i*2],[1,i],[-1,i]]),r&&e.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):e.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),e}function aa(t,r,e,n){var i=t.state,a=i.allMatrix,o=i.is3d,s=Hr(a,100,100,o?4:3),u=Ot(s,[0,0]);return E0(e,n).map(function(l){var f=P(l,3),c=f[0],v=f[1],d=f[2],p=[Ot(s,v),Ot(s,d)],h=h0(p),g=_u(u,p),m=g.vertical,y=g.horizontal,b=ia(u,p)<=0;return{multiple:c,centerSign:b,verticalSign:m,horizontalSign:y,lineConstants:h,line:[Ot(r,v),Ot(r,d)]}})}function Du(t,r,e,n){var i=n?t.map(function(a){return Ae(a,n)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var o=ia(e,a)<=0;return!Mu(r,a,o)})}function S0(t){var r=P(t,2),e=r[0],n=r[1],i=n[0]-e[0],a=n[1]-e[1];if(!i)return z(e[0]);if(!a)return z(e[1]);var o=a/i;return z((-o*e[0]+e[1])/Math.sqrt(Math.pow(o,2)+1))}function C0(t){var r=P(t,2),e=r[0],n=r[1],i=n[0]-e[0],a=n[1]-e[1];if(!i)return[e[0],0];if(!a)return[0,e[1]];var o=a/i,s=-o*e[0]+e[1];return[-s/(o+1/o),s/(o*o+1)]}function _0(t,r,e,n,i){var a=t.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var s=a.left,u=a.top,l=a.width,f=a.height,c=s-n[0],v=s+l-n[0],d=u-n[1],p=u+f-n[1],h=[[c,d],[v,d],[c,p],[v,p]],g=Ot(e,[0,0]);if(!Du(e,h,g,0))return[];var m=[],y=h.map(function(b){return[Ut(b),_t([0,0],b)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(b){var E=_t([0,0],C0(b)),C=S0(b);m.push.apply(m,N([],P(y.filter(function(x){var S=P(x,1),_=S[0];return _&&C<=_}).map(function(x){var S=P(x,2),_=S[0],T=S[1],D=Math.acos(_?C/_:0),O=T+D,R=T-D;return[o+O-E,o+R-E]}).reduce(function(x,S){return x.push.apply(x,N([],P(S),!1)),x},[]).filter(function(x){return!Du(r,h,g,x)}).map(function(x){return et(x*180/Math.PI,Gt)})),!1))}),m}function M0(t){var r=t.props.innerBounds,e=ce();if(!r)return{boundMap:e,vertical:[],horizontal:[]};var n=t.getRect(),i=n.pos1,a=n.pos2,o=n.pos3,s=n.pos4,u=[i,a,o,s],l=Ot(u,[0,0]),f=r.left,c=r.top,v=r.width,d=r.height,p=[[f,c],[f,c+d]],h=[[f,c],[f+v,c]],g=[[f+v,c],[f+v,c+d]],m=[[f,c+d],[f+v,c+d]],y=aa(t,u,[0,0],!1),b=[],E=[];return y.forEach(function(C){var x=C.line,S=C.lineConstants,_=_u(l,x),T=_.horizontal,D=_.vertical,O=Tr(x,S,h,D,1,!0),R=Tr(x,S,m,D,1,!0),w=Tr(x,S,p,T,1,!0),I=Tr(x,S,g,T,1,!0);O.isBound&&!e.top&&(b.push(c),e.top=!0),R.isBound&&!e.bottom&&(b.push(c+d),e.bottom=!0),w.isBound&&!e.left&&(E.push(f),e.left=!0),I.isBound&&!e.right&&(E.push(f+v),e.right=!0)}),{boundMap:e,horizontal:b,vertical:E}}function T0(t,r,e,n){var i=r[0]-t[0],a=r[1]-t[1];if(z(i)<Mt&&(i=0),z(a)<Mt&&(a=0),!i)return n?[0,0]:[0,e];if(!a)return n?[e,0]:[0,0];var o=a/i,s=t[1]-o*t[0];if(n){var u=o*(r[0]+e)+s;return[e,u-r[1]]}else{var l=(r[1]+e-s)/o;return[l-r[0],e]}}function oa(t,r,e,n,i){var a=T0(t,r,e,n);if(!a)return{isOutside:!1,offset:[0,0]};var o=gr(t,r),s=gr(a,t),u=gr(a,r),l=s>o||u>o,f=P(ur({datas:i,distX:a[0],distY:a[1]}),2),c=f[0],v=f[1];return{offset:[c,v],isOutside:l}}function wn(t,r){return t.isBound?t.offset:r.isSnap?na(r).offset:0}function P0(t,r,e,n,i){var a=P(r,2),o=a[0],s=a[1],u=P(e,2),l=u[0],f=u[1],c=P(n,2),v=c[0],d=c[1],p=P(i,2),h=p[0],g=p[1],m=-h,y=-g;if(t&&o&&s){m=0,y=0;var b=[];if(l&&f?b.push([0,g],[h,0]):l?b.push([h,0]):f?b.push([0,g]):v&&d?b.push([0,g],[h,0]):v?b.push([h,0]):d&&b.push([0,g]),b.length){b.sort(function(S,_){return Ut(tt([o,s],S))-Ut(tt([o,s],_))});var E=b[0];if(E[0]&&z(o)>Mt)m=-E[0],y=s*z(o+m)/z(o)-s;else if(E[1]&&z(s)>Mt){var C=s;y=-E[1],m=o*z(s+y)/z(C)-o}if(t&&f&&l)if(z(m)>Mt&&z(m)<z(h)){var x=z(h)/z(m);m*=x,y*=x}else if(z(y)>Mt&&z(y)<z(g)){var x=z(g)/z(y);m*=x,y*=x}else m=pe(-h,m),y=pe(-g,y)}}else m=o||l?-h:0,y=s||f?-g:0;return[m,y]}function D0(t,r,e,n,i,a){if(!ve(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=ya(a.absolutePoses,[r,e]),s=qt(o),u=s.left,l=s.right,f=s.top,c=s.bottom,v={horizontal:o.map(function(I){return I[1]}),vertical:o.map(function(I){return I[0]})},d=ra(t.props.snapDirections),p=ea(d,{left:u,right:l,top:f,bottom:c,center:(u+l)/2,middle:(f+c)/2}),h=Rn(t,i,p,v),g=h.vertical,m=h.horizontal,y=b0(t,o,a),b=y.vertical,E=y.horizontal,C=g.isSnap,x=m.isSnap,S=g.isBound||b.isBound,_=m.isBound||E.isBound,T=pe(g.offset,b.offset),D=pe(m.offset,E.offset),O=P(P0(n,[r,e],[S,_],[C,x],[T,D]),2),R=O[0],w=O[1];return[{isBound:S,isSnap:C,offset:R},{isBound:_,isSnap:x,offset:w}]}function Rn(t,r,e,n){n===void 0&&(n=e);var i=ta(Tn(t),n.vertical,n.horizontal),a=i.horizontal,o=i.vertical,s=r?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Pn(t,e.vertical,e.horizontal),u=s.horizontal,l=s.vertical,f=wn(a[0],u),c=wn(o[0],l),v=z(f),d=z(c);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:v,bounds:a,snap:u},vertical:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:d,bounds:o,snap:l}}}function wu(t,r,e,n,i){var a=ta(r,e,n),o=a.horizontal,s=a.vertical,u=bu(t,e,n,[],[],i),l=u.horizontal,f=u.vertical,c=wn(o[0],l),v=wn(s[0],f),d=z(c),p=z(v);return{horizontal:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:d,bounds:o,snap:l},vertical:{isBound:s[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:v,dist:p,bounds:s,snap:f}}}function w0(t,r,e,n){var i=_t(t,r)/Math.PI*180,a=e.vertical,o=a.isBound,s=a.isSnap,u=a.dist,l=e.horizontal,f=l.isBound,c=l.isSnap,v=l.dist,d=i%180,p=d<3||d>177,h=d>87&&d<93;return v<u&&(o||s&&!h&&(!n||!p))?"vertical":f||c&&!p&&(!n||!h)?"horizontal":""}function R0(t,r,e,n,i,a){return e.map(function(o){var s=P(o,2),u=s[0],l=s[1],f=Ot(r,u),c=Ot(r,l),v=n?O0(t,f,c,i):Rn(t,i,{vertical:[c[0]],horizontal:[c[1]]}),d=v.horizontal,p=d.offset,h=d.isBound,g=d.isSnap,m=v.vertical,y=m.offset,b=m.isBound,E=m.isSnap,C=tt(l,u);if(!y&&!p)return{isBound:b||h,isSnap:E||g,sign:C,offset:[0,0]};var x=w0(f,c,v,n);if(!x)return{sign:C,isBound:!1,isSnap:!1,offset:[0,0]};var S=x==="vertical",_=[0,0];return!n&&z(l[0])===1&&z(l[1])===1&&u[0]!==l[0]&&u[1]!==l[1]?_=ur({datas:a,distX:-y,distY:-p}):_=oa(f,c,-(S?y:p),S,a).offset,_=_.map(function(T,D){return T*(C[D]?2/C[D]:0)}),{sign:C,isBound:S?b:h,isSnap:S?E:g,offset:_}})}function Ru(t,r){return t.isBound?t.offset:r.isSnap?r.offset:0}function O0(t,r,e,n){var i=u0(t,r,e),a=i.horizontal,o=i.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:g0(t,r,e),u=s.horizontal,l=s.vertical,f=Ru(a,u),c=Ru(o,l),v=z(f),d=z(c);return{horizontal:{isBound:a.isBound,isSnap:u.isSnap,offset:f,dist:v},vertical:{isBound:o.isBound,isSnap:l.isSnap,offset:c,dist:d}}}function I0(t,r,e,n,i){var a=[-e[0],-e[1]],o=t.state,s=o.width,u=o.height,l=t.props.bounds,f=1/0,c=1/0;if(l){var v=[[e[0],-e[1]],[-e[0],e[1]]],d=l.left,p=d===void 0?-1/0:d,h=l.top,g=h===void 0?-1/0:h,m=l.right,y=m===void 0?1/0:m,b=l.bottom,E=b===void 0?1/0:b;v.forEach(function(C){var x=C[0]!==a[0],S=C[1]!==a[1],_=Ot(r,C),T=_t(n,_)*360/Math.PI;if(S){var D=_.slice();(z(T-360)<2||z(T-180)<2)&&(D[1]=n[1]);var O=oa(n,D,(n[1]<_[1]?E:g)-_[1],!1,i),R=P(O.offset,2),w=R[1],I=O.isOutside;isNaN(w)||(c=u+(I?1:-1)*z(w))}if(x){var D=_.slice();(z(T-90)<2||z(T-270)<2)&&(D[0]=n[0]);var k=oa(n,D,(n[0]<_[0]?y:p)-_[0],!0,i),F=P(k.offset,1),L=F[0],A=k.isOutside;isNaN(L)||(f=s+(A?1:-1)*z(L))}})}return{maxWidth:f,maxHeight:c}}var Lt={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,r){var e=t.props,n=e.hideThrottleDragRotateLine,i=e.throttleDragRotate,a=e.zoom,o=t.getState(),s=o.dragInfo,u=o.beforeOrigin;if(n||!i||!s)return[];var l=s.dist;if(!l[0]&&!l[1])return[];var f=Ut(l),c=_t(l,[0,0]);return[r.createElement("div",{className:J("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(c,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,r){var e=r.datas,n=r.parentEvent,i=r.parentGesto,a=t.state,o=a.gestos,s=a.style;if(o.draggable)return!1;o.draggable=i||t.targetGesto,e.datas={},e.left=parseFloat(s.left||"")||0,e.top=parseFloat(s.top||"")||0,e.bottom=parseFloat(s.bottom||"")||0,e.right=parseFloat(s.right||"")||0,e.startValue=[0,0],Yr(t,r),En(t,r,"translate"),K0(t,e),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1,e.deltaOffset=[0,0];var u=nt(t,r,M({set:function(f){e.startValue=f}},bn(t,r))),l=n||X(t,"onDragStart",u);return l!==!1?(e.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,e.isPinch=!1),e.isDrag?u:!1},drag:function(t,r){if(r){yn(t,r,"translate");var e=r.datas,n=r.parentEvent,i=r.parentFlag,a=r.isPinch,o=r.deltaOffset,s=r.useSnap,u=r.isRequest,l=r.distX,f=r.distY,c=e.isDrag,v=e.prevDist,d=e.prevBeforeDist,p=e.startValue;if(c){o&&(l+=o[0],f+=o[1]);var h=t.props,g=h.parentMoveable,m=n?0:h.throttleDrag||0,y=n?0:h.throttleDragRotate||0,b=0,E=!1,C=!1,x=!1,S=!1;if(!n&&y>0&&(l||f)){var _=h.startDragRotate||0,T=et(_+_t([0,0],[l,f])*180/Math.PI,y)-_,D=f*Math.abs(Math.cos((T-90)/180*Math.PI)),O=l*Math.abs(Math.cos(T/180*Math.PI)),R=Ut([O,D]);b=T*Math.PI/180,l=R*Math.cos(b),f=R*Math.sin(b)}if(!a&&!n&&!i){var w=P(D0(t,l,f,y,!s&&u||o,e),2),I=w[0],k=w[1];E=I.isSnap,C=I.isBound,x=k.isSnap,S=k.isBound;var F=I.offset,L=k.offset;l+=F,f+=L}var A=ft(ou({datas:e,distX:l,distY:f}),p),$=ft(Yg({datas:e,distX:l,distY:f}),p);us($,Gt),us(A,Gt),y||(!E&&!C&&($[0]=et($[0],m),A[0]=et(A[0],m)),!x&&!S&&($[1]=et($[1],m),A[1]=et(A[1],m)));var j=tt(A,p),G=tt($,p),q=tt(G,v),U=tt(j,d);e.prevDist=G,e.prevBeforeDist=j,e.passDelta=q,e.passDist=G;var W=e.left+j[0],H=e.top+j[1],Y=e.right-j[0],V=e.bottom-j[1],Q=xn(e,"translate(".concat($[0],"px, ").concat($[1],"px)"),"translate(".concat(G[0],"px, ").concat(G[1],"px)"));if(Zi(r,Q),t.state.dragInfo.dist=n?[0,0]:G,!(!n&&!g&&q.every(function(ct){return!ct})&&U.some(function(ct){return!ct}))){var it=t.state,rt=it.width,Z=it.height,K=nt(t,r,M({transform:Q,dist:G,delta:q,translate:$,beforeDist:j,beforeDelta:U,beforeTranslate:A,left:W,top:H,right:Y,bottom:V,width:rt,height:Z,isPinch:a},Ft({transform:Q},r)));return!n&&X(t,"onDrag",K),K}}}},dragAfter:function(t,r){var e=r.datas,n=e.deltaOffset;return n[0]||n[1]?(e.deltaOffset=[0,0],this.drag(t,M(M({},r),{deltaOffset:n}))):!1},dragEnd:function(t,r){var e=r.parentEvent,n=r.datas;if(t.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var i=Ht(t,r,{});return!e&&X(t,"onDragEnd",i),i}},dragGroupStart:function(t,r){var e=r.datas,n=r.clientX,i=r.clientY,a=this.dragStart(t,r);if(!a)return!1;var o=Qi(t,this,"dragStart",[n||0,i||0],r,!1,"draggable"),s=M(M({},a),{targets:t.props.targets,events:o}),u=X(t,"onDragGroupStart",s);return e.isDrag=u!==!1,e.isDrag?a:!1},dragGroup:function(t,r){var e=r.datas;if(e.isDrag){var n=this.drag(t,r),i=r.datas.passDelta,a=Qi(t,this,"drag",i,r,!1,"draggable");if(n){var o=M({targets:t.props.targets,events:a},n);return X(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isDrag){this.dragEnd(t,r);var i=Qi(t,this,"dragEnd",[0,0],r,!1,"draggable");return X(t,"onDragGroupEnd",Ht(t,r,{targets:t.props.targets,events:i})),e}},request:function(t){var r={},e=t.getRect(),n=0,i=0,a=!1;return{isControl:!1,requestStart:function(o){return a=o.useSnap,{datas:r,useSnap:a}},request:function(o){return"x"in o?n=o.x-e.left:"deltaX"in o&&(n+=o.deltaX),"y"in o?i=o.y-e.top:"deltaY"in o&&(i+=o.deltaY),{datas:r,distX:n,distY:i,useSnap:a}},requestEnd:function(){return{datas:r,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function Ou(t,r){var e=Ot(t,r),n=[0,0];return{fixedPosition:e,fixedDirection:r,fixedOffset:n}}function k0(t,r){var e=t.allMatrix,n=t.is3d,i=t.width,a=t.height,o=n?4:3,s=[i/2*(1+r[0]),a/2*(1+r[1])],u=St(e,s,o),l=[0,0];return{fixedPosition:u,fixedDirection:r,fixedOffset:l}}function Iu(t,r){var e=t.allMatrix,n=t.is3d,i=t.width,a=t.height,o=n?4:3,s=Zg(r,i,a),u=St(e,r,o),l=[i?0:r[0],a?0:r[1]];return{fixedPosition:u,fixedDirection:s,fixedOffset:l}}var ku=Ca("resizable"),sa={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:pu("resizable"),dragControlCondition:ku,viewClassName:Sa("resizable"),dragControlStart:function(t,r){var e,n=r.inputEvent,i=r.isPinch,a=r.isGroup,o=r.parentDirection,s=r.parentGesto,u=r.datas,l=r.parentFixedDirection,f=r.parentEvent,c=rl(o,i,n,u),v=t.state,d=v.target,p=v.width,h=v.height,g=v.gestos;if(!c||!d||g.resizable)return!1;g.resizable=s||t.controlGesto,!i&&Yr(t,r),u.datas={},u.direction=c,u.startOffsetWidth=p,u.startOffsetHeight=h,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=v.inlineCSSWidth||v.cssWidth,u.startHeight=v.inlineCSSHeight||v.cssHeight,u.maxSize=[1/0,1/0],a||(u.minSize=[v.minOffsetWidth,v.minOffsetHeight],u.maxSize=[v.maxOffsetWidth,v.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";u.transformOrigin=m&&jt(m)?m.split(" "):m,u.startOffsetMatrix=v.offsetMatrix,u.startTransformOrigin=v.transformOrigin,u.isWidth=(e=r==null?void 0:r.parentIsWidth)!==null&&e!==void 0?e:!c[0]&&!c[1]||c[0]||!c[1];function y(T){u.ratio=T&&isFinite(T)?T:0}u.startPositions=Kt(t.state);function b(T){var D=Ou(u.startPositions,T);u.fixedDirection=D.fixedDirection,u.fixedPosition=D.fixedPosition,u.fixedOffset=D.fixedOffset}function E(T){var D=Iu(t.state,T);u.fixedDirection=D.fixedDirection,u.fixedPosition=D.fixedPosition,u.fixedOffset=D.fixedOffset}function C(T){u.minSize=[dt("".concat(T[0]),0)||0,dt("".concat(T[1]),0)||0]}function x(T){var D=[T[0]||1/0,T[1]||1/0];(!Jr(D[0])||isFinite(D[0]))&&(D[0]=dt("".concat(D[0]),0)||1/0),(!Jr(D[1])||isFinite(D[1]))&&(D[1]=dt("".concat(D[1]),0)||1/0),u.maxSize=D}y(p/h),b(l||[-c[0],-c[1]]),u.setFixedDirection=b,u.setFixedPosition=E,u.setMin=C,u.setMax=x;var S=nt(t,r,{direction:c,startRatio:u.ratio,set:function(T){var D=P(T,2),O=D[0],R=D[1];u.startWidth=O,u.startHeight=R},setMin:C,setMax:x,setRatio:y,setFixedDirection:b,setFixedPosition:E,setOrigin:function(T){u.transformOrigin=T},dragStart:Lt.dragStart(t,new oe().dragStart([0,0],r))}),_=f||X(t,"onResizeStart",S);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,_!==!1&&(u.isResize=!0,t.state.snapRenderInfo={request:r.isRequest,direction:c}),u.isResize?S:!1},dragControl:function(t,r){var e,n=r.datas,i=r.parentFlag,a=r.isPinch,o=r.parentKeepRatio,s=r.dragClient,u=r.parentDist,l=r.useSnap,f=r.isRequest,c=r.isGroup,v=r.parentEvent,d=r.resolveMatrix,p=n.isResize,h=n.transformOrigin,g=n.startWidth,m=n.startHeight,y=n.prevWidth,b=n.prevHeight,E=n.minSize,C=n.maxSize,x=n.ratio,S=n.startOffsetWidth,_=n.startOffsetHeight,T=n.isWidth;if(!p)return;if(d){var D=t.state.is3d,O=n.startOffsetMatrix,R=n.startTransformOrigin,w=D?4:3,I=Ge(Sn(r)),k=Math.sqrt(I.length);w!==k&&(I=rr(I,k,w));var F=$e(O,I,R,w),L=Hr(F,S,_,w);n.startPositions=L,n.nextTargetMatrix=I,n.nextAllMatrix=F}var A=Vr(t.props,"resizable"),$=A.resizeFormat,j=A.throttleResize,G=j===void 0?i?0:1:j,q=A.parentMoveable,U=A.keepRatioFinally,W=n.direction,H=W,Y=0,V=0;!W[0]&&!W[1]&&(H=[1,1]);var Q=x&&(o!=null?o:A.keepRatio)||!1;function it(){var Dt=n.fixedDirection,It=ll(H,Q,n,r);Y=It.distWidth,V=It.distHeight;var Dr=H[0]-Dt[0]||Q?Math.max(S+Y,Gt):S,wr=H[1]-Dt[1]||Q?Math.max(_+V,Gt):_;return Q&&S&&_&&(T?wr=Dr/x:Dr=wr*x),[Dr,wr]}var rt=P(it(),2),Z=rt[0],K=rt[1];v||(n.setFixedDirection(n.fixedDirection),X(t,"onBeforeResize",nt(t,r,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(Dt){var It;return n.setFixedDirection(Dt),It=P(it(),2),Z=It[0],K=It[1],[Z,K]},setFixedPosition:function(Dt){var It;return n.setFixedPosition(Dt),It=P(it(),2),Z=It[0],K=It[1],[Z,K]},boundingWidth:Z,boundingHeight:K,setSize:function(Dt){var It;It=P(Dt,2),Z=It[0],K=It[1]}},!0)));var ct=s;s||(!i&&a?ct=r0(t,[0,0]):ct=n.fixedPosition);var at=[0,0];a||(at=q0(t,Z,K,W,ct,!l&&f,n)),u&&(!u[0]&&(at[0]=0),!u[1]&&(at[1]=0));function ot(){var Dt;$&&(Dt=P($([Z,K]),2),Z=Dt[0],K=Dt[1]),Z=et(Z,G),K=et(K,G)}if(Q){H[0]&&H[1]&&at[0]&&at[1]&&(z(at[0])>z(at[1])?at[1]=0:at[0]=0);var lt=!at[0]&&!at[1];lt&&ot(),H[0]&&!H[1]||at[0]&&!at[1]||lt&&T?(Z+=at[0],K=Z/x):(!H[0]&&H[1]||!at[0]&&at[1]||lt&&!T)&&(K+=at[1],Z=K*x)}else Z+=at[0],K+=at[1],Z=Math.max(0,Z),K=Math.max(0,K);e=P(os([Z,K],E,C,Q?x:!1),2),Z=e[0],K=e[1],ot(),Q&&(c||U)&&(T?K=Z/x:Z=K*x),Y=Z-S,V=K-_;var Et=[Y-y,V-b];n.prevWidth=Y,n.prevHeight=V;var ht=t0(t,Z,K,ct,h,n);if(!(!q&&Et.every(function(Dt){return!Dt})&&ht.every(function(Dt){return!Dt}))){var st=Lt.drag(t,Ne(r,t.state,ht,!!a,!1,"draggable")),vt=st.transform,kt=g+Y,Nt=m+V,zt=nt(t,r,M({width:kt,height:Nt,offsetWidth:Math.round(Z),offsetHeight:Math.round(K),startRatio:x,boundingWidth:Z,boundingHeight:K,direction:W,dist:[Y,V],delta:Et,isPinch:!!a,drag:st},nl({style:{width:"".concat(kt,"px"),height:"".concat(Nt,"px")},transform:vt},st,r)));return!v&&X(t,"onResize",zt),zt}},dragControlAfter:function(t,r){var e=r.datas,n=e.isResize,i=e.startOffsetWidth,a=e.startOffsetHeight,o=e.prevWidth,s=e.prevHeight;if(!(!n||t.props.checkResizableError===!1)){var u=t.state,l=u.width,f=u.height,c=l-(i+o),v=f-(a+s),d=z(c)>3,p=z(v)>3;if(d&&(e.startWidth+=c,e.startOffsetWidth+=c,e.prevWidth+=c),p&&(e.startHeight+=v,e.startOffsetHeight+=v,e.prevHeight+=v),d||p)return this.dragControl(t,r)}},dragControlEnd:function(t,r){var e=r.datas,n=r.parentEvent;if(e.isResize){e.isResize=!1;var i=Ht(t,r,{});return!n&&X(t,"onResizeEnd",i),i}},dragGroupControlCondition:ku,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,M(M({},r),{isGroup:!0}));if(!n)return!1;var i=er(t,"resizable",r),a=e.startOffsetWidth,o=e.startOffsetHeight;function s(){var d=e.minSize;i.forEach(function(p){var h=p.datas,g=h.minSize,m=h.startOffsetWidth,y=h.startOffsetHeight,b=a*(m?g[0]/m:0),E=o*(y?g[1]/y:0);d[0]=Math.max(d[0],b),d[1]=Math.max(d[1],E)})}function u(){var d=e.maxSize;i.forEach(function(p){var h=p.datas,g=h.maxSize,m=h.startOffsetWidth,y=h.startOffsetHeight,b=a*(m?g[0]/m:0),E=o*(y?g[1]/y:0);d[0]=Math.min(d[0],b),d[1]=Math.min(d[1],E)})}var l=mr(t,this,"dragControlStart",r,function(d,p){return Mn(t,d,e,p)});s(),u();var f=function(d){n.setFixedDirection(d),l.forEach(function(p,h){p.setFixedDirection(d),Mn(t,p.moveable,e,i[h])})};e.setFixedDirection=f;var c=M(M({},n),{targets:t.props.targets,events:l.map(function(d){return M(M({},d),{setMin:function(p){d.setMin(p),s()},setMax:function(p){d.setMax(p),u()}})}),setFixedDirection:f,setMin:function(d){n.setMin(d),s()},setMax:function(d){n.setMax(d),u()}}),v=X(t,"onResizeGroupStart",c);return e.isResize=v!==!1,e.isResize?n:!1},dragGroupControl:function(t,r){var e=r.datas;if(e.isResize){var n=Vr(t.props,"resizable");Gn(t,"onBeforeResize",function(d){X(t,"onBeforeResizeGroup",nt(t,r,M(M({},d),{targets:n.targets}),!0))});var i=this.dragControl(t,M(M({},r),{isGroup:!0}));if(i){var a=i.boundingWidth,o=i.boundingHeight,s=i.dist,u=n.keepRatio,l=[a/(a-s[0]),o/(o-s[1])],f=e.fixedPosition,c=mr(t,this,"dragControl",r,function(d,p){var h=P(Bt(Be(t.rotation/180*Math.PI,3),[p.datas.originalX*l[0],p.datas.originalY*l[1],1],3),2),g=h[0],m=h[1];return M(M({},p),{parentDist:null,parentScale:l,dragClient:ft(f,[g,m]),parentKeepRatio:u})}),v=M({targets:n.targets,events:c},i);return X(t,"onResizeGroup",v),v}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isResize){this.dragControlEnd(t,r);var i=mr(t,this,"dragControlEnd",r),a=Ht(t,r,{targets:t.props.targets,events:i});return X(t,"onResizeGroupEnd",a),e}},request:function(t){var r={},e=0,n=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(o){var s;return i=o.useSnap,{datas:r,parentDirection:o.direction||[1,1],parentIsWidth:(s=o==null?void 0:o.horizontal)!==null&&s!==void 0?s:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?e=o.offsetWidth-a.offsetWidth:"deltaWidth"in o&&(e+=o.deltaWidth),"offsetHeight"in o?n=o.offsetHeight-a.offsetHeight:"deltaHeight"in o&&(n+=o.deltaHeight),{datas:r,parentDist:[e,n],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:r,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function ua(t,r,e,n,i){var a=t.props.groupable,o=t.state,s=o.is3d?4:3,u=r.origin,l=St(t.state.rootMatrix,tt([u[0],u[1]],a?[0,0]:[o.left,o.top]),s),f=ft([i.left,i.top],l);r.startAbsoluteOrigin=f,r.prevDeg=_t(f,[e,n])/Math.PI*180,r.defaultDeg=r.prevDeg,r.prevSnapDeg=0,r.loop=0,r.startDist=gr(f,[e,n])}function On(t,r,e){var n=e.defaultDeg,i=e.prevDeg,a=i%360,o=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++o:a<t&&a<90&&t>270&&--o;var s=r*(o*360+t-n);return e.prevDeg=n+s,s}function la(t,r,e,n){return On(_t(n.startAbsoluteOrigin,[t,r])/Math.PI*180,e,n)}function fa(t,r,e,n,i,a){var o=t.props.throttleRotate,s=o===void 0?0:o,u=e.prevSnapDeg,l=0,f=!1;if(a){var c=V0(t,r,n,i+n);f=c.isSnap,l=i+c.dist}f||(l=et(i+n,s));var v=l-i;return e.prevSnapDeg=v,[v-u,v,l]}function Au(t,r,e){var n=P(r,4),i=n[0],a=n[1],o=n[2],s=n[3];if(t==="none")return[];if(Tt(t))return t.map(function(g){return Au(g,[i,a,o,s],e)[0]});var u=P((t||"top").split("-"),2),l=u[0],f=u[1],c=[i,a];l==="left"?c=[o,i]:l==="right"?c=[a,s]:l==="bottom"&&(c=[s,o]);var v=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],d=Qu(c,e);if(f){var p=f==="top"||f==="left",h=l==="bottom"||l==="left";v=c[p&&!h||!p&&h?0:1]}return[[v,d]]}function ca(t,r){if(r.isRequest)return r.requestAble==="rotatable";var e=r.inputEvent.target;if(wt(e,J("rotation-control"))||t.props.rotateAroundControls&&wt(e,J("around-control"))||wt(e,J("control"))&&wt(e,J("rotatable")))return!0;var n=t.props.rotationTarget;return n?_a(n,!0).some(function(i){return i?e===i||e.contains(i):!1}):!1}var A0=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,B0={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[A0],viewClassName:function(t){return t.isDragging("rotatable")?J("view-rotation-dragging"):""},render:function(t,r){var e=Vr(t.props,"rotatable"),n=e.rotatable,i=e.rotationPosition,a=e.zoom,o=e.renderDirections,s=e.rotateAroundControls,u=e.resolveAblesWithRotatable,l=t.getState(),f=l.renderPoses,c=l.direction;if(!n)return null;var v=Au(i,f,c),d=[];if(v.forEach(function(m,y){var b=P(m,2),E=b[0],C=b[1];d.push(r.createElement("div",{key:"rotation".concat(y),className:J("rotation"),style:{transform:"translate(-50%) translate(".concat(E[0],"px, ").concat(E[1],"px) rotate(").concat(C,"rad)")}},r.createElement("div",{className:J("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),r.createElement("div",{className:J("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),o){var p=hr(u||{}),h={};p.forEach(function(m){u[m].forEach(function(y){h[y]=m})});var g=[];Tt(o)&&(g=o.map(function(m){var y=h[m];return{data:y?{resolve:y}:{},classNames:y?["move"]:[],dir:m}})),d.push.apply(d,N([],P(cu(t,"rotatable",g,r)),!1))}return s&&d.push.apply(d,N([],P(gu(t,r)),!1)),d},dragControlCondition:ca,dragControlStart:function(t,r){var e,n,i=r.datas,a=r.clientX,o=r.clientY,s=r.parentRotate,u=r.parentFlag,l=r.isPinch,f=r.isRequest,c=t.state,v=c.target,d=c.left,p=c.top,h=c.direction,g=c.beforeDirection,m=c.targetTransform,y=c.moveableClientRect,b=c.offsetMatrix,E=c.targetMatrix,C=c.allMatrix,x=c.width,S=c.height;if(!f&&!v)return!1;var _=t.getRect();i.rect=_,i.transform=m,i.left=d,i.top=p;var T=function(H){var Y=Iu(t.state,H);i.fixedDirection=Y.fixedDirection,i.fixedOffset=Y.fixedOffset,i.fixedPosition=Y.fixedPosition,G&&G.setFixedPosition(H)},D=function(H){var Y=k0(t.state,H);i.fixedDirection=Y.fixedDirection,i.fixedOffset=Y.fixedOffset,i.fixedPosition=Y.fixedPosition,G&&G.setFixedDirection(H)},O=a,R=o;if(f||l||u){var w=s||0;i.beforeInfo={origin:_.beforeOrigin,prevDeg:w,defaultDeg:w,prevSnapDeg:0,startDist:0},i.afterInfo=M(M({},i.beforeInfo),{origin:_.origin}),i.absoluteInfo=M(M({},i.beforeInfo),{origin:_.origin,startValue:w})}else{var I=(n=r.inputEvent)===null||n===void 0?void 0:n.target;if(I){var k=I.getAttribute("data-direction")||"",F=$g[k];if(F){i.isControl=!0,i.isAroundControl=wt(I,J("around-control")),i.controlDirection=F;var L=I.getAttribute("data-resolve");L&&(i.resolveAble=L);var A=lm(c.rootMatrix,c.renderPoses,y);e=P(Ot(A,F),2),O=e[0],R=e[1]}}i.beforeInfo={origin:_.beforeOrigin},i.afterInfo={origin:_.origin},i.absoluteInfo={origin:_.origin,startValue:_.rotation};var $=T;T=function(H){var Y=c.is3d?4:3,V=P(ft(Ls(E,Y),H),2),Q=V[0],it=V[1],rt=Bt(b,Nr([Q,it],Y)),Z=Bt(C,Nr([H[0],H[1]],Y));$(H);var K=c.posDelta;i.beforeInfo.origin=tt(rt,K),i.afterInfo.origin=tt(Z,K),i.absoluteInfo.origin=tt(Z,K),ua(t,i.beforeInfo,O,R,y),ua(t,i.afterInfo,O,R,y),ua(t,i.absoluteInfo,O,R,y)},D=function(H){var Y=Ot([[0,0],[x,0],[0,S],[x,S]],H);T(Y)}}i.startClientX=O,i.startClientY=R,i.direction=h,i.beforeDirection=g,i.startValue=0,i.datas={},En(t,r,"rotate");var j=!1,G=!1;if(i.isControl&&i.resolveAble){var q=i.resolveAble;q==="resizable"&&(G=sa.dragControlStart(t,M(M({},new oe("resizable").dragStart([0,0],r)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}G||(j=Lt.dragStart(t,new oe().dragStart([0,0],r))),T(fm(t));var U=nt(t,r,M(M({set:function(H){i.startValue=H*Math.PI/180},setFixedDirection:D,setFixedPosition:T},bn(t,r)),{dragStart:j,resizeStart:G})),W=X(t,"onRotateStart",U);return i.isRotate=W!==!1,c.snapRenderInfo={request:r.isRequest},i.isRotate?U:!1},dragControl:function(t,r){var e,n,i,a=r.datas,o=r.clientDistX,s=r.clientDistY,u=r.parentRotate,l=r.parentFlag,f=r.isPinch,c=r.groupDelta,v=r.resolveMatrix,d=a.beforeDirection,p=a.beforeInfo,h=a.afterInfo,g=a.absoluteInfo,m=a.isRotate,y=a.startValue,b=a.rect,E=a.startClientX,C=a.startClientY;if(m){yn(t,r,"rotate");var x=jg(r),S=d*x,_=t.props.parentMoveable,T=0,D,O,R=0,w,I,k=0,F,L,A=180/Math.PI*y,$=g.startValue,j=!1,G=E+o,q=C+s;if(!l&&"parentDist"in r){var U=r.parentDist;D=U,w=U,F=U}else f||l?(D=On(u,d,p),w=On(u,S,h),F=On(u,S,g)):(D=la(G,q,d,p),w=la(G,q,S,h),F=la(G,q,S,g),j=!0);if(O=A+D,I=A+w,L=$+F,X(t,"onBeforeRotate",nt(t,r,{beforeRotation:O,rotation:I,absoluteRotation:L,setRotation:function(ct){w=ct-A,D=w,F=w}},!0)),e=P(fa(t,b,p,D,A,j),3),T=e[0],D=e[1],O=e[2],n=P(fa(t,b,h,w,A,j),3),R=n[0],w=n[1],I=n[2],i=P(fa(t,b,g,F,$,j),3),k=i[0],F=i[1],L=i[2],!(!k&&!R&&!T&&!_&&!v)){var W=xn(a,"rotate(".concat(I,"deg)"),"rotate(".concat(w,"deg)"));v&&(a.fixedPosition=Ji(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var H=Qg(t,w,a),Y=tt(ft(c||[0,0],H),a.prevInverseDist||[0,0]);a.prevInverseDist=H,a.requestValue=null;var V=uu(t,W,Y,f,r),Q=V,it=gr([G,q],g.startAbsoluteOrigin)-g.startDist,rt=void 0;if(a.resolveAble==="resizable"){var Z=sa.dragControl(t,M(M({},Ne(r,t.state,[r.deltaX,r.deltaY],!!f,!1,"resizable")),{resolveMatrix:!0,parentDistance:it}));Z&&(rt=Z,Q=nl(Q,Z,r))}var K=nt(t,r,M(M({delta:R,dist:w,rotate:I,rotation:I,beforeDist:D,beforeDelta:T,beforeRotate:O,beforeRotation:O,absoluteDist:F,absoluteDelta:k,absoluteRotate:L,absoluteRotation:L,isPinch:!!f,resize:rt},V),Q));return X(t,"onRotate",K),K}}},dragControlEnd:function(t,r){var e=r.datas;if(e.isRotate){e.isRotate=!1;var n=Ht(t,r,{});return X(t,"onRotateEnd",n),n}},dragGroupControlCondition:ca,dragGroupControlStart:function(t,r){var e=r.datas,n=t.state,i=n.left,a=n.top,o=n.beforeOrigin,s=this.dragControlStart(t,r);if(!s)return!1;s.set(e.beforeDirection*t.rotation);var u=mr(t,this,"dragControlStart",r,function(c,v){var d=c.state,p=d.left,h=d.top,g=d.beforeOrigin,m=ft(tt([p,h],[i,a]),tt(g,o));return v.datas.startGroupClient=m,v.datas.groupClient=m,M(M({},v),{parentRotate:0})}),l=M(M({},s),{targets:t.props.targets,events:u}),f=X(t,"onRotateGroupStart",l);return e.isRotate=f!==!1,e.isRotate?s:!1},dragGroupControl:function(t,r){var e=r.datas;if(e.isRotate){Gn(t,"onBeforeRotate",function(l){X(t,"onBeforeRotateGroup",nt(t,r,M(M({},l),{targets:t.props.targets}),!0))});var n=this.dragControl(t,r);if(n){var i=e.beforeDirection,a=n.beforeDist,o=a/180*Math.PI,s=mr(t,this,"dragControl",r,function(l,f){var c=f.datas.startGroupClient,v=P(f.datas.groupClient,2),d=v[0],p=v[1],h=P(Ae(c,o*i),2),g=h[0],m=h[1],y=[g-d,m-p];return f.datas.groupClient=[g,m],M(M({},f),{parentRotate:a,groupDelta:y})});t.rotation=i*n.beforeRotation;var u=M({targets:t.props.targets,events:s,set:function(l){t.rotation=l},setGroupRotation:function(l){t.rotation=l}},n);return X(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isRotate){this.dragControlEnd(t,r);var i=mr(t,this,"dragControlEnd",r),a=Ht(t,r,{targets:t.props.targets,events:i});return X(t,"onRotateGroupEnd",a),e}},request:function(t){var r={},e=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:r}},request:function(i){return"deltaRotate"in i?e+=i.deltaRotate:"rotate"in i&&(e=i.rotate-n),{datas:r,parentDist:e}},requestEnd:function(){return{datas:r,isDrag:!0}}}}};function z0(t,r){var e,n=t.direction,i=t.classNames,a=t.size,o=t.pos,s=t.zoom,u=t.key,l=n==="horizontal",f=l?"Y":"X";return r.createElement("div",{key:u,className:i.join(" "),style:(e={},e[l?"width":"height"]="".concat(a),e.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(s,")"),e)})}function va(t,r){return z0(M(M({},t),{classNames:N([J("line","guideline",t.direction)],P(t.classNames),!1).filter(function(e){return e}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(e){return"".concat(et(e,.1),"px")})}),r)}function Bu(t,r,e,n,i,a,o,s){var u=t.props.zoom;return e.map(function(l,f){var c=l.type,v=l.pos,d=[0,0];return d[o]=n,d[o?0:1]=-i+v,va({key:"".concat(r,"TargetGuideline").concat(f),classNames:[J("target","bold",c)],posValue:d,sizeValue:a,zoom:u,direction:r},s)})}function zu(t,r,e,n,i,a){var o=t.props,s=o.zoom,u=o.isDisplayInnerSnapDigit,l=r==="horizontal"?Cr:_r,f=i[l.start],c=i[l.end];return e.filter(function(v){var d=v.hide,p=v.elementRect;if(d)return!1;if(u&&p){var h=p.rect;if(h[l.start]<=f&&c<=h[l.end])return!1}return!0}).map(function(v,d){var p=v.pos,h=v.size,g=v.element,m=v.className,y=[-n[0]+p[0],-n[1]+p[1]];return va({key:"".concat(r,"-default-guideline-").concat(d),classNames:g?[J("bold"),m]:[J("normal"),m],direction:r,posValue:y,sizeValue:h,zoom:s},a)})}function Ye(t,r,e,n,i,a,o,s){var u,l=t.props,f=l.snapDigit,c=f===void 0?0:f,v=l.isDisplaySnapDigit,d=v===void 0?!0:v,p=l.snapDistFormat,h=p===void 0?function(C,x){return C}:p,g=l.zoom,m=r==="horizontal"?"X":"Y",y=r==="vertical"?"height":"width",b=Math.abs(i),E=d?parseFloat(b.toFixed(c)):0;return s.createElement("div",{key:"".concat(r,"-").concat(e,"-guideline-").concat(n),className:J("guideline-group",r),style:(u={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},u[y]="".concat(b,"px"),u)},va({direction:r,classNames:[J(e),o],size:"100%",posValue:[0,0],sizeValue:b,zoom:g},s),s.createElement("div",{className:J("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},E>0?h(E,r):""))}function G0(t,r,e,n){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,o=i?Cr:_r,s=e[o.start],u=e[o.end];return il(r,function(l){return l.pos[i]}).map(function(l){var f=[],c=[],v=[];return l.forEach(function(d){var p,h,g=d.element,m=d.elementRect.rect;if(m[o.end]<s)f.push(d);else if(u<m[o.start])c.push(d);else if(m[o.start]<=s&&u<=m[o.end]&&n){var y=d.pos,b={element:g,rect:M(M({},m),(p={},p[o.end]=m[o.start],p))},E={element:g,rect:M(M({},m),(h={},h[o.start]=m[o.end],h))},C=[0,0],x=[0,0];C[i]=y[i],C[a]=y[a],x[i]=y[i],x[a]=y[a]+d.size,f.push({type:t,pos:C,size:0,elementRect:b,direction:"",elementDirection:"end"}),c.push({type:t,pos:x,size:0,elementRect:E,direction:"",elementDirection:"start"})}}),f.sort(function(d,p){return p.pos[a]-d.pos[a]}),c.sort(function(d,p){return d.pos[a]-p.pos[a]}),{total:l,start:f,end:c,inner:v}})}function L0(t,r,e,n,i){var a=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(s){var u=r.filter(function(g){return g.type===s}),l=s==="vertical"?1:0,f=l?0:1,c=G0(s,u,n,a),v=l?_r:Cr,d=l?Cr:_r,p=n[v.start],h=n[v.end];c.forEach(function(g){var m=g.total,y=g.start,b=g.end,E=g.inner,C=e[f]+m[0].pos[f]-n[d.start],x=n;y.forEach(function(S){var _=S.elementRect.rect,T=x[v.start]-_[v.end];if(T>0){var D=[0,0];D[l]=e[l]+x[v.start]-p-T,D[f]=C,o.push(Ye(t,s,"dashed",o.length,T,D,S.className,i))}x=_}),x=n,b.forEach(function(S){var _=S.elementRect.rect,T=_[v.start]-x[v.end];if(T>0){var D=[0,0];D[l]=e[l]+x[v.end]-p,D[f]=C,o.push(Ye(t,s,"dashed",o.length,T,D,S.className,i))}x=_}),E.forEach(function(S){var _=S.elementRect.rect,T=p-_[v.start],D=_[v.end]-h,O=[0,0],R=[0,0];O[l]=e[l]-T,O[f]=C,R[l]=e[l]+h-p,R[f]=C,o.push(Ye(t,s,"dashed",o.length,T,O,S.className,i)),o.push(Ye(t,s,"dashed",o.length,D,R,S.className,i))})})}),o}function F0(t,r,e,n,i){var a=[];return["horizontal","vertical"].forEach(function(o){var s=r.filter(function(g){return g.type===o}).slice(0,1),u=o==="vertical"?0:1,l=u?0:1,f=u?_r:Cr,c=u?Cr:_r,v=n[f.start],d=n[f.end],p=n[c.start],h=n[c.end];s.forEach(function(g){var m=g.gap,y=g.gapRects,b=Math.max.apply(Math,N([p],P(y.map(function(x){var S=x.rect;return S[c.start]})),!1)),E=Math.min.apply(Math,N([h],P(y.map(function(x){var S=x.rect;return S[c.end]})),!1)),C=(b+E)/2;b===E||C===(p+h)/2||y.forEach(function(x){var S=x.rect,_=x.className,T=[e[0],e[1]];if(S[f.end]<v)T[u]+=S[f.end]-v;else if(d<S[f.start])T[u]+=S[f.start]-v-m;else return;T[l]+=C-p,a.push(Ye(t,u?"vertical":"horizontal","gap",a.length,m,T,_,i))})})}),a}function da(t){var r=t.state,e=r.containerClientRect,n=r.hasFixed,i=e.overflow,a=e.scrollHeight,o=e.scrollWidth,s=e.clientHeight,u=e.clientWidth,l=e.clientLeft,f=e.clientTop,c=t.props,v=c.snapGap,d=v===void 0?!0:v,p=c.verticalGuidelines,h=c.horizontalGuidelines,g=c.snapThreshold,m=g===void 0?5:g,y=c.snapGridWidth,b=y===void 0?0:y,E=c.snapGridHeight,C=E===void 0?0:E,x=c.maxSnapElementGuidelineDistance,S=x===void 0?1/0:x,_=c.isDisplayGridGuidelines,T=qt(Kt(t.state)),D=T.top,O=T.left,R=T.bottom,w=T.right,I={top:D,left:O,bottom:R,right:w,center:(O+w)/2,middle:(D+R)/2},k=j0(t),F=N([],P(k),!1);d&&F.push.apply(F,N([],P(N0(t,I,m)),!1));var L=M({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(F.push.apply(F,N([],P($0(b,C,i?o:u,i?a:s,l,f,L,_)),!1)),n){var A=e.left,$=e.top;L.left+=A,L.top+=$,L.right+=A,L.bottom+=$}return F.push.apply(F,N([],P(Fu(h||!1,p||!1,i?o:u,i?a:s,l,f,L)),!1)),F=F.filter(function(j){var G=j.element,q=j.elementRect,U=j.type;if(!G||!q)return!0;var W=q.rect;return Gu(I,W,U,S)}),F}function N0(t,r,e){var n=t.props,i=n.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,o=n.maxSnapElementGapDistance,s=o===void 0?1/0:o,u=t.state.elementRects,l=[];return[["vertical",Cr,_r],["horizontal",_r,Cr]].forEach(function(f){var c=P(f,3),v=c[0],d=c[1],p=c[2],h=r[d.start],g=r[d.end],m=r[d.center],y=r[p.start],b=r[p.end];function E(S){var _=S.rect;return _[d.end]<h+e?h-_[d.end]:g-e<_[d.start]?_[d.start]-g:-1}var C=u.filter(function(S){var _=S.rect;return _[p.start]>b||_[p.end]<y?!1:E(S)>0}).sort(function(S,_){return E(S)-E(_)}),x=[];C.forEach(function(S){C.forEach(function(_){if(S!==_){var T=S.rect,D=_.rect,O=T[p.start],R=T[p.end],w=D[p.start],I=D[p.end];O>I||w>R||x.push([S,_])}})}),x.forEach(function(S){var _=P(S,2),T=_[0],D=_[1],O=T.rect,R=D.rect,w=O[d.start],I=O[d.end],k=R[d.start],F=R[d.end],L=0,A=0,$=!1,j=!1,G=!1;if(I<=h&&g<=k){if(j=!0,L=(k-I-(g-h))/2,A=I+L+(g-h)/2,z(A-m)>e)return}else if(I<k&&F<h+e){if($=!0,L=k-I,A=F+L,z(A-h)>e)return}else if(I<k&&g-e<w){if(G=!0,L=k-I,A=w-L,z(A-g)>e)return}else return;L&&Gu(r,R,v,a)&&(L>s||l.push({type:v,pos:v==="vertical"?[A,0]:[0,A],element:D.element,size:0,className:D.className,isStart:$,isCenter:j,isEnd:G,gap:L,hide:!0,gapRects:[T,D],direction:"",elementDirection:""}))})}),l}function $0(t,r,e,n,i,a,o,s){i===void 0&&(i=0),a===void 0&&(a=0);var u=[],l=o.left,f=o.top;if(r)for(var c=0;c<=n;c+=r)u.push({type:"horizontal",pos:[l,et(c-a+f,.1)],className:J("grid-guideline"),size:e,hide:!s,direction:""});if(t)for(var c=0;c<=e;c+=t)u.push({type:"vertical",pos:[et(c-i+l,.1),f],className:J("grid-guideline"),size:n,hide:!s,direction:""});return u}function Gu(t,r,e,n){return e==="horizontal"?z(t.right-r.left)<=n||z(t.left-r.right)<=n||t.left<=r.right&&r.left<=t.right:e==="vertical"?z(t.bottom-r.top)<=n||z(t.top-r.bottom)<=n||t.top<=r.bottom&&r.top<=t.bottom:!0}function j0(t){var r=t.state,e=t.props.elementGuidelines,n=e===void 0?[]:e;if(!n.length)return r.elementRects=[],[];var i=(r.elementRects||[]).filter(function(v){return!v.refresh}),a=n.map(function(v){return Qt(v)&&"element"in v?M(M({},v),{element:lr(v.element,!0)}):{element:lr(v,!0)}}).filter(function(v){return v.element}),o=Qh(i.map(function(v){return v.element}),a.map(function(v){return v.element})),s=o.maintained,u=o.added,l=[];s.forEach(function(v){var d=P(v,2),p=d[0],h=d[1];l[h]=i[p]}),Y0(t,u.map(function(v){return a[v]})).map(function(v,d){l[u[d]]=v}),r.elementRects=l;var f=ra(t.props.elementSnapDirections),c=[];return l.forEach(function(v){var d=v.element,p=v.top,h=p===void 0?f.top:p,g=v.left,m=g===void 0?f.left:g,y=v.right,b=y===void 0?f.right:y,E=v.bottom,C=E===void 0?f.bottom:E,x=v.center,S=x===void 0?f.center:x,_=v.middle,T=_===void 0?f.middle:_,D=v.className,O=v.rect,R=ea({top:h,right:b,left:m,bottom:C,center:S,middle:T},O),w=R.horizontal,I=R.vertical,k=R.horizontalNames,F=R.verticalNames,L=O.top,A=O.left,$=O.right-A,j=O.bottom-L,G=[$,j];I.forEach(function(q,U){c.push({type:"vertical",element:d,pos:[et(q,.1),L],size:j,sizes:G,className:D,elementRect:v,elementDirection:xu[F[U]]||F[U],direction:""})}),w.forEach(function(q,U){c.push({type:"horizontal",element:d,pos:[A,et(q,.1)],size:$,sizes:G,className:D,elementRect:v,elementDirection:xu[k[U]]||k[U],direction:""})})}),c}function Lu(t,r){return t?t.map(function(e){var n=Qt(e)?e:{pos:e},i=n.pos;return Jr(i)?n:M(M({},n),{pos:dt(i,r)})}):[]}function Fu(t,r,e,n,i,a,o){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var s=[],u=o.left,l=o.top,f=o.bottom,c=o.right,v=e+c-u,d=n+f-l;return Lu(t,d).forEach(function(p){s.push({type:"horizontal",pos:[u,et(p.pos-a+l,.1)],size:v,className:p.className,direction:""})}),Lu(r,v).forEach(function(p){s.push({type:"vertical",pos:[et(p.pos-i+u,.1),l],size:d,className:p.className,direction:""})}),s}function Y0(t,r){if(!r.length)return[];var e=t.props.groupable,n=t.state,i=n.containerClientRect,a=n.rootMatrix,o=n.is3d,s=n.offsetDelta,u=o?4:3,l=P(p0(a,i,u),2),f=l[0],c=l[1],v=e?0:s[0],d=e?0:s[1];return r.map(function(p){var h=p.element.getBoundingClientRect(),g=h.left-f-v,m=h.top-c-d,y=m+h.height,b=g+h.width,E=P(he(a,[g,m],u),2),C=E[0],x=E[1],S=P(he(a,[b,y],u),2),_=S[0],T=S[1];return M(M({},p),{rect:{left:C,right:_,top:x,bottom:T,center:(C+_)/2,middle:(x+T)/2}})})}function In(t){var r=t.state,e=r.container,n=t.props.snapContainer||e;if(r.snapContainer===n&&r.guidelines&&r.guidelines.length)return!1;var i=r.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(e!==n){var o=lr(n,!0);if(o){var s=qe(o),u=sl(r,[s.left-i.left,s.top-i.top]),l=sl(r,[s.right-i.right,s.bottom-i.bottom]);a.left=et(u[0],1e-5),a.top=et(u[1],1e-5),a.right=et(l[0],1e-5),a.bottom=et(l[1],1e-5)}}return r.snapContainer=n,r.snapOffset=a,r.guidelines=da(t),r.enableSnap=!0,!0}function Nu(t,r,e,n,i,a){var o=Hr(t,r,e,a?4:3),s=Ot(o,n);return ya(o,tt(i,s))}function $u(t){return t?t/z(t):0}function W0(t,r,e,n,i,a){var o=a.fixedDirection,s=y0(e,o,n),u=aa(t,r,e,n),l=N(N([],P(R0(t,r,s,n,i,a)),!1),P(Pu(t,u,a)),!1),f=Dn(l,0),c=Dn(l,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:c.isBound,offset:c.offset[1]}}}function X0(t,r,e,n,i,a,o,s,u){var l=Ot(r,o),f=Rn(t,s,{vertical:[l[0]],horizontal:[l[1]]}),c=f.horizontal.offset,v=f.vertical.offset;if(et(v,Vi)||et(c,Vi)){var d=P(ur({datas:u,distX:-v,distY:-c}),2),p=d[0],h=d[1],g=Math.min(i||1/0,e+o[0]*p),m=Math.min(a||1/0,n+o[1]*h);return[g-e,m-n]}return[0,0]}function ju(t,r,e,n,i,a,o,s){for(var u=Kt(t.state),l=t.props.keepRatio,f=0,c=0,v=0;v<2;++v){var d=r(f,c),p=W0(t,d,i,l,o,s),h=p.width,g=p.height,m=h.isBound,y=g.isBound,b=h.offset,E=g.offset;if(v===1&&(m||(b=0),y||(E=0)),v===0&&o&&!m&&!y)return[0,0];if(l){var C=z(b)*(e?1/e:1),x=z(E)*(n?1/n:1),S=m&&y?C<x:y||!m&&C<x;S?b=e*E/n:E=n*b/e}f+=b,c+=E}if(!l&&i[0]&&i[1]){var _=I0(t,u,i,a,s),T=_.maxWidth,D=_.maxHeight,O=P(X0(t,r(f,c).map(function(I){return I.map(function(k){return et(k,Vi)})}),e+f,n+c,T,D,i,o,s),2),b=O[0],E=O[1];f+=b,c+=E}return[f,c]}function We(t){return t<0&&(t=t%360+360),t%=360,t}function H0(t,r){r=We(r);var e=Math.floor(t/360),n=e*360+360-r,i=e*360+r;return z(t-n)<z(t-i)?n:i}function pa(t,r){t=We(t),r=We(r);var e=We(t-r);return Math.min(e,360-e)}function V0(t,r,e,n){var i,a=t.props,o=(i=a[Xu])!==null&&i!==void 0?i:5,s=a[Hu];if(ve(t,"rotatable")){var u=r.pos1,l=r.pos2,f=r.pos3,c=r.pos4,v=r.origin,d=e*Math.PI/180,p=[u,l,f,c].map(function(E){return tt(E,v)}),h=p.map(function(E){return Ae(E,d)}),g=N(N([],P(f0(t,p,h,v,e)),!1),P(_0(t,p,h,v,e)),!1);g.sort(function(E,C){return z(E-e)-z(C-e)});var m=g.length>0;if(m)return{isSnap:m,dist:m?g[0]:e}}if(s!=null&&s.length&&o){var y=s.slice().sort(function(E,C){return pa(E,n)-pa(C,n)}),b=y[0];if(pa(b,n)<=o)return{isSnap:!0,dist:e+H0(n,b)-n}}return{isSnap:!1,dist:e}}function q0(t,r,e,n,i,a,o){if(!ve(t,"resizable"))return[0,0];var s=o.fixedDirection,u=o.nextAllMatrix,l=t.state,f=l.allMatrix,c=l.is3d;return ju(t,function(v,d){return Nu(u||f,r+v,e+d,s,i,c)},r,e,n,i,a,o)}function U0(t,r,e,n,i){if(!ve(t,"scalable"))return[0,0];var a=i.startOffsetWidth,o=i.startOffsetHeight,s=i.fixedPosition,u=i.fixedDirection,l=i.is3d,f=ju(t,function(c,v){return Nu(Ug(i,ft(r,[c/a,v/o])),a,o,u,s,l)},a,o,e,s,n,i);return[f[0]/a,f[1]/o]}function K0(t,r){r.absolutePoses=Kt(t.state)}function Yu(t){var r=[];return t.forEach(function(e){e.guidelineInfos.forEach(function(n){var i=n.guideline;Yt(r,function(a){return a.guideline===i})||(i.direction="",r.push({guideline:i,posInfo:e}))})}),r.map(function(e){var n=e.guideline,i=e.posInfo;return M(M({},n),{direction:i.direction})})}function Wu(t,r,e,n,i,a){var o=ta(Tn(t,a),r,e),s=o.vertical,u=o.horizontal,l=ce();s.forEach(function(p){p.isBound&&(p.direction==="start"&&(l.left=!0),p.direction==="end"&&(l.right=!0),n.push({type:"bounds",pos:p.pos}))}),u.forEach(function(p){p.isBound&&(p.direction==="start"&&(l.top=!0),p.direction==="end"&&(l.bottom=!0),i.push({type:"bounds",pos:p.pos}))});var f=M0(t),c=f.boundMap,v=f.vertical,d=f.horizontal;return v.forEach(function(p){pr(n,function(h){var g=h.type,m=h.pos;return g==="bounds"&&m===p})>=0||n.push({type:"bounds",pos:p})}),d.forEach(function(p){pr(i,function(h){var g=h.type,m=h.pos;return g==="bounds"&&m===p})>=0||i.push({type:"bounds",pos:p})}),{boundMap:l,innerBoundMap:c}}var Z0=Ca("",["resizable","scalable"]),Xu="snapRotationThreshold",Hu="snapRotationDegrees",J0={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold",Xu,Hu,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,r){var e=t.state,n=e.top,i=e.left,a=e.pos1,o=e.pos2,s=e.pos3,u=e.pos4,l=e.snapRenderInfo,f=t.props.snapRenderThreshold,c=f===void 0?1:f;if(!l||!l.render||!ve(t,""))return ge(t,"boundMap",ce(),function(W){return JSON.stringify(W)}),ge(t,"innerBoundMap",ce(),function(W){return JSON.stringify(W)}),[];e.guidelines=da(t);var v=Math.min(a[0],o[0],s[0],u[0]),d=Math.min(a[1],o[1],s[1],u[1]),p=l.externalPoses||[],h=Kt(t.state),g=[],m=[],y=[],b=[],E=[],C=qt(h),x=C.width,S=C.height,_=C.top,T=C.left,D=C.bottom,O=C.right,R={left:T,right:O,top:_,bottom:D,center:(T+O)/2,middle:(_+D)/2},w=p.length>0,I=w?qt(p):{};if(!l.request){if(l.direction&&E.push(m0(t,h,l.direction,c)),l.snap){var k=qt(h);l.center&&(k.middle=(k.top+k.bottom)/2,k.center=(k.left+k.right)/2),E.push(Eu(t,k,c))}w&&(l.center&&(I.middle=(I.top+I.bottom)/2,I.center=(I.left+I.right)/2),E.push(Eu(t,I,c))),E.forEach(function(W){var H=W.vertical.posInfos,Y=W.horizontal.posInfos;g.push.apply(g,N([],P(H.filter(function(V){var Q=V.guidelineInfos;return Q.some(function(it){var rt=it.guideline;return!rt.hide})}).map(function(V){return{type:"snap",pos:V.pos}})),!1)),m.push.apply(m,N([],P(Y.filter(function(V){var Q=V.guidelineInfos;return Q.some(function(it){var rt=it.guideline;return!rt.hide})}).map(function(V){return{type:"snap",pos:V.pos}})),!1)),y.push.apply(y,N([],P(Yu(H)),!1)),b.push.apply(b,N([],P(Yu(Y)),!1))})}var F=Wu(t,[T,O],[_,D],g,m),L=F.boundMap,A=F.innerBoundMap;w&&Wu(t,[I.left,I.right],[I.top,I.bottom],g,m,l.externalBounds);var $=N(N([],P(y),!1),P(b),!1),j=$.filter(function(W){return W.element&&!W.gapRects}),G=$.filter(function(W){return W.gapRects}).sort(function(W,H){return W.gap-H.gap});X(t,"onSnap",{guidelines:$.filter(function(W){var H=W.element;return!H}),elements:j,gaps:G},!0);var q=ge(t,"boundMap",L,function(W){return JSON.stringify(W)},ce()),U=ge(t,"innerBoundMap",A,function(W){return JSON.stringify(W)},ce());return(L===q||A===U)&&X(t,"onBound",{bounds:L,innerBounds:A},!0),N(N(N(N(N(N([],P(L0(t,j,[v,d],R,r)),!1),P(F0(t,G,[v,d],R,r)),!1),P(zu(t,"horizontal",b,[i,n],R,r)),!1),P(zu(t,"vertical",y,[i,n],R,r)),!1),P(Bu(t,"horizontal",m,v,n,x,0,r)),!1),P(Bu(t,"vertical",g,d,i,S,1,r)),!1)},dragStart:function(t,r){t.state.snapRenderInfo={request:r.isRequest,snap:!0,center:!0},In(t)},drag:function(t){var r=t.state;In(t)||(r.guidelines=da(t)),r.snapRenderInfo&&(r.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,r){if(Z0(t,r)||ca(t,r))return!0;if(!r.isRequest&&r.inputEvent)return wt(r.inputEvent.target,J("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,In(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,r){this.dragStart(t,r)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,In(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var r=t.state;r.enableSnap=!1,r.guidelines=[],r.snapRenderInfo=null,r.elementRects=[]}};function Q0(t,r){return[t[0]*r[0],t[1]*r[1]]}function J(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Xp.apply(void 0,N([Hi],P(t),!1))}function Vu(t){t()}function tm(t){return!t||t==="none"?[1,0,0,1,0,0]:Qt(t)?t:Ge(t)}function Xe(t,r,e){return cn(r,$r(e,r),t,$r(e.map(function(n){return-n}),r))}function rm(t,r,e){if(r==="%"){var n=ga(t.ownerSVGElement);return n[e?"width":"height"]/100}return 1}function em(t){var r=nm(ba(t,":before"));return r.map(function(e,n){var i=Te(e),a=i.value,o=i.unit;return a*rm(t,o,n===0)})}function kn(t){return t?t.split(" "):["0","0"]}function nm(t){return kn(t.transformOrigin)}function qu(t){var r=Xt(t),e=r("transform");if(e&&e!=="none")return e;if("transform"in t){var n=t.transform,i=n.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var o=[],s=function(l){var f=i[l].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(c){return f[c]}).join(", "),")"))},u=0;u<a;++u)s(u);return o.join(" ")}return""}function He(t,r,e,n,i){var a,o,s=yi(t)||Er(t),u=!1,l,f;if(!t||e)l=t;else{var c=(a=t==null?void 0:t.assignedSlot)===null||a===void 0?void 0:a.parentElement,v=t.parentElement;c?(u=!0,f=v,l=c):l=v}for(var d=!1,p=t===r||l===r,h="relative",g=1,m=parseFloat(i==null?void 0:i("zoom"))||1,y=i==null?void 0:i("position");l&&l!==s;){r===l&&(p=!0);var b=Xt(l),E=l.tagName.toLowerCase(),C=qu(l),x=b("willChange"),S=parseFloat(b("zoom"))||1;if(h=b("position"),n&&S!==1){g=S;break}if(!e&&n&&m!==1&&y&&y!=="absolute"||E==="svg"||h!=="static"||C&&C!=="none"||x==="transform")break;var _=(o=t==null?void 0:t.assignedSlot)===null||o===void 0?void 0:o.parentNode,T=l.parentNode;_&&(u=!0,f=T);var D=T;if(D&&D.nodeType===11){l=D.host,d=!0,h=Xt(l)("position");break}l=D,h="relative"}return{offsetZoom:g,hasSlot:u,parentSlotElement:f,isCustomElement:d,isStatic:h==="static",isEnd:p||!l||l===s,offsetParent:l||s}}function im(t,r){var e,n=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,o=Xt(t),s=on(i),u=!s,l,f;return!u&&n!=="svg"?(l=Js?em(t):kn(o("transformOrigin")).map(function(c){return parseFloat(c)}),f=l.slice(),u=!0,e=P(sm(t,l,t===r&&r.tagName.toLowerCase()==="g"),4),i=e[0],a=e[1],l[0]=e[2],l[1]=e[3]):(l=kn(o("transformOrigin")).map(function(c){return parseFloat(c)}),f=l.slice()),{tagName:n,isSVG:s,hasOffset:u,offset:[i||0,a||0],origin:l,targetOrigin:f}}function Uu(t,r){var e=Xt(t),n=Xt(Er(t)),i=n("position");if(!r&&(!i||i==="static"))return[0,0];var a=parseInt(n("marginLeft"),10),o=parseInt(n("marginTop"),10);return e("position")==="absolute"&&((e("top")!=="auto"||e("bottom")!=="auto")&&(o=0),(e("left")!=="auto"||e("right")!=="auto")&&(a=0)),[a,o]}function ha(t){t.forEach(function(r){var e=r.matrix;e&&(r.matrix=rr(e,3,4))})}function am(t){for(var r=t.parentElement,e=!1,n=Er(t);r;){var i=ba(r).transform;if(i&&i!=="none"){e=!0;break}if(r===n)break;r=r.parentElement}return{fixedContainer:r||n,hasTransform:e}}function An(t,r){return r===void 0&&(r=t.length>9),"".concat(r?"matrix3d":"matrix","(").concat(Fs(t,!r).join(","),")")}function ga(t){var r=t.clientWidth,e=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:r,clientHeight:e};var n=t.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||r,height:i.height||e,clientWidth:r,clientHeight:e}}function om(t,r){var e,n=ga(t),i=n.width,a=n.height,o=n.clientWidth,s=n.clientHeight,u=o/i,l=s/a,f=t.preserveAspectRatio.baseVal,c=f.align,v=f.meetOrSlice,d=[0,0],p=[u,l],h=[0,0];if(c!==1){var g=(c-2)%3,m=Math.floor((c-2)/3);d[0]=i*g/2,d[1]=a*m/2;var y=v===2?Math.max(l,u):Math.min(u,l);p[0]=y,p[1]=y,h[0]=(o-i)/2*g,h[1]=(s-a)/2*m}var b=Oi(p,r);return e=P(h,2),b[r*(r-1)]=e[0],b[r*(r-1)+1]=e[1],Xe(b,r,d)}function sm(t,r,e){if(!t.getBBox||!e&&t.tagName.toLowerCase()==="g")return[0,0,0,0];var n=Xt(t),i=n("transform-box")==="fill-box",a=t.getBBox(),o=ga(t.ownerSVGElement),s=a.x-o.x,u=a.y-o.y,l=i?r[0]:r[0]-s,f=i?r[1]:r[1]-u;return[s,u,l,f]}function St(t,r,e){return Bt(t,Nr(r,e),e)}function Hr(t,r,e,n){return[[0,0],[r,0],[0,e],[r,e]].map(function(i){return St(t,i,n)})}function qt(t){var r=t.map(function(l){return l[0]}),e=t.map(function(l){return l[1]}),n=Math.min.apply(Math,N([],P(r),!1)),i=Math.min.apply(Math,N([],P(e),!1)),a=Math.max.apply(Math,N([],P(r),!1)),o=Math.max.apply(Math,N([],P(e),!1)),s=a-n,u=o-i;return{left:n,top:i,right:a,bottom:o,width:s,height:u}}function Ku(t,r,e,n){var i=Hr(t,r,e,n);return qt(i)}function um(t,r,e,n,i){var a,o=t.target,s=t.origin,u=r.matrix,l=Ju(o),f=l.offsetWidth,c=l.offsetHeight,v=e.getBoundingClientRect(),d=[0,0];e===Er(e)&&(d=Uu(o,!0));for(var p=o.getBoundingClientRect(),h=p.left-v.left+e.scrollLeft-(e.clientLeft||0)+d[0],g=p.top-v.top+e.scrollTop-(e.clientTop||0)+d[1],m=p.width,y=p.height,b=cn(n,i,u),E=Ku(b,f,c,n),C=E.left,x=E.top,S=E.width,_=E.height,T=St(b,s,n),D=tt(T,[C,x]),O=[h+D[0]*m/S,g+D[1]*y/_],R=[0,0],w=0;++w<10;){var I=sr(i,n);a=P(tt(St(I,O,n),St(I,T,n)),2),R[0]=a[0],R[1]=a[1];var k=cn(n,i,$r(R,n),u),F=Ku(k,f,c,n),L=F.left,A=F.top,$=L-h,j=A-g;if(z($)<2&&z(j)<2)break;O[0]-=$,O[1]-=j}return R.map(function(G){return Math.round(G)})}function lm(t,r,e){var n=t.length===16,i=n?4:3,a=r.map(function(u){return St(t,u,i)}),o=e.left,s=e.top;return a.map(function(u){return[u[0]+o,u[1]+s]})}function Ut(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Zu(t,r){return Ut([r[0]-t[0],r[1]-t[1]])}function Ve(t,r,e,n){e===void 0&&(e=1),n===void 0&&(n=_t(t,r));var i=Zu(t,r);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(e,")"),width:"".concat(i,"px")}}function Bn(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var i=e.length,a=e.reduce(function(s,u){return s+u[0]},0)/i,o=e.reduce(function(s,u){return s+u[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(r,")")}}function Vr(t,r){var e=t[r];return Qt(e)?M(M({},t),e):t}function Ju(t){var r=t&&!on(t.offsetWidth),e=0,n=0,i=0,a=0,o=0,s=0,u=0,l=0,f=0,c=0,v=0,d=0,p=1/0,h=1/0,g=1/0,m=1/0,y=0,b=0,E=!1;if(t)if(!r&&t.tagName.toLowerCase()!=="svg"){var C=t.getBBox();E=!0,e=C.width,n=C.height,o=e,s=n,u=e,l=n,i=e,a=n}else{var x=Xt(t),S=t.style,_=x("boxSizing")==="border-box",T=parseFloat(x("borderLeftWidth"))||0,D=parseFloat(x("borderRightWidth"))||0,O=parseFloat(x("borderTopWidth"))||0,R=parseFloat(x("borderBottomWidth"))||0,w=parseFloat(x("paddingLeft"))||0,I=parseFloat(x("paddingRight"))||0,k=parseFloat(x("paddingTop"))||0,F=parseFloat(x("paddingBottom"))||0,L=w+I,A=k+F,$=T+D,j=O+R,G=L+$,q=A+j,U=x("position"),W=0,H=0;if("clientLeft"in t){var Y=null;if(U==="absolute"){var V=He(t,Er(t));Y=V.offsetParent}else Y=t.parentElement;if(Y){var Q=Xt(Y);W=parseFloat(Q("width")),H=parseFloat(Q("height"))}}f=Math.max(L,dt(x("minWidth"),W)||0),c=Math.max(A,dt(x("minHeight"),H)||0),p=dt(x("maxWidth"),W),h=dt(x("maxHeight"),H),isNaN(p)&&(p=1/0),isNaN(h)&&(h=1/0),y=dt(S.width,0)||0,b=dt(S.height,0)||0,o=parseFloat(x("width"))||0,s=parseFloat(x("height"))||0,u=z(o-y)<1?gi(f,y||o,p):o,l=z(s-b)<1?gi(c,b||s,h):s,e=u,n=l,i=u,a=l,_?(g=p,m=h,v=f,d=c,u=e-G,l=n-q):(g=p+G,m=h+q,v=f+G,d=c+q,e=u+G,n=l+q),i=u+L,a=l+A}return{svg:E,offsetWidth:e,offsetHeight:n,clientWidth:i,clientHeight:a,contentWidth:u,contentHeight:l,inlineCSSWidth:y,inlineCSSHeight:b,cssWidth:o,cssHeight:s,minWidth:f,minHeight:c,maxWidth:p,maxHeight:h,minOffsetWidth:v,minOffsetHeight:d,maxOffsetWidth:g,maxOffsetHeight:m}}function Qu(t,r){return _t(r>0?t[0]:t[1],r>0?t[1]:t[0])}function zn(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function tl(t,r){var e=t===Er(t)||t===yi(t),n={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return e&&(n.clientHeight=Math.max(r.height,n.clientHeight),n.scrollHeight=Math.max(r.height,n.scrollHeight)),n.overflow=Xt(t)("overflow")!=="visible",M(M({},r),n)}function ma(t,r,e,n){var i=t.left,a=t.right,o=t.top,s=t.bottom,u=r.top,l=r.left,f={left:l+i,top:u+o,right:l+a,bottom:u+s,width:a-i,height:s-o};return e&&n?tl(e,f):f}function qe(t,r){var e=0,n=0,i=0,a=0;if(t){var o=t.getBoundingClientRect();e=o.left,n=o.top,i=o.width,a=o.height}var s={left:e,top:n,width:i,height:a,right:e+i,bottom:n+a};return t&&r?tl(t,s):s}function fm(t){var r=t.props,e=r.groupable,n=r.svgOrigin,i=t.getState(),a=i.offsetWidth,o=i.offsetHeight,s=i.svg,u=i.transformOrigin;return!e&&s&&n?Ta(n,a,o):u}function rl(t,r,e,n){var i;if(t)i=t;else if(r)i=[0,0];else{var a=e.target;i=el(a,n)}return i}function el(t,r){if(t){var e=t.getAttribute("data-rotation")||"",n=t.getAttribute("data-direction");if(r.deg=e,!!n){var i=[0,0];return n.indexOf("w")>-1&&(i[0]=-1),n.indexOf("e")>-1&&(i[0]=1),n.indexOf("n")>-1&&(i[1]=-1),n.indexOf("s")>-1&&(i[1]=1),i}}}function ya(t,r){return[ft(r,t[0]),ft(r,t[1]),ft(r,t[2]),ft(r,t[3])]}function Kt(t){var r=t.left,e=t.top,n=t.pos1,i=t.pos2,a=t.pos3,o=t.pos4;return ya([n,i,a,o],[r,e])}function xa(t,r){t[r?"controlAbles":"targetAbles"].forEach(function(e){e.unset&&e.unset(t)})}function de(t,r){var e=r?"controlGesto":"targetGesto",n=t[e];(n==null?void 0:n.isIdle())===!1&&xa(t,r),n==null||n.unset(),t[e]=null}function Ft(t,r){if(r){var e=ue(r);e.nextStyle=M(M({},e.nextStyle),t)}return{style:t,cssText:hr(t).map(function(n){return"".concat(sn(n,"-"),": ").concat(t[n],";")}).join("")}}function nl(t,r,e){var n=r.afterTransform||r.transform;return M(M({},Ft(M(M(M({},t.style),r.style),{transform:n}),e)),{afterTransform:n,transform:t.transform})}function nt(t,r,e,n){var i=r.datas;i.datas||(i.datas={});var a=M(M({},e),{target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:r.isRequest,isRequestChild:r.isRequestChild,isFirstDrag:!!r.isFirstDrag,isTrusted:r.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=r.stop)===null||o===void 0||o.call(r)}});return i.isStartEvent?n||(i.lastEvent=a):i.isStartEvent=!0,a}function Ht(t,r,e){var n=r.datas,i="isDrag"in e?e.isDrag:r.isDrag;return n.datas||(n.datas={}),M(M({isDrag:i},e),{moveable:t,target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:r.isDouble,datas:n.datas,isFirstDrag:!!r.isFirstDrag})}function Gn(t,r,e){t._emitter.on(r,e)}function X(t,r,e,n,i){return t.triggerEvent(r,e,n,i)}function ba(t,r){return Sr(t).getComputedStyle(t,r)}function Ln(t,r,e){var n={},i={};return t.filter(function(a){var o=a.name;if(n[o]||!r.some(function(s){return a[s]}))return!1;if(!e&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return n[o]=!0,!0})}function Ea(t,r){return t===r||t==null&&r==null}function cm(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=t.length-1,n=0;n<e;++n){var i=t[n];if(!on(i))return i}return t[e]}function il(t,r){var e=[],n=[];return t.forEach(function(i,a){var o=r(i,a,t),s=n.indexOf(o),u=e[s]||[];s===-1&&(n.push(o),e.push(u)),u.push(i)}),e}function vm(t,r){var e=[],n={};return t.forEach(function(i,a){var o=r(i,a,t),s=n[o];s||(s=[],n[o]=s,e.push(s)),s.push(i)}),e}function al(t){return t.reduce(function(r,e){return r.concat(e)},[])}function pe(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.sort(function(e,n){return z(n)-z(e)}),t[0]}function he(t,r,e){return Bt(sr(t,e),Nr(r,e),e)}function ol(t,r){var e,n=t.is3d,i=t.rootMatrix,a=n?4:3;return e=P(he(i,[r.distX,r.distY],a),2),r.distX=e[0],r.distY=e[1],r}function Fn(t,r,e,n){if(!e[0]&&!e[1])return r;var i=St(t,[$u(e[0]),0],n),a=St(t,[0,$u(e[1])],n),o=St(t,[e[0]/Ut(i),e[1]/Ut(a)],n);return ft(r,o)}function nr(t,r,e){return e?"".concat(t/r*100,"%"):"".concat(t,"px")}function Nn(t){return z(t)<=Gt?0:t}function Sa(t){return function(r){if(!r.isDragging(t))return"";var e=e0(r,t),n=e.deg;return n?J("view-control-rotation".concat(n)):""}}function Ca(t,r){return r===void 0&&(r=[t]),function(e,n){if(n.isRequest)return r.some(function(a){return n.requestAble===a})?n.parentDirection:!1;var i=n.inputEvent.target;return wt(i,J("direction"))&&(!t||wt(i,J(t)))}}function dm(t,r,e){var n,i=ee(t,{"x%":function(C){return C/100*r.offsetWidth},"y%":function(C){return C/100*r.offsetHeight}}),a=t.slice(0,e<0?void 0:e),o=t.slice(0,e<0?void 0:e+1),s=t[e]||"",u=e<0?[]:t.slice(e),l=e<0?[]:t.slice(e+1),f=i.slice(0,e<0?void 0:e),c=i.slice(0,e<0?void 0:e+1),v=(n=i[e])!==null&&n!==void 0?n:ee([""])[0],d=e<0?[]:i.slice(e),p=e<0?[]:i.slice(e+1),h=v?[v]:[],g=re(f),m=re(c),y=re(d),b=re(p),E=pt(g,y,4);return{transforms:t,beforeFunctionMatrix:g,beforeFunctionMatrix2:m,targetFunctionMatrix:re(h),afterFunctionMatrix:y,afterFunctionMatrix2:b,allFunctionMatrix:E,beforeFunctions:f,beforeFunctions2:c,targetFunction:h[0],afterFunctions:d,afterFunctions2:p,beforeFunctionTexts:a,beforeFunctionTexts2:o,targetFunctionText:s,afterFunctionTexts:u,afterFunctionTexts2:l}}function pm(t){return!t||!Qt(t)||te(t)?!1:Tt(t)||"length"in t}function lr(t,r){return t?te(t)?t:jt(t)?r?document.querySelector(t):t:di(t)?t():vs(t)?t:"current"in t?t.current:t:null}function _a(t,r){if(!t)return[];var e=pm(t)?[].slice.call(t):[t];return e.reduce(function(n,i){return jt(i)&&r?N(N([],P(n),!1),P([].slice.call(document.querySelectorAll(i))),!1):(Tt(i)?n.push(_a(i,r)):n.push(lr(i,r)),n)},[])}function hm(t,r,e){var n=_t(t,r)/Math.PI*180;return n=e>=0?n:180-n,n=n>=0?n:360+n,n}function sl(t,r){var e=t.rootMatrix,n=t.is3d,i=n?4:3,a=sr(e,i);return n||(a=rr(a,3,4)),a[12]=0,a[13]=0,a[14]=0,Kh(a,r)}function ul(t,r,e,n,i){var a=P(t,2),o=a[0],s=a[1],u=0,l=0;if(i&&o&&s){var f=_t([0,0],r),c=_t([0,0],n),v=Ut(r),d=Math.cos(f-c)*v;if(!n[0])l=d,u=l*e;else if(!n[1])u=d,l=u/e;else{var p=n[0]*o,h=n[1]*s,g=Math.atan2(p+r[0],h+r[1]),m=Math.atan2(p,h);g<0&&(g+=Math.PI*2),m<0&&(m+=Math.PI*2);var y=0;z(g-m)<Math.PI/2||z(g-m)>Math.PI/2*3||(m+=Math.PI),y=g-m,y>Math.PI*2?y-=Math.PI*2:y>Math.PI?y=2*Math.PI-y:y<-Math.PI&&(y=-2*Math.PI-y);var b=Ut([p+r[0],h+r[1]])*Math.cos(y);u=b*Math.sin(m)-p,l=b*Math.cos(m)-h,n[0]<0&&(u*=-1),n[1]<0&&(l*=-1)}}else u=n[0]*r[0],l=n[1]*r[1];return[u,l]}function ll(t,r,e,n){var i,a=e.ratio,o=e.startOffsetWidth,s=e.startOffsetHeight,u=0,l=0,f=n.distX,c=n.distY,v=n.pinchScale,d=n.parentDistance,p=n.parentDist,h=n.parentScale,g=e.fixedDirection,m=[0,1].map(function(S){return z(t[S]-g[S])}),y=[0,1].map(function(S){var _=m[S];return _!==0&&(_=2/_),_});if(p)u=p[0],l=p[1],r&&(u?l||(l=u/a):u=l*a);else if(Jr(v))u=(v-1)*o,l=(v-1)*s;else if(h)u=(h[0]-1)*o,l=(h[1]-1)*s;else if(d){var b=o*m[0],E=s*m[1],C=Ut([b,E]);u=d/C*b*y[0],l=d/C*E*y[1]}else{var x=ur({datas:e,distX:f,distY:c});x=y.map(function(S,_){return x[_]*S}),i=P(ul([o,s],x,a,t,r),2),u=i[0],l=i[1]}return{distWidth:u,distHeight:l}}function Ma(t,r){if(r){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var e=P(t.split(" "),2),n=e[0],i=e[1],a=Ma(n||""),o=Ma(i||""),s=M(M({},a),o),u={x:"50%",y:"50%"};return s.x&&(u.x=s.x),s.y&&(u.y=s.y),s.value&&(s.x&&!s.y&&(u.y=s.value),!s.x&&s.y&&(u.x=s.value)),u}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function Ta(t,r,e){var n=Ma(t,!0),i=n.x,a=n.y;return[dt(i,r)||0,dt(a,e)||0]}function gm(t,r,e){var n=t.map(function(a){return tt(a,r)}),i=n.map(function(a){return Ae(a,e)});return{prev:n,next:i,result:i.map(function(a){return ft(a,r)})}}function fl(t,r){return t.length===r.length&&t.every(function(e,n){var i=r[n],a=Tt(e),o=Tt(i);return a&&o?fl(e,i):!a&&!o?e===i:!1})}function ge(t,r,e,n,i){var a=t._store,o=a[r];if(!(r in a))if(i!=null)a[r]=i,o=i;else return a[r]=e,e;return o===e||n(o)===n(e)?o:(a[r]=e,e)}function Zt(t){return t>=0?1:-1}function z(t){return Math.abs(t)}function Pa(t,r){return uh(t).map(function(e){return r(e)})}function cl(t){return Jr(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var mm=ie("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,r){var e=r.datas,n=r.targets,i=r.angle,a=r.originalDatas,o=t.props,s=o.pinchable,u=o.ables;if(!s)return!1;var l="onPinch".concat(n?"Group":"","Start"),f="drag".concat(n?"Group":"","ControlStart"),c=(s===!0?t.controlAbles:u.filter(function(h){return s.indexOf(h.name)>-1})).filter(function(h){return h.canPinch&&h[f]}),v=nt(t,r,{});n&&(v.targets=n);var d=X(t,l,v);e.isPinch=d!==!1,e.ables=c;var p=e.isPinch;return p?(c.forEach(function(h){if(a[h.name]=a[h.name]||{},!!h[f]){var g=M(M({},r),{datas:a[h.name],parentRotate:i,isPinch:!0});h[f](t,g)}}),t.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},p):!1},pinch:function(t,r){var e=r.datas,n=r.scale,i=r.distance,a=r.originalDatas,o=r.inputEvent,s=r.targets,u=r.angle;if(e.isPinch){var l=i*(1-1/n),f=nt(t,r,{});s&&(f.targets=s);var c="onPinch".concat(s?"Group":"");X(t,c,f);var v=e.ables,d="drag".concat(s?"Group":"","Control");return v.forEach(function(p){p[d]&&p[d](t,M(M({},r),{datas:a[p.name],inputEvent:o,resolveMatrix:!0,pinchScale:n,parentDistance:l,parentRotate:u,isPinch:!0}))}),f}},pinchEnd:function(t,r){var e=r.datas,n=r.isPinch,i=r.inputEvent,a=r.targets,o=r.originalDatas;if(e.isPinch){var s="onPinch".concat(a?"Group":"","End"),u=Ht(t,r,{isDrag:n});a&&(u.targets=a),X(t,s,u);var l=e.ables,f="drag".concat(a?"Group":"","ControlEnd");return l.forEach(function(c){c[f]&&c[f](t,M(M({},r),{isDrag:n,datas:o[c.name],inputEvent:i,isPinch:!0}))}),n}},pinchGroupStart:function(t,r){return this.pinchStart(t,M(M({},r),{targets:t.props.targets}))},pinchGroup:function(t,r){return this.pinch(t,M(M({},r),{targets:t.props.targets}))},pinchGroupEnd:function(t,r){return this.pinchEnd(t,M(M({},r),{targets:t.props.targets}))}}),vl=Ca("scalable"),ym={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:pu("scalable"),dragControlCondition:vl,viewClassName:Sa("scalable"),dragControlStart:function(t,r){var e=r.datas,n=r.isPinch,i=r.inputEvent,a=r.parentDirection,o=rl(a,n,i,e),s=t.state,u=s.width,l=s.height,f=s.targetTransform,c=s.target,v=s.pos1,d=s.pos2,p=s.pos4;if(!o||!c)return!1;n||Yr(t,r),e.datas={},e.transform=f,e.prevDist=[1,1],e.direction=o,e.startOffsetWidth=u,e.startOffsetHeight=l,e.startValue=[1,1];var h=!o[0]&&!o[1]||o[0]||!o[1];En(t,r,"scale"),e.isWidth=h;function g(x){e.ratio=x&&isFinite(x)?x:0}e.startPositions=Kt(t.state);function m(x){var S=Ou(e.startPositions,x);e.fixedDirection=S.fixedDirection,e.fixedPosition=S.fixedPosition,e.fixedOffset=S.fixedOffset}e.setFixedDirection=m,g(gr(v,d)/gr(d,p)),m([-o[0],-o[1]]);var y=function(x){e.minScaleSize=x},b=function(x){e.maxScaleSize=x};y([-1/0,-1/0]),b([1/0,1/0]);var E=nt(t,r,M(M({direction:o,set:function(x){e.startValue=x},setRatio:g,setFixedDirection:m,setMinScaleSize:y,setMaxScaleSize:b},bn(t,r)),{dragStart:Lt.dragStart(t,new oe().dragStart([0,0],r))})),C=X(t,"onScaleStart",E);return e.startFixedDirection=e.fixedDirection,C!==!1&&(e.isScale=!0,t.state.snapRenderInfo={request:r.isRequest,direction:o}),e.isScale?E:!1},dragControl:function(t,r){yn(t,r,"scale");var e=r.datas,n=r.parentKeepRatio,i=r.parentFlag,a=r.isPinch,o=r.dragClient,s=r.isRequest,u=r.useSnap,l=r.resolveMatrix,f=e.prevDist,c=e.direction,v=e.startOffsetWidth,d=e.startOffsetHeight,p=e.isScale,h=e.startValue,g=e.isWidth,m=e.ratio;if(!p)return!1;var y=t.props,b=y.throttleScale,E=y.parentMoveable,C=c;!c[0]&&!c[1]&&(C=[1,1]);var x=m&&(n!=null?n:y.keepRatio)||!1,S=t.state,_=[h[0],h[1]];function T(){var rt=ll(C,x,e,r),Z=rt.distWidth,K=rt.distHeight,ct=v?(v+Z)/v:1,at=d?(d+K)/d:1;h[0]||(_[0]=Z/v),h[1]||(_[1]=K/d);var ot=(C[0]||x?ct:1)*_[0],lt=(C[1]||x?at:1)*_[1];return ot===0&&(ot=Zt(f[0])*mn),lt===0&&(lt=Zt(f[1])*mn),[ot,lt]}var D=T();if(!a&&t.props.groupable){var O=S.snapRenderInfo||{},R=O.direction;Tt(R)&&(R[0]||R[1])&&(S.snapRenderInfo={direction:c,request:r.isRequest})}X(t,"onBeforeScale",nt(t,r,{scale:D,setFixedDirection:function(rt){return e.setFixedDirection(rt),D=T(),D},startFixedDirection:e.startFixedDirection,setScale:function(rt){D=rt}},!0));var w=[D[0]/_[0],D[1]/_[1]],I=o,k=[0,0],F=!o&&!i&&a;if(F||l?I=Ji(t,e.targetAllTransform,[0,0],[0,0],e):o||(I=e.fixedPosition),a||(k=U0(t,w,c,!u&&s,e)),x){C[0]&&C[1]&&k[0]&&k[1]&&(Math.abs(k[0]*v)>Math.abs(k[1]*d)?k[1]=0:k[0]=0);var L=!k[0]&&!k[1];if(L&&(g?w[0]=et(w[0]*_[0],b)/_[0]:w[1]=et(w[1]*_[1],b)/_[1]),C[0]&&!C[1]||k[0]&&!k[1]||L&&g){w[0]+=k[0];var A=v*w[0]*_[0]/m;w[1]=A/d/_[1]}else if(!C[0]&&C[1]||!k[0]&&k[1]||L&&!g){w[1]+=k[1];var $=d*w[1]*_[1]*m;w[0]=$/v/_[0]}}else w[0]+=k[0],w[1]+=k[1],k[0]||(w[0]=et(w[0]*_[0],b)/_[0]),k[1]||(w[1]=et(w[1]*_[1],b)/_[1]);w[0]===0&&(w[0]=Zt(f[0])*mn),w[1]===0&&(w[1]=Zt(f[1])*mn),D=Q0(w,[_[0],_[1]]);var j=[v,d],G=[v*D[0],d*D[1]];G=os(G,e.minScaleSize,e.maxScaleSize,x?m:!1),D=Pa(2,function(rt){return j[rt]?G[rt]/j[rt]:G[rt]}),w=Pa(2,function(rt){return D[rt]/_[rt]});var q=Pa(2,function(rt){return f[rt]?w[rt]/f[rt]:w[rt]}),U="scale(".concat(w.join(", "),")"),W="scale(".concat(D.join(", "),")"),H=xn(e,W,U),Y=!h[0]||!h[1],V=Kg(t,Y?W:U,e.fixedDirection,I,e.fixedOffset,e,Y),Q=F?V:tt(V,e.prevInverseDist||[0,0]);if(e.prevDist=w,e.prevInverseDist=V,D[0]===f[0]&&D[1]===f[1]&&Q.every(function(rt){return!rt})&&!E&&!F)return!1;var it=nt(t,r,M({offsetWidth:v,offsetHeight:d,direction:c,scale:D,dist:w,delta:q,isPinch:!!a},uu(t,H,Q,a,r)));return X(t,"onScale",it),it},dragControlEnd:function(t,r){var e=r.datas;if(!e.isScale)return!1;e.isScale=!1;var n=Ht(t,r,{});return X(t,"onScaleEnd",n),n},dragGroupControlCondition:vl,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,r);if(!n)return!1;var i=er(t,"resizable",r);e.moveableScale=t.scale;var a=mr(t,this,"dragControlStart",r,function(l,f){return Mn(t,l,e,f)}),o=function(l){n.setFixedDirection(l),a.forEach(function(f,c){f.setFixedDirection(l),Mn(t,f.moveable,e,i[c])})};e.setFixedDirection=o;var s=M(M({},n),{targets:t.props.targets,events:a,setFixedDirection:o}),u=X(t,"onScaleGroupStart",s);return e.isScale=u!==!1,e.isScale?s:!1},dragGroupControl:function(t,r){var e=r.datas;if(e.isScale){Gn(t,"onBeforeScale",function(f){X(t,"onBeforeScaleGroup",nt(t,r,M(M({},f),{targets:t.props.targets}),!0))});var n=this.dragControl(t,r);if(n){var i=n.dist,a=e.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var o=t.props.keepRatio,s=e.fixedPosition,u=mr(t,this,"dragControl",r,function(f,c){var v=P(Bt(Be(t.rotation/180*Math.PI,3),[c.datas.originalX*i[0],c.datas.originalY*i[1],1],3),2),d=v[0],p=v[1];return M(M({},c),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:ft(s,[d,p])})}),l=M({targets:t.props.targets,events:u},n);return X(t,"onScaleGroup",l),l}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isScale){this.dragControlEnd(t,r);var i=mr(t,this,"dragControlEnd",r),a=Ht(t,r,{targets:t.props.targets,events:i});return X(t,"onScaleGroupEnd",a),e}},request:function(){var t={},r=0,e=0,n=!1;return{isControl:!0,requestStart:function(i){return n=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:n}},request:function(i){return r+=i.deltaWidth,e+=i.deltaHeight,{datas:t,parentDist:[r,e],parentKeepRatio:i.keepRatio,useSnap:n}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:n}}}}};function Pr(t,r){return t.map(function(e,n){return Lr(e,r[n],1,2)})}function dl(t,r,e){var n=_t(t,r),i=_t(t,e),a=i-n;return a>=0?a:a+2*Math.PI}function xm(t,r){var e=dl(t[0],t[1],t[2]),n=dl(r[0],r[1],r[2]),i=Math.PI;return!(e>=i&&n<=i||e<=i&&n>=i)}var bm={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:Sa("warpable"),render:function(t,r){var e=t.props,n=e.resizable,i=e.scalable,a=e.warpable,o=e.zoom;if(n||i||!a)return[];var s=t.state,u=s.pos1,l=s.pos2,f=s.pos3,c=s.pos4,v=Pr(u,l),d=Pr(l,u),p=Pr(u,f),h=Pr(f,u),g=Pr(f,c),m=Pr(c,f),y=Pr(l,c),b=Pr(c,l);return N([r.createElement("div",{className:J("line"),key:"middeLine1",style:Ve(v,g,o)}),r.createElement("div",{className:J("line"),key:"middeLine2",style:Ve(d,m,o)}),r.createElement("div",{className:J("line"),key:"middeLine3",style:Ve(p,y,o)}),r.createElement("div",{className:J("line"),key:"middeLine4",style:Ve(h,b,o)})],P(hu(t,"warpable",r)),!1)},dragControlCondition:function(t,r){if(r.isRequest)return!1;var e=r.inputEvent.target;return wt(e,J("direction"))&&wt(e,J("warpable"))},dragControlStart:function(t,r){var e=r.datas,n=r.inputEvent,i=t.props.target,a=n.target,o=el(a,e);if(!o||!i)return!1;var s=t.state,u=s.transformOrigin,l=s.is3d,f=s.targetTransform,c=s.targetMatrix,v=s.width,d=s.height,p=s.left,h=s.top;e.datas={},e.targetTransform=f,e.warpTargetMatrix=l?c:rr(c,3,4),e.targetInverseMatrix=Gs(sr(e.warpTargetMatrix,4),3,4),e.direction=o,e.left=p,e.top=h,e.poses=[[0,0],[v,0],[0,d],[v,d]].map(function(y){return tt(y,u)}),e.nextPoses=e.poses.map(function(y){var b=P(y,2),E=b[0],C=b[1];return Bt(e.warpTargetMatrix,[E,C,0,1],4)}),e.startValue=xt(4),e.prevMatrix=xt(4),e.absolutePoses=Kt(s),e.posIndexes=su(o),Yr(t,r),En(t,r,"matrix3d"),s.snapRenderInfo={request:r.isRequest,direction:o};var g=nt(t,r,M({set:function(y){e.startValue=y}},bn(t,r))),m=X(t,"onWarpStart",g);return m!==!1&&(e.isWarp=!0),e.isWarp},dragControl:function(t,r){var e=r.datas,n=r.isRequest,i=r.distX,a=r.distY,o=e.targetInverseMatrix,s=e.prevMatrix,u=e.isWarp,l=e.startValue,f=e.poses,c=e.posIndexes,v=e.absolutePoses;if(!u)return!1;if(yn(t,r,"matrix3d"),ve(t,"warpable")){var d=c.map(function(T){return v[T]});d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var p=Rn(t,n,{horizontal:d.map(function(T){return T[1]+a}),vertical:d.map(function(T){return T[0]+i})}),h=p.horizontal,g=p.vertical;a-=h.offset,i-=g.offset}var m=ur({datas:e,distX:i,distY:a},!0),y=e.nextPoses.slice();if(c.forEach(function(T){y[T]=ft(y[T],m)}),!Ng.every(function(T){return xm(T.map(function(D){return f[D]}),T.map(function(D){return y[D]}))}))return!1;var b=Ii(f[0],f[2],f[1],f[3],y[0],y[2],y[1],y[3]);if(!b.length)return!1;var E=pt(o,b,4),C=au(e,E,!0),x=pt(sr(s,4),C,4);e.prevMatrix=C;var S=pt(l,C,4),_=xn(e,"matrix3d(".concat(S.join(", "),")"),"matrix3d(".concat(C.join(", "),")"));return Zi(r,_),X(t,"onWarp",nt(t,r,M({delta:x,matrix:S,dist:C,multiply:pt,transform:_},Ft({transform:_},r)))),!0},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return e.isWarp?(e.isWarp=!1,X(t,"onWarpEnd",Ht(t,r,{})),n):!1}},Em=J("area-pieces"),$n=J("area-piece"),pl=J("avoid"),Sm=J("view-dragging");function Da(t){var r=t.areaElement;if(r){var e=t.state,n=e.width,i=e.height;cs(r,pl),r.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(i,"px")}}function hl(t){return t.createElement("div",{key:"area_pieces",className:Em},t.createElement("div",{className:$n}),t.createElement("div",{className:$n}),t.createElement("div",{className:$n}),t.createElement("div",{className:$n}))}var gl={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,r){var e=t.props,n=e.target,i=e.dragArea,a=e.groupable,o=e.passDragArea,s=t.getState(),u=s.width,l=s.height,f=s.renderPoses,c=o?J("area","pass"):J("area");if(a)return[r.createElement("div",{key:"area",ref:dr(t,"areaElement"),className:c}),hl(r)];if(!n||!i)return[];var v=Ii([0,0],[u,0],[0,l],[u,l],f[0],f[1],f[2],f[3]),d=v.length?An(v,!0):"none";return[r.createElement("div",{key:"area",ref:dr(t,"areaElement"),className:c,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(l,"px"),transformOrigin:"0 0",transform:d}}),hl(r)]},dragStart:function(t,r){var e=r.datas,n=r.clientX,i=r.clientY,a=r.inputEvent;if(!a)return!1;e.isDragArea=!1;var o=t.areaElement,s=t.state,u=s.moveableClientRect,l=s.renderPoses,f=s.rootMatrix,c=s.is3d,v=u.left,d=u.top,p=qt(l),h=p.left,g=p.top,m=p.width,y=p.height,b=c?4:3,E=P(he(f,[n-v,i-d],b),2),C=E[0],x=E[1];C-=h,x-=g;var S=[{left:h,top:g,width:m,height:x-10},{left:h,top:g,width:C-10,height:y},{left:h,top:g+x+10,width:m,height:y-x-10},{left:h+C+10,top:g,width:m-C-10,height:y}],_=[].slice.call(o.nextElementSibling.children);S.forEach(function(T,D){_[D].style.cssText="left: ".concat(T.left,"px;top: ").concat(T.top,"px; width: ").concat(T.width,"px; height: ").concat(T.height,"px;")}),fs(o,pl),s.disableNativeEvent=!0},drag:function(t,r){var e=r.datas,n=r.inputEvent;if(this.enableNativeEvent(t),!n)return!1;e.isDragArea||(e.isDragArea=!0,Da(t))},dragEnd:function(t,r){this.enableNativeEvent(t);var e=r.inputEvent,n=r.datas;if(!e)return!1;n.isDragArea||Da(t)},dragGroupStart:function(t,r){return this.dragStart(t,r)},dragGroup:function(t,r){return this.drag(t,r)},dragGroupEnd:function(t,r){return this.dragEnd(t,r)},unset:function(t){Da(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var r=t.state;r.disableNativeEvent&&is(function(){r.disableNativeEvent=!1})}},Cm=ie("origin",{props:["origin","svgOrigin"],render:function(t,r){var e=t.props,n=e.zoom,i=e.svgOrigin,a=e.groupable,o=t.getState(),s=o.beforeOrigin,u=o.rotation,l=o.svg,f=o.allMatrix,c=o.is3d,v=o.left,d=o.top,p=o.offsetWidth,h=o.offsetHeight,g;if(!a&&l&&i){var m=P(Ta(i,p,h),2),y=m[0],b=m[1],E=c?4:3,C=St(f,[y,b],E);g=Bn(u,n,tt(C,[v,d]))}else g=Bn(u,n,s);return[r.createElement("div",{className:J("control","origin"),style:g,key:"beforeOrigin"})]}});function _m(t){var r=t.scrollContainer;return[r.scrollLeft,r.scrollTop]}var Mm={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,r){var e=t.props,n=e.scrollContainer,i=n===void 0?t.getContainer():n,a=e.scrollOptions,o=new ag,s=lr(i,!0);r.datas.dragScroll=o,t.state.dragScroll=o;var u=r.isControl?"controlGesto":"targetGesto",l=r.targets;o.on("scroll",function(f){var c=f.container,v=f.direction,d=nt(t,r,{scrollContainer:c,direction:v}),p=l?"onScrollGroup":"onScroll";l&&(d.targets=l),X(t,p,d)}).on("move",function(f){var c=f.offsetX,v=f.offsetY,d=f.inputEvent;t[u].scrollBy(c,v,d.inputEvent,!1)}).on("scrollDrag",function(f){var c=f.next;c(t[u].getCurrentEvent())}),o.dragStart(r,M({container:s},a))},checkScroll:function(t,r){var e=r.datas.dragScroll;if(e){var n=t.props,i=n.scrollContainer,a=i===void 0?t.getContainer():i,o=n.scrollThreshold,s=o===void 0?0:o,u=n.scrollThrottleTime,l=u===void 0?0:u,f=n.getScrollPosition,c=f===void 0?_m:f,v=n.scrollOptions;return e.drag(r,M({container:a,threshold:s,throttleTime:l,getScrollPosition:function(d){return c({scrollContainer:d.container,direction:d.direction})}},v)),!0}},drag:function(t,r){return this.checkScroll(t,r)},dragEnd:function(t,r){r.datas.dragScroll.dragEnd(),r.datas.dragScroll=null},dragControlStart:function(t,r){return this.dragStart(t,M(M({},r),{isControl:!0}))},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupStart:function(t,r){return this.dragStart(t,M(M({},r),{targets:t.props.targets}))},dragGroup:function(t,r){return this.drag(t,M(M({},r),{targets:t.props.targets}))},dragGroupEnd:function(t,r){return this.dragEnd(t,M(M({},r),{targets:t.props.targets}))},dragGroupControlStart:function(t,r){return this.dragStart(t,M(M({},r),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,r){return this.drag(t,M(M({},r),{targets:t.props.targets}))},dragGroupControEnd:function(t,r){return this.dragEnd(t,M(M({},r),{targets:t.props.targets}))},unset:function(t){var r,e=t.state;(r=e.dragScroll)===null||r===void 0||r.dragEnd(),e.dragScroll=null}},ml={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","requestStyles"],events:["changeTargets"]},Tm=ie("padding",{props:["padding"],render:function(t,r){var e=t.props;if(e.dragArea)return[];var n=cl(e.padding||{}),i=n.left,a=n.top,o=n.right,s=n.bottom,u=t.getState(),l=u.renderPoses,f=u.pos1,c=u.pos2,v=u.pos3,d=u.pos4,p=[f,c,v,d],h=[];return i>0&&h.push([0,2]),a>0&&h.push([0,1]),o>0&&h.push([1,3]),s>0&&h.push([2,3]),h.map(function(g,m){var y=P(g,2),b=y[0],E=y[1],C=p[b],x=p[E],S=l[b],_=l[E],T=Ii([0,0],[100,0],[0,100],[100,100],C,x,S,_);if(T.length)return r.createElement("div",{key:"padding".concat(m),className:J("padding"),style:{transform:An(T,!0)}})})}}),yl=["nw","ne","se","sw"];function jn(t,r){var e=t[0]+t[1],n=e>r?r/e:1;return t[0]*=n,t[1]=r-t[1]*n,t}var Pm=[1,2,5,6],Dm=[0,3,4,7],qr=[1,-1,-1,1],Ur=[1,1,-1,-1];function wa(t,r,e,n,i,a,o,s){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=e),s===void 0&&(s=n);var u=[],l=!1,f=t.filter(function(v){return!v.virtual}),c=f.map(function(v){var d=v.horizontal,p=v.vertical,h=v.pos;if(p&&!l&&(l=!0,u.push("/")),l){var g=Math.max(0,p===1?h[1]-a:s-h[1]);return u.push(nr(g,n,r)),g}else{var g=Math.max(0,d===1?h[0]-i:o-h[0]);return u.push(nr(g,e,r)),g}});return{radiusPoses:f,styles:u,raws:c}}function xl(t){for(var r=[0,0],e=[0,0],n=t.length,i=0;i<n;++i){var a=t[i];a.sub&&(a.horizontal&&(r[1]===0&&(r[0]=i),r[1]=i-r[0]+1,e[0]=i+1),a.vertical&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1))}return{horizontalRange:r,verticalRange:e}}function bl(t,r,e,n,i,a,o){var s,u,l,f;a===void 0&&(a=[0,0]),o===void 0&&(o=!1);var c=t.indexOf("/"),v=(c>-1?t.slice(0,c):t).length,d=t.slice(0,v),p=t.slice(v+1),h=d.length,g=p.length,m=g>0,y=P(d,4),b=y[0],E=b===void 0?"0px":b,C=y[1],x=C===void 0?E:C,S=y[2],_=S===void 0?E:S,T=y[3],D=T===void 0?x:T,O=P(p,4),R=O[0],w=R===void 0?E:R,I=O[1],k=I===void 0?m?w:x:I,F=O[2],L=F===void 0?m?w:_:F,A=O[3],$=A===void 0?m?k:D:A,j=[E,x,_,D].map(function(Y){return dt(Y,r)}),G=[w,k,L,$].map(function(Y){return dt(Y,e)}),q=j.slice(),U=G.slice();s=P(jn([q[0],q[1]],r),2),q[0]=s[0],q[1]=s[1],u=P(jn([q[3],q[2]],r),2),q[3]=u[0],q[2]=u[1],l=P(jn([U[0],U[3]],e),2),U[0]=l[0],U[3]=l[1],f=P(jn([U[1],U[2]],e),2),U[1]=f[0],U[2]=f[1];var W=o?q:q.slice(0,Math.max(a[0],h)),H=o?U:U.slice(0,Math.max(a[1],g));return N(N([],P(W.map(function(Y,V){var Q=yl[V];return{virtual:V>=h,horizontal:qr[V],vertical:0,pos:[n+Y,i+(Ur[V]===-1?e:0)],sub:!0,raw:j[V],direction:Q}})),!1),P(H.map(function(Y,V){var Q=yl[V];return{virtual:V>=g,horizontal:0,vertical:Ur[V],pos:[n+(qr[V]===-1?r:0),i+Y],sub:!0,raw:G[V],direction:Q}})),!1)}function wm(t,r,e,n,i){i===void 0&&(i=r.length);var a=xl(t.slice(n)),o=a.horizontalRange,s=a.verticalRange,u=e-n,l=0;if(u===0)l=i;else if(u>0&&u<o[1])l=o[1]-u;else if(u>=s[0])l=s[0]+s[1]-u;else return;t.splice(e,l),r.splice(e,l)}function Rm(t,r,e,n,i,a,o,s,u,l,f){l===void 0&&(l=0),f===void 0&&(f=0);var c=xl(t.slice(e)),v=c.horizontalRange,d=c.verticalRange;if(n>-1)for(var p=qr[n]===1?a-l:s-a,h=v[1];h<=n;++h){var g=Ur[h]===1?f:u,m=0;if(n===h?m=a:h===0?m=l+p:qr[h]===-1&&(m=s-(r[e][0]-l)),t.splice(e+h,0,{horizontal:qr[h],vertical:0,pos:[m,g]}),r.splice(e+h,0,[m,g]),h===0)break}else if(i>-1){var y=Ur[i]===1?o-f:u-o;if(v[1]===0&&d[1]===0){var b=[l+y,f];t.push({horizontal:qr[0],vertical:0,pos:b}),r.push(b)}for(var E=d[0],h=d[1];h<=i;++h){var m=qr[h]===1?l:s,g=0;if(i===h?g=o:h===0?g=f+y:Ur[h]===1?g=r[e+E][1]:Ur[h]===-1&&(g=u-(r[e+E][1]-f)),t.push({horizontal:0,vertical:Ur[h],pos:[m,g]}),r.push([m,g]),h===0)break}}}function Om(t,r){r===void 0&&(r=t.map(function(i){return i.raw}));var e=t.map(function(i,a){return i.horizontal?r[a]:null}).filter(function(i){return i!=null}),n=t.map(function(i,a){return i.vertical?r[a]:null}).filter(function(i){return i!=null});return{horizontals:e,verticals:n}}var Im=[[0,-1,"n"],[1,0,"e"]],km=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Ra(t,r,e){var n=t.props.clipRelative,i=t.state,a=i.width,o=i.height,s=r,u=s.type,l=s.poses,f=u==="rect",c=u==="circle";if(u==="polygon")return e.map(function(x){return"".concat(nr(x[0],a,n)," ").concat(nr(x[1],o,n))});if(f||u==="inset"){var v=e[1][1],d=e[3][0],p=e[7][0],h=e[5][1];if(f)return[v,d,h,p].map(function(x){return"".concat(x,"px")});var g=[v,a-d,o-h,p].map(function(x,S){return nr(x,S%2?a:o,n)});if(e.length>8){var m=P(tt(e[4],e[0]),2),y=m[0],b=m[1];g.push.apply(g,N(["round"],P(wa(l.slice(8).map(function(x,S){return M(M({},x),{pos:e[S]})}),n,y,b,p,v,d,h).styles),!1))}return g}else if(c||u==="ellipse"){var E=e[0],C=nr(z(e[1][1]-E[1]),c?Math.sqrt((a*a+o*o)/2):o,n),g=c?[C]:[nr(z(e[2][0]-E[0]),a,n),C];return g.push("at",nr(E[0],a,n),nr(E[1],o,n)),g}}function Yn(t,r,e,n){var i=[n,(n+r)/2,r],a=[t,(t+e)/2,e];return km.map(function(o){var s=P(o,3),u=s[0],l=s[1],f=s[2],c=i[u+1],v=a[l+1];return{vertical:z(l),horizontal:z(u),direction:f,pos:[c,v]}})}function El(t){var r=[1/0,-1/0],e=[1/0,-1/0];return t.forEach(function(n){var i=n.pos;r[0]=Math.min(r[0],i[0]),r[1]=Math.max(r[1],i[0]),e[0]=Math.min(e[0],i[1]),e[1]=Math.max(e[1],i[1])}),[z(r[1]-r[0]),z(e[1]-e[0])]}function Sl(t,r,e,n,i){var a,o,s,u,l,f,c,v,d;if(t){var p=i;if(!p){var h=Xt(t),g=h("clipPath");p=g!=="none"?g:h("clip")}if(!((!p||p==="none"||p==="auto")&&(p=n,!p))){var m=ns(p),y=m.prefix,b=y===void 0?p:y,E=m.value,C=E===void 0?"":E,x=b==="circle",S=" ";if(b==="polygon"){var _=Fr(C||"0% 0%, 100% 0%, 100% 100%, 0% 100%");S=",";var T=_.map(function(kt){var Nt=P(kt.split(" "),2),zt=Nt[0],Dt=Nt[1];return{vertical:1,horizontal:1,pos:[dt(zt,r),dt(Dt,e)]}}),D=jr(T.map(function(kt){return kt.pos}));return{type:b,clipText:p,poses:T,splitter:S,left:D.minX,right:D.maxX,top:D.minY,bottom:D.maxY}}else if(x||b==="ellipse"){var O="",R="",w=0,I=0,_=br(C);if(x){var k="";a=P(_,4),o=a[0],k=o===void 0?"50%":o,s=a[2],O=s===void 0?"50%":s,u=a[3],R=u===void 0?"50%":u,w=dt(k,Math.sqrt((r*r+e*e)/2)),I=w}else{var F="",L="";l=P(_,5),f=l[0],F=f===void 0?"50%":f,c=l[1],L=c===void 0?"50%":c,v=l[3],O=v===void 0?"50%":v,d=l[4],R=d===void 0?"50%":d,w=dt(F,r),I=dt(L,e)}var A=[dt(O,r),dt(R,e)],T=N([{vertical:1,horizontal:1,pos:A,direction:"nesw"}],P(Im.slice(0,x?1:2).map(function(zt){return{vertical:z(zt[1]),horizontal:zt[0],direction:zt[2],sub:!0,pos:[A[0]+zt[0]*w,A[1]+zt[1]*I]}})),!1);return{type:b,clipText:p,radiusX:w,radiusY:I,left:A[0]-w,top:A[1]-I,right:A[0]+w,bottom:A[1]+I,poses:T,splitter:S}}else if(b==="inset"){var _=br(C||"0 0 0 0"),$=_.indexOf("round"),j=($>-1?_.slice(0,$):_).length,G=_.slice(j+1),q=P(_.slice(0,j),4),U=q[0],W=q[1],H=W===void 0?U:W,Y=q[2],V=Y===void 0?U:Y,Q=q[3],it=Q===void 0?H:Q,rt=P([U,V].map(function(zt){return dt(zt,e)}),2),Z=rt[0],K=rt[1],ct=P([it,H].map(function(zt){return dt(zt,r)}),2),at=ct[0],ot=ct[1],lt=r-ot,Et=e-K,ht=bl(G,lt-at,Et-Z,at,Z),T=N(N([],P(Yn(Z,lt,Et,at)),!1),P(ht),!1);return{type:"inset",clipText:p,poses:T,top:Z,left:at,right:lt,bottom:Et,radius:G,splitter:S}}else if(b==="rect"){var _=Fr(C||"0px, ".concat(r,"px, ").concat(e,"px, 0px"));S=",";var st=P(_.map(function(Dr){var wr=Te(Dr).value;return wr}),4),vt=st[0],ot=st[1],K=st[2],at=st[3],T=Yn(vt,ot,K,at);return{type:"rect",clipText:p,poses:T,top:vt,right:ot,bottom:K,left:at,values:_,splitter:S}}}}}function Am(t,r,e,n,i){var a=t[r],o=a.direction,s=a.sub,u=t.map(function(){return[0,0]}),l=o?o.split(""):[];if(n&&r<8){var f=l.filter(function(w){return w==="w"||w==="e"}),c=l.filter(function(w){return w==="n"||w==="s"}),v=f[0],d=c[0];u[r]=e;var p=P(El(t),2),h=p[0],g=p[1],m=h&&g?h/g:0;if(m&&i){var y=(r+4)%8,b=t[y].pos,E=[0,0];o.indexOf("w")>-1?E[0]=-1:o.indexOf("e")>-1&&(E[0]=1),o.indexOf("n")>-1?E[1]=-1:o.indexOf("s")>-1&&(E[1]=1);var C=ul([h,g],e,m,E,!0),x=h+C[0],S=g+C[1],_=b[1],T=b[1],D=b[0],O=b[0];E[0]===-1?D=O-x:E[0]===1?O=D+x:(D=D-x/2,O=O+x/2),E[1]===-1?_=T-S:(E[1]===1||(_=T-S/2),T=_+S);var R=Yn(_,O,T,D);t.forEach(function(w,I){u[I][0]=R[I].pos[0]-w.pos[0],u[I][1]=R[I].pos[1]-w.pos[1]})}else t.forEach(function(w,I){var k=w.direction;k&&(k.indexOf(v)>-1&&(u[I][0]=e[0]),k.indexOf(d)>-1&&(u[I][1]=e[1]))}),v&&(u[1][0]=e[0]/2,u[5][0]=e[0]/2),d&&(u[3][1]=e[1]/2,u[7][1]=e[1]/2)}else o&&!s?l.forEach(function(w){var I=w==="n"||w==="s";t.forEach(function(k,F){var L=k.direction,A=k.horizontal,$=k.vertical;!L||L.indexOf(w)===-1||(u[F]=[I||!A?0:e[0],!I||!$?0:e[1]])})}):u[r]=e;return u}function Bm(t,r){var e=P(iu(t,r),2),n=e[0],i=e[1],a=r.datas,o=a.clipPath,s=a.clipIndex,u=o,l=u.type,f=u.poses,c=u.splitter,v=f.map(function(y){return y.pos});if(l==="polygon")v.splice(s,0,[n,i]);else if(l==="inset"){var d=Pm.indexOf(s),p=Dm.indexOf(s),h=f.length;if(Rm(f,v,8,d,p,n,i,v[4][0],v[4][1],v[0][0],v[0][1]),h===f.length)return}else return;var g=Ra(t,o,v),m="".concat(l,"(").concat(g.join(c),")");X(t,"onClip",nt(t,r,M({clipEventType:"added",clipType:l,poses:v,clipStyles:g,clipStyle:m,distX:0,distY:0},Ft({clipPath:m},r))))}function zm(t,r){var e=r.datas,n=e.clipPath,i=e.clipIndex,a=n,o=a.type,s=a.poses,u=a.splitter,l=s.map(function(d){return d.pos}),f=l.length;if(o==="polygon")s.splice(i,1),l.splice(i,1);else if(o==="inset"){if(i<8||(wm(s,l,i,8,f),f===s.length))return}else return;var c=Ra(t,n,l),v="".concat(o,"(").concat(c.join(u),")");X(t,"onClip",nt(t,r,M({clipEventType:"removed",clipType:o,poses:l,clipStyles:c,clipStyle:v,distX:0,distY:0},Ft({clipPath:v},r))))}var Gm={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,r){var e=t.props,n=e.customClipPath,i=e.defaultClipPath,a=e.clipArea,o=e.zoom,s=e.groupable,u=t.getState(),l=u.target,f=u.width,c=u.height,v=u.allMatrix,d=u.is3d,p=u.left,h=u.top,g=u.pos1,m=u.pos2,y=u.pos3,b=u.pos4,E=u.clipPathState,C=u.snapBoundInfos,x=u.rotation;if(!l||s)return[];var S=Sl(l,f,c,i||"inset",E||n);if(!S)return[];var _=d?4:3,T=S.type,D=S.poses,O=D.map(function(ot){var lt=St(v,ot.pos,_);return[lt[0]-p,lt[1]-h]}),R=[],w=[],I=T==="rect",k=T==="inset",F=T==="polygon";if(I||k||F){var L=k?O.slice(0,8):O;w=L.map(function(ot,lt){var Et=lt===0?L[L.length-1]:L[lt-1],ht=_t(Et,ot),st=Zu(Et,ot);return r.createElement("div",{key:"clipLine".concat(lt),className:J("line","clip-line","snap-control"),"data-clip-index":lt,style:{width:"".concat(st,"px"),transform:"translate(".concat(Et[0],"px, ").concat(Et[1],"px) rotate(").concat(ht,"rad) scaleY(").concat(o,")")}})})}if(R=O.map(function(ot,lt){return r.createElement("div",{key:"clipControl".concat(lt),className:J("control","clip-control","snap-control"),"data-clip-index":lt,style:{transform:"translate(".concat(ot[0],"px, ").concat(ot[1],"px) rotate(").concat(x,"rad) scale(").concat(o,")")}})}),k&&R.push.apply(R,N([],P(O.slice(8).map(function(ot,lt){return r.createElement("div",{key:"clipRadiusControl".concat(lt),className:J("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+lt,style:{transform:"translate(".concat(ot[0],"px, ").concat(ot[1],"px) rotate(").concat(x,"rad) scale(").concat(o,")")}})})),!1)),T==="circle"||T==="ellipse"){var A=S.left,$=S.top,j=S.radiusX,G=S.radiusY,q=P(tt(St(v,[A,$],_),St(v,[0,0],_)),2),U=q[0],W=q[1],H="none";if(!a){for(var Y=Math.max(10,j/5,G/5),V=[],Q=0;Q<=Y;++Q){var it=Math.PI*2/Y*Q;V.push([j+(j-o)*Math.cos(it),G+(G-o)*Math.sin(it)])}V.push([j,-2]),V.push([-2,-2]),V.push([-2,G*2+2]),V.push([j*2+2,G*2+2]),V.push([j*2+2,-2]),V.push([j,-2]),H="polygon(".concat(V.map(function(ot){return"".concat(ot[0],"px ").concat(ot[1],"px")}).join(", "),")")}R.push(r.createElement("div",{key:"clipEllipse",className:J("clip-ellipse","snap-control"),style:{width:"".concat(j*2,"px"),height:"".concat(G*2,"px"),clipPath:H,transform:"translate(".concat(-p+U,"px, ").concat(-h+W,"px) ").concat(An(v))}}))}if(a){var rt=qt(N([g,m,y,b],P(O),!1)),Z=rt.width,K=rt.height,ct=rt.left,at=rt.top;if(F||I||k){var V=k?O.slice(0,8):O;R.push(r.createElement("div",{key:"clipArea",className:J("clip-area","snap-control"),style:{width:"".concat(Z,"px"),height:"".concat(K,"px"),transform:"translate(".concat(ct,"px, ").concat(at,"px)"),clipPath:"polygon(".concat(V.map(function(lt){return"".concat(lt[0]-ct,"px ").concat(lt[1]-at,"px")}).join(", "),")")}}))}}return C&&["vertical","horizontal"].forEach(function(ot){var lt=C[ot],Et=ot==="horizontal";lt.isSnap&&w.push.apply(w,N([],P(lt.snap.posInfos.map(function(ht,st){var vt=ht.pos,kt=tt(St(v,Et?[0,vt]:[vt,0],_),[p,h]),Nt=tt(St(v,Et?[f,vt]:[vt,c],_),[p,h]);return je(r,"",kt,Nt,o,"clip".concat(ot,"snap").concat(st),"guideline")})),!1)),lt.isBound&&w.push.apply(w,N([],P(lt.bounds.map(function(ht,st){var vt=ht.pos,kt=tt(St(v,Et?[0,vt]:[vt,0],_),[p,h]),Nt=tt(St(v,Et?[f,vt]:[vt,c],_),[p,h]);return je(r,"",kt,Nt,o,"clip".concat(ot,"bounds").concat(st),"guideline","bounds","bold")})),!1))}),N(N([],P(R),!1),P(w),!1)},dragControlCondition:function(t,r){return r.inputEvent&&(r.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,r){var e=t.props,n=e.dragWithClip,i=n===void 0?!0:n;return i?!1:this.dragControlStart(t,r)},drag:function(t,r){return this.dragControl(t,M(M({},r),{isDragTarget:!0}))},dragEnd:function(t,r){return this.dragControlEnd(t,r)},dragControlStart:function(t,r){var e=t.state,n=t.props,i=n.defaultClipPath,a=n.customClipPath,o=e.target,s=e.width,u=e.height,l=r.inputEvent?r.inputEvent.target:null,f=l&&l.getAttribute("class")||"",c=r.datas,v=Sl(o,s,u,i||"inset",a);if(!v)return!1;var d=v.clipText,p=v.type,h=v.poses,g=X(t,"onClipStart",nt(t,r,{clipType:p,clipStyle:d,poses:h.map(function(m){return m.pos})}));return g===!1?(c.isClipStart=!1,!1):(c.isControl=f&&f.indexOf("clip-control")>-1,c.isLine=f.indexOf("clip-line")>-1,c.isArea=f.indexOf("clip-area")>-1||f.indexOf("clip-ellipse")>-1,c.clipIndex=l?parseInt(l.getAttribute("data-clip-index"),10):-1,c.clipPath=v,c.isClipStart=!0,e.clipPathState=d,Yr(t,r),!0)},dragControl:function(t,r){var e,n,i,a=r.datas,o=r.originalDatas,s=r.isDragTarget;if(!a.isClipStart)return!1;var u=a,l=u.isControl,f=u.isLine,c=u.isArea,v=u.clipIndex,d=u.clipPath;if(!d)return!1;var p=Vr(t.props,"clippable"),h=p.keepRatio,g=0,m=0,y=o.draggable,b=ur(r);s&&y?(e=P(y.prevBeforeDist,2),g=e[0],m=e[1]):(n=P(b,2),g=n[0],m=n[1]);var E=[g,m],C=t.state,x=C.width,S=C.height,_=!c&&!l&&!f,T=d.type,D=d.poses,O=d.splitter,R=D.map(function(mt){return mt.pos});_&&(g=-g,m=-m);var w=!l||D[v].direction==="nesw",I=T==="inset"||T==="rect",k=D.map(function(){return[0,0]});if(l&&!w){var F=D[v],L=F.horizontal,A=F.vertical,$=[g*z(L),m*z(A)];k=Am(D,v,$,I,h)}else w&&(k=R.map(function(){return[g,m]}));var j=R.map(function(mt,$t){return ft(mt,k[$t])}),G=N([],P(j),!1);C.snapBoundInfos=null;var q=d.type==="circle",U=d.type==="ellipse";if(q||U){var W=qt(j),H=z(W.bottom-W.top),Y=z(U?W.right-W.left:H),V=j[0][1]+H,Q=j[0][0]-Y,it=j[0][0]+Y;q&&(G.push([it,W.bottom]),k.push([1,0])),G.push([W.left,V]),k.push([0,1]),G.push([Q,W.bottom]),k.push([1,0])}var rt=Fu((p.clipHorizontalGuidelines||[]).map(function(mt){return dt("".concat(mt),S)}),(p.clipVerticalGuidelines||[]).map(function(mt){return dt("".concat(mt),x)}),x,S),Z=[],K=[];if(q||U)Z=[G[4][0],G[2][0]],K=[G[1][1],G[3][1]];else if(I){var ct=[G[0],G[2],G[4],G[6]],at=[k[0],k[2],k[4],k[6]];Z=ct.filter(function(mt,$t){return at[$t][0]}).map(function(mt){return mt[0]}),K=ct.filter(function(mt,$t){return at[$t][1]}).map(function(mt){return mt[1]})}else Z=G.filter(function(mt,$t){return k[$t][0]}).map(function(mt){return mt[0]}),K=G.filter(function(mt,$t){return k[$t][1]}).map(function(mt){return mt[1]});var ot=[0,0],lt=wu(rt,p.clipTargetBounds&&{left:0,top:0,right:x,bottom:S},Z,K,5),Et=lt.horizontal,ht=lt.vertical,st=Et.offset,vt=ht.offset;if(Et.isBound&&(ot[1]+=st),ht.isBound&&(ot[0]+=vt),(U||q)&&k[0][0]===0&&k[0][1]===0){var W=qt(j),kt=W.bottom-W.top,Nt=U?W.right-W.left:kt,zt=ht.isBound?z(vt):ht.snapIndex===0?-vt:vt,Dt=Et.isBound?z(st):Et.snapIndex===0?-st:st;Nt-=zt,kt-=Dt,q&&(kt=Cu(ht,Et)>0?kt:Nt,Nt=kt);var It=G[0];G[1][1]=It[1]-kt,G[2][0]=It[0]+Nt,G[3][1]=It[1]+kt,G[4][0]=It[0]-Nt}else if(I&&h&&l){var Dr=P(El(D),2),wr=Dr[0],Nl=Dr[1],$l=wr&&Nl?wr/Nl:0,h1=D[v],Xn=h1.direction||"",La=G[1][1],V=G[5][1],Q=G[7][0],it=G[3][0];z(st)<=z(vt)?st=Zt(st)*z(vt)/$l:vt=Zt(vt)*z(st)*$l,Xn.indexOf("w")>-1?Q-=vt:Xn.indexOf("e")>-1?it-=vt:(Q+=vt/2,it-=vt/2),Xn.indexOf("n")>-1?La-=st:Xn.indexOf("s")>-1?V-=st:(La+=st/2,V-=st/2);var g1=Yn(La,it,V,Q);G.forEach(function(Wl,b1){var $a;$a=P(g1[b1].pos,2),Wl[0]=$a[0],Wl[1]=$a[1]})}else G.forEach(function(mt,$t){var Yl=k[$t];Yl[0]&&(mt[0]-=vt),Yl[1]&&(mt[1]-=st)});var jl=Ra(t,d,j),Fa="".concat(T,"(").concat(jl.join(O),")");if(C.clipPathState=Fa,q||U)Z=[G[4][0],G[2][0]],K=[G[1][1],G[3][1]];else if(I){var ct=[G[0],G[2],G[4],G[6]];Z=ct.map(function($t){return $t[0]}),K=ct.map(function($t){return $t[1]})}else Z=G.map(function(mt){return mt[0]}),K=G.map(function(mt){return mt[1]});if(C.snapBoundInfos=wu(rt,p.clipTargetBounds&&{left:0,top:0,right:x,bottom:S},Z,K,1),y){var m1=C.is3d,y1=C.allMatrix,x1=m1?4:3,Na=ot;s&&(Na=[E[0]+ot[0]-b[0],E[1]+ot[1]-b[1]]),y.deltaOffset=pt(y1,[Na[0],Na[1],0,0],x1)}return X(t,"onClip",nt(t,r,M({clipEventType:"changed",clipType:T,poses:j,clipStyle:Fa,clipStyles:jl,distX:g,distY:m},Ft((i={},i[T==="rect"?"clip":"clipPath"]=Fa,i),r)))),!0},dragControlEnd:function(t,r){this.unset(t);var e=r.isDrag,n=r.datas,i=r.isDouble,a=n.isLine,o=n.isClipStart,s=n.isControl;return o?(X(t,"onClipEnd",Ht(t,r,{})),i&&(s?zm(t,r):a&&Bm(t,r)),i||e):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Lm={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,r){return r.isRequest?r.requestAble==="originDraggable":wt(r.inputEvent.target,J("origin"))},dragControlStart:function(t,r){var e=r.datas;Yr(t,r);var n=nt(t,r,{dragStart:Lt.dragStart(t,new oe().dragStart([0,0],r))}),i=X(t,"onDragOriginStart",n);return e.startOrigin=t.state.transformOrigin,e.startTargetOrigin=t.state.targetOrigin,e.prevOrigin=[0,0],e.isDragOrigin=!0,i===!1?(e.isDragOrigin=!1,!1):n},dragControl:function(t,r){var e=r.datas,n=r.isPinch,i=r.isRequest;if(!e.isDragOrigin)return!1;var a=P(ur(r),2),o=a[0],s=a[1],u=t.state,l=u.width,f=u.height,c=u.offsetMatrix,v=u.targetMatrix,d=u.is3d,p=t.props.originRelative,h=p===void 0?!0:p,g=d?4:3,m=[o,s];if(i){var y=r.distOrigin;(y[0]||y[1])&&(m=y)}var b=ft(e.startOrigin,m),E=ft(e.startTargetOrigin,m),C=tt(m,e.prevOrigin),x=$e(c,v,b,g),S=t.getRect(),_=qt(Hr(x,l,f,g)),T=[S.left-_.left,S.top-_.top];e.prevOrigin=m;var D=[nr(E[0],l,h),nr(E[1],f,h)].join(" "),O=Lt.drag(t,Ne(r,t.state,T,!!n,!1)),R=nt(t,r,M(M({width:l,height:f,origin:b,dist:m,delta:C,transformOrigin:D,drag:O},Ft({transformOrigin:D,transform:O.transform},r)),{afterTransform:O.transform}));return X(t,"onDragOrigin",R),R},dragControlEnd:function(t,r){var e=r.datas;return e.isDragOrigin?(X(t,"onDragOriginEnd",Ht(t,r,{})),!0):!1},dragGroupControlCondition:function(t,r){return this.dragControlCondition(t,r)},dragGroupControlStart:function(t,r){var e=this.dragControlStart(t,r);return!!e},dragGroupControl:function(t,r){var e=this.dragControl(t,r);return e?(t.transformOrigin=e.transformOrigin,!0):!1},request:function(t){var r={},e=t.getRect(),n=0,i=0,a=e.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:r}},request:function(s){return"deltaOrigin"in s?(o[0]+=s.deltaOrigin[0],o[1]+=s.deltaOrigin[1]):"origin"in s?(o[0]=s.origin[0]-a[0],o[1]=s.origin[1]-a[1]):("x"in s?n=s.x-e.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?i=s.y-e.top:"deltaY"in s&&(i+=s.deltaY)),{datas:r,distX:n,distY:i,distOrigin:o}},requestEnd:function(){return{datas:r,isDrag:!0}}}}};function Fm(t,r,e,n){var i=t.filter(function(u){var l=u.virtual,f=u.horizontal;return f&&!l}).length,a=t.filter(function(u){var l=u.virtual,f=u.vertical;return f&&!l}).length,o=-1;if(r===0&&(i===0?o=0:i===1&&(o=1)),r===2&&(i<=2?o=2:i<=3&&(o=3)),r===3&&(a===0?o=4:a<4&&(o=7)),r===1&&(a<=1?o=5:a<=2&&(o=6)),!(o===-1||!t[o].virtual)){var s=t[o];Nm(t,o),o<4?s.pos[0]=e:s.pos[1]=n}}function Nm(t,r){r<4?t.slice(0,r+1).forEach(function(e){e.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,r+1).forEach(function(e){e.virtual=!1}))}function $m(t,r){r<4?t.slice(r,4).forEach(function(e){e.virtual=!0}):t.slice(r).forEach(function(e){e.virtual=!0})}function Cl(t,r,e,n,i){n===void 0&&(n=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=br(t),bl(a,r,e,0,0,n,i)}function _l(t,r,e,n,i){var a=t.state,o=a.width,s=a.height,u=wa(i,t.props.roundRelative,o,s),l=u.raws,f=u.styles,c=u.radiusPoses,v=Om(c,l),d=v.horizontals,p=v.verticals,h=f.join(" ");a.borderRadiusState=h;var g=nt(t,r,M({horizontals:d,verticals:p,borderRadius:h,width:o,height:s,delta:n,dist:e},Ft({borderRadius:h},r)));return X(t,"onRound",g),g}function Ml(t){var r,e,n=t.getState().style,i=n.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],o=t.getTargets()[0];o&&((a==null?void 0:a.props.target)===o?(i=(e=(r=t.moveables[0])===null||r===void 0?void 0:r.state.style.borderRadius)!==null&&e!==void 0?e:"",n.borderRadius=i):(i=ba(o).borderRadius,n.borderRadius=i))}return i}var jm={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var r=t.props.roundClickable;return r===!0||r==="line"?J("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,r){var e=t.getState(),n=e.target,i=e.width,a=e.height,o=e.allMatrix,s=e.is3d,u=e.left,l=e.top,f=e.borderRadiusState,c=t.props,v=c.minRoundControls,d=v===void 0?[0,0]:v,p=c.maxRoundControls,h=p===void 0?[4,4]:p,g=c.zoom,m=c.roundPadding,y=m===void 0?0:m,b=c.isDisplayShadowRoundControls,E=c.groupable;if(!n)return null;var C=f||Ml(t),x=s?4:3,S=Cl(C,i,a,d,!0);if(!S)return null;var _=0,T=0,D=E?[0,0]:[u,l];return S.map(function(O,R){var w=O.horizontal,I=O.vertical,k=O.direction||"",F=N([],P(O.pos),!1);T+=Math.abs(w),_+=Math.abs(I),w&&k.indexOf("n")>-1&&(F[1]-=y),I&&k.indexOf("w")>-1&&(F[0]-=y),w&&k.indexOf("s")>-1&&(F[1]+=y),I&&k.indexOf("e")>-1&&(F[0]+=y);var L=tt(St(o,F,x),D),A=b&&b!=="horizontal",$=O.vertical?_<=h[1]&&(A||!O.virtual):T<=h[0]&&(b||!O.virtual);return r.createElement("div",{key:"borderRadiusControl".concat(R),className:J("control","border-radius",O.vertical?"vertical":"",O.virtual?"virtual":""),"data-radius-index":R,style:{display:$?"block":"none",transform:"translate(".concat(L[0],"px, ").concat(L[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(t,r){if(!r.inputEvent||r.isRequest)return!1;var e=r.inputEvent.target.getAttribute("class")||"";return e.indexOf("border-radius")>-1||e.indexOf("moveable-line")>-1&&e.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,r){return this.dragControlCondition(t,r)},dragControlStart:function(t,r){var e=r.inputEvent,n=r.datas,i=e.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,s=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,u=o?parseInt(i.getAttribute("data-radius-index"),10):-1,l=-1;if(s){var f=i.getAttribute("data-line-key")||"";f&&(l=parseInt(f.replace(/render-line-/g,""),10),isNaN(l)&&(l=-1))}if(!o&&!s)return!1;var c=nt(t,r,{}),v=X(t,"onRoundStart",c);if(v===!1)return!1;n.lineIndex=l,n.controlIndex=u,n.isControl=o,n.isLine=s,Yr(t,r);var d=t.props,p=d.roundRelative,h=d.minRoundControls,g=h===void 0?[0,0]:h,m=t.state,y=m.width,b=m.height;n.isRound=!0,n.prevDist=[0,0];var E=Ml(t),C=Cl(E||"",y,b,g,!0)||[];return n.controlPoses=C,m.borderRadiusState=wa(C,p,y,b).styles.join(" "),c},dragControl:function(t,r){var e=r.datas,n=e.controlPoses;if(!e.isRound||!e.isControl||!n.length)return!1;var i=e.controlIndex,a=P(ur(r),2),o=a[0],s=a[1],u=[o,s],l=tt(u,e.prevDist),f=t.props.maxRoundControls,c=f===void 0?[4,4]:f,v=t.state,d=v.width,p=v.height,h=n[i],g=h.vertical,m=h.horizontal,y=n.map(function(E){var C=E.horizontal,x=E.vertical,S=[C*m*u[0],x*g*u[1]];if(C){if(c[0]===1)return S;if(c[0]<4&&C!==m)return S}else{if(c[1]===0)return S[1]=x*m*u[0]/d*p,S;if(g){if(c[1]===1)return S;if(c[1]<4&&x!==g)return S}}return[0,0]});y[i]=u;var b=n.map(function(E,C){return M(M({},E),{pos:ft(E.pos,y[C])})});return i<4?b.slice(0,i+1).forEach(function(E){E.virtual=!1}):b.slice(4,i+1).forEach(function(E){E.virtual=!1}),e.prevDist=[o,s],_l(t,r,u,l,b)},dragControlEnd:function(t,r){var e=t.state;e.borderRadiusState="";var n=r.datas,i=r.isDouble;if(!n.isRound)return!1;var a=n.isControl,o=n.controlIndex,s=n.isLine,u=n.lineIndex,l=n.controlPoses,f=l.filter(function(m){var y=m.virtual;return y}).length,c=t.props.roundClickable,v=c===void 0?!0:c;if(i&&v){if(a&&(v===!0||v==="control"))$m(l,o);else if(s&&(v===!0||v==="line")){var d=P(iu(t,r),2),p=d[0],h=d[1];Fm(l,u,p,h)}f!==l.filter(function(m){var y=m.virtual;return y}).length&&_l(t,r,[0,0],[0,0],l)}var g=Ht(t,r,{});return X(t,"onRoundEnd",g),e.borderRadiusState="",g},dragGroupControlStart:function(t,r){var e=this.dragControlStart(t,r);if(!e)return!1;var n=t.moveables,i=t.props.targets,a=er(t,"roundable",r),o=M({targets:t.props.targets,events:a.map(function(s,u){return M(M({},s),{target:i[u],moveable:n[u],currentTarget:n[u]})})},e);return X(t,"onRoundGroupStart",o),e},dragGroupControl:function(t,r){var e=this.dragControl(t,r);if(!e)return!1;var n=t.moveables,i=t.props.targets,a=er(t,"roundable",r),o=M({targets:t.props.targets,events:a.map(function(s,u){return M(M(M({},s),{target:i[u],moveable:n[u],currentTarget:n[u]}),Ft({borderRadius:e.borderRadius},s))})},e);return X(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,r){var e=t.moveables,n=t.props.targets,i=er(t,"roundable",r);Gn(t,"onRound",function(s){var u=M({targets:t.props.targets,events:i.map(function(l,f){return M(M(M({},l),{target:n[f],moveable:e[f],currentTarget:e[f]}),Ft({borderRadius:s.borderRadius},l))})},s);X(t,"onRoundGroup",u)});var a=this.dragControlEnd(t,r);if(!a)return!1;var o=M({targets:t.props.targets,events:i.map(function(s,u){var l;return M(M({},s),{target:n[u],moveable:e[u],currentTarget:e[u],lastEvent:(l=s.datas)===null||l===void 0?void 0:l.lastEvent})})},a);return X(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function Ym(t,r){var e=r?4:3,n=xt(e),i="matrix".concat(r?"3d":"","(").concat(n.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var Tl={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,r){var e=t.state,n=e.is3d,i=e.targetMatrix,a=e.inlineTransform,o=n?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(Fs(i,!0),")"),s=!a||a==="none"?o:a;r.datas.startTransforms=Ym(s,n)?[]:br(s)},resetStyle:function(t){var r=t.datas;r.nextStyle={},r.nextTransforms=t.datas.startTransforms,r.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,r){return nt(t,r,{setTransform:function(e){r.datas.startTransforms=Tt(e)?e:br(e)},isPinch:!!r.isPinch})},fillDragParams:function(t,r){return nt(t,r,{isPinch:!!r.isPinch})},dragStart:function(t,r){this.setTransform(t,r),this.resetStyle(r),X(t,"onBeforeRenderStart",this.fillDragStartParams(t,r))},drag:function(t,r){r.datas.startTransforms||this.setTransform(t,r),this.resetStyle(r),X(t,"onBeforeRender",nt(t,r,{isPinch:!!r.isPinch}))},dragEnd:function(t,r){r.datas.startTransforms||(this.setTransform(t,r),this.resetStyle(r)),X(t,"onBeforeRenderEnd",nt(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag}))},dragGroupStart:function(t,r){var e=this;this.dragStart(t,r);var n=er(t,"beforeRenderable",r),i=t.moveables,a=n.map(function(o,s){var u=i[s];return e.setTransform(u,o),e.resetStyle(o),e.fillDragStartParams(u,o)});X(t,"onBeforeRenderGroupStart",nt(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,r){var e=this;this.drag(t,r);var n=er(t,"beforeRenderable",r),i=t.moveables,a=n.map(function(o,s){var u=i[s];return e.resetStyle(o),e.fillDragParams(u,o)});X(t,"onBeforeRenderGroup",nt(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,r){this.dragEnd(t,r),X(t,"onBeforeRenderGroupEnd",nt(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets}))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)}},Pl={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,r){X(t,"onRenderStart",nt(t,r,{isPinch:!!r.isPinch}))},drag:function(t,r){X(t,"onRender",this.fillDragParams(t,r))},dragAfter:function(t,r){return this.drag(t,r)},dragEnd:function(t,r){X(t,"onRenderEnd",this.fillDragEndParams(t,r))},dragGroupStart:function(t,r){X(t,"onRenderGroupStart",nt(t,r,{isPinch:!!r.isPinch,targets:t.props.targets}))},dragGroup:function(t,r){var e=this,n=er(t,"beforeRenderable",r),i=t.moveables,a=n.map(function(o,s){var u=i[s];return e.fillDragParams(u,o)});X(t,"onRenderGroup",nt(t,r,M(M({isPinch:!!r.isPinch,targets:t.props.targets,transform:Cn(r),transformObject:{}},Ft(_n(r))),{events:a})))},dragGroupEnd:function(t,r){var e=this,n=er(t,"beforeRenderable",r),i=t.moveables,a=n.map(function(o,s){var u=i[s];return e.fillDragEndParams(u,o)});X(t,"onRenderGroupEnd",nt(t,r,M({isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:Cn(r)},Ft(_n(r)))))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlAfter:function(t,r){return this.dragAfter(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)},fillDragParams:function(t,r){var e={};return ee(Sn(r)||[]).forEach(function(n){e[n.name]=n.functionValue}),nt(t,r,M({isPinch:!!r.isPinch,transformObject:e,transform:Cn(r)},Ft(_n(r))))},fillDragEndParams:function(t,r){var e={};return ee(Sn(r)||[]).forEach(function(n){e[n.name]=n.functionValue}),nt(t,r,M({isPinch:!!r.isPinch,isDrag:r.isDrag,transformObject:e,transform:Cn(r)},Ft(_n(r))))}};function Ue(t,r,e,n,i,a,o){a.clientDistX=a.distX,a.clientDistY=a.distY;var s=i==="Start",u=i==="End",l=i==="After",f=t.state.target,c=a.isRequest,v=n.indexOf("Control")>-1;if(!f||s&&v&&!c&&t.areaElement===a.inputEvent.target)return!1;var d=N([],P(r),!1);if(c){var p=a.requestAble;d.some(function(R){return R.name===p})||d.push.apply(d,N([],P(t.props.ables.filter(function(R){return R.name===p})),!1))}if(!d.length||d.every(function(R){return R.dragRelation}))return!1;var h=a.inputEvent,g;u&&h&&(g=document.elementFromPoint(a.clientX,a.clientY)||h.target);var m=!1,y=function(){var R;m=!0,(R=a.stop)===null||R===void 0||R.call(a)},b=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());b&&t.updateRect(i,!0,!1);var E=a.datas,C=v?"controlGesto":"targetGesto",x=t[C],S=function(R,w,I){if(!(w in R)||x!==t[C])return!1;var k=R.name,F=E[k]||(E[k]={});if(s&&(F.isEventStart=!I||!R[I]||R[I](t,a)),!F.isEventStart)return!1;var L=R[w](t,M(M({},a),{stop:y,datas:F,originalDatas:E,inputTarget:g}));return t._emitter.off(),s&&L===!1&&(F.isEventStart=!1),L};b&&d.forEach(function(R){R.unset&&R.unset(t)}),S(Tl,"drag".concat(n).concat(i));var _=0,T=0;e.forEach(function(R){if(m)return!1;var w="".concat(R).concat(n).concat(i),I="".concat(R).concat(n,"Condition");i===""&&!c&&ol(t.state,a);var k=d.filter(function(A){return A[w]});k=k.filter(function(A,$){return A.name&&k.indexOf(A)===$});var F=k.filter(function(A){return S(A,w,I)}),L=F.length;m&&++_,L&&++T,!m&&s&&k.length&&!L&&(_+=k.filter(function(A){var $=A.name,j=E[$];return j.isEventStart?A.dragRelation!=="strong":!1}).length?1:0)}),(!l||T)&&S(Pl,"drag".concat(n).concat(i));var D=x!==t[C]||_===e.length;if((u||m||D)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(R){R.state.gestos={}}),d.forEach(function(R){R.unset&&R.unset(t)})),s&&!D&&!c&&T&&t.props.preventDefault&&(a==null||a.preventDefault()),t.isUnmounted||D)return!1;if(!s&&T&&!o||u){var O=t.props.flushSync||Vu;O(function(){t.updateRect(u?i:"",!0,!1),t.forceUpdate()})}return!s&&!u&&!l&&T&&!o&&Ue(t,r,e,n,i+"After",a),!0}function Oa(t){return function(r){var e,n=r.inputEvent.target,i=t.areaElement,a=t._dragTarget;return!a||!((e=t.controlGesto)===null||e===void 0)&&e.isFlag()?!1:n===a||a.contains(n)||n===i||!t.isMoveableElement(n)&&!t.controlBox.contains(n)||wt(n,"moveable-area")||wt(n,"moveable-padding")||wt(n,"moveable-edgeDraggable")}}function Dl(t,r,e){var n=t.controlBox,i=[],a=t.props,o=a.dragArea,s=t.state.target,u=a.dragTarget;return i.push(n),(!o||u)&&i.push(r),!o&&u&&s&&r!==s&&a.dragTargetSelf&&i.push(s),Ia(t,i,"targetAbles",e,{dragStart:Oa(t),pinchStart:Oa(t)})}function Ia(t,r,e,n,i){i===void 0&&(i={});var a=e==="targetAbles",o=t.props,s=o.pinchOutside,u=o.pinchThreshold,l=o.preventClickEventOnDrag,f=o.preventClickDefault,c=o.checkInput,v=o.dragFocusedInput,d=o.preventDefault,p=d===void 0?!0:d,h=o.dragContainer,g=lr(h,!0),m={preventDefault:p,preventRightClick:!0,preventWheelClick:!0,container:g||Sr(t.getControlBoxElement()),pinchThreshold:u,pinchOutside:s,preventClickEventOnDrag:a?l:!1,preventClickEventOnDragStart:a?f:!1,preventClickEventByCondition:a?null:function(E){return t.controlBox.contains(E.target)},checkInput:a?c:!1,dragFocusedInput:v},y=new mg(r,m),b=n==="Control";return["drag","pinch"].forEach(function(E){["Start","","End"].forEach(function(C){y.on("".concat(E).concat(C),function(x){var S,_=x.eventType,T=E==="drag"&&x.isPinch;if(i[_]&&!i[_](x)){x.stop();return}if(!T){var D=E==="drag"?[E]:["drag",E],O=N([],P(t[e]),!1),R=Ue(t,O,D,n,C,x);R?(t.props.stopPropagation||C==="Start"&&b)&&((S=x==null?void 0:x.inputEvent)===null||S===void 0||S.stopPropagation()):x.stop()}})})}),y}var Wm=function(){function t(r,e,n){var i=this;this.target=r,this.moveable=e,this.eventName=n,this.ables=[],this._onEvent=function(a){var o=i.eventName,s=i.moveable;s.state.disableNativeEvent||i.ables.forEach(function(u){u[o](s,{inputEvent:a})})},r.addEventListener(n.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(r){this.ables=r},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function Xm(t,r,e,n){var i;e===void 0&&(e=r);var a=fu(t,r),o=a.matrixes,s=a.is3d,u=a.targetMatrix,l=a.transformOrigin,f=a.targetOrigin,c=a.offsetContainer,v=a.hasFixed,d=a.zoom,p=o0(c,e),h=p.matrixes,g=p.is3d,m=p.offsetContainer,y=p.zoom,b=n||g||s,E=b?4:3,C=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,x=u,S=xt(E),_=xt(E),T=xt(E),D=xt(E),O=o.length,R=h.map(function($){return M(M({},$),{matrix:$.matrix?N([],P($.matrix),!1):void 0})}).reverse();o.reverse(),!s&&b&&(x=rr(x,3,4),ha(o)),!g&&b&&ha(R),R.forEach(function($){_=pt(_,$.matrix,E)});var w=e||Er(t),I=((i=R[0])===null||i===void 0?void 0:i.target)||He(w,w,!0).offsetParent,k=R.slice(1).reduce(function($,j){return pt($,j.matrix,E)},xt(E));o.forEach(function($,j){if(O-2===j&&(T=S.slice()),O-1===j&&(D=S.slice()),!$.matrix){var G=o[j+1],q=um($,G,I,E,pt(k,S,E));$.matrix=$r(q,E)}S=pt(S,$.matrix,E)});var F=!C&&s;x||(x=xt(F?4:3));var L=An(C&&x.length===16?rr(x,4,3):x,F),A=_;return _=Gs(_,E,E),{hasZoom:d!==1||y!==1,hasFixed:v,matrixes:o,rootMatrix:_,originalRootMatrix:A,beforeMatrix:T,offsetMatrix:D,allMatrix:S,targetMatrix:x,targetTransform:L,inlineTransform:t.style.transform,transformOrigin:l,targetOrigin:f,is3d:b,offsetContainer:c,offsetRootContainer:m}}function Hm(t,r,e,n){e===void 0&&(e=r);var i=0,a=0,o=0,s={},u=Ju(t);if(t&&(i=u.offsetWidth,a=u.offsetHeight),t){var l=Xm(t,r,e,n),f=se(l.allMatrix,l.transformOrigin,i,a);s=M(M({},l),f);var c=se(l.allMatrix,[50,50],100,100);o=Qu([c.pos1,c.pos2],c.direction)}var v=n?4:3;return M(M(M({hasZoom:!1,width:i,height:a,rotation:o},u),{originalRootMatrix:xt(v),rootMatrix:xt(v),beforeMatrix:xt(v),offsetMatrix:xt(v),allMatrix:xt(v),targetMatrix:xt(v),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),s)}function ka(t,r,e,n,i,a){a===void 0&&(a=[]);var o=1,s=[0,0],u=zn(),l=zn(),f=zn(),c=zn(),v=[0,0],d={},p=Hm(r,e,i,!0);if(r){var h=Xt(r);a.forEach(function(R){d[R]=h(R)});var g=p.is3d?4:3,m=se(p.offsetMatrix,ft(p.transformOrigin,Ls(p.targetMatrix,g)),p.width,p.height);o=m.direction,s=ft(m.origin,[m.left-p.left,m.top-p.top]),c=qe(p.offsetRootContainer);var y=He(n,n,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var b=se(pt(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),E=se(p.originalRootMatrix,kn(Xt(y)("transformOrigin")).map(function(R){return parseFloat(R)}),y.offsetWidth,y.offsetHeight);if(u=ma(b,c),f=ma(E,c,y,!0),t){var C=b.left,x=b.top;l=ma({left:C,top:x,bottom:x,right:x},c)}}else{u=qe(r),f=a0(y),t&&(l=qe(t));var S=f.left,_=f.top,T=f.clientLeft,D=f.clientTop,O=[u.left-S,u.top-_];v=tt(he(p.rootMatrix,O,4),[T+p.left,D+p.top])}}return M({targetClientRect:u,containerClientRect:f,moveableClientRect:l,rootContainerClientRect:c,beforeDirection:o,beforeOrigin:s,originalBeforeOrigin:s,target:r,style:d,offsetDelta:v},p)}function wl(t){var r=t.pos1,e=t.pos2,n=t.pos3,i=t.pos4;if(!r||!e||!n||!i)return null;var a=jr([r,e,n,i]),o=[a.minX,a.minY],s=tt(t.origin,o);return r=tt(r,o),e=tt(e,o),n=tt(n,o),i=tt(i,o),M(M({},t),{left:t.left,top:t.top,posDelta:o,pos1:r,pos2:e,pos3:n,pos4:i,origin:s,beforeOrigin:s,isPersisted:!0})}var me=function(t){Fe(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.state=M({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},ka(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isMoveableMounted=!1,e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new dn,e._prevOriginalDragTarget=null,e._originalDragTarget=null,e._prevDragTarget=null,e._dragTarget=null,e._prevPropTarget=null,e._propTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._hasFirstTarget=!1,e._reiszeObserver=null,e._observerId=0,e._mutationObserver=null,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e._store={},e.checkUpdateRect=function(){if(!e.isDragging()){var n=e.props.parentMoveable;if(n){n.checkUpdateRect();return}ih(e._observerId),e._observerId=is(function(){e.isDragging()||e.updateRect()})}},e._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},e}return r.prototype.render=function(){var e=this.props,n=this.getState(),i=e.parentPosition,a=e.className,o=e.target,s=e.zoom,u=e.cspNonce,l=e.translateZ,f=e.cssStyled,c=e.groupable,v=e.linePadding,d=e.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=P(i||[0,0],2),h=p[0],g=p[1],m=n.left,y=n.top,b=n.target,E=n.direction,C=n.hasFixed,x=n.offsetDelta,S=e.targets,_=this.isDragging(),T={};this.getEnabledAbles().forEach(function(k){T["data-able-".concat(k.name.toLowerCase())]=!0});var D=this._getAbleClassName(),O=S&&S.length&&(b||c)||o||!this._hasFirstTarget&&this.state.isPersisted,R=this.controlBox||this.props.firstRenderState||this.props.persistData,w=[m-h,y-g];!c&&e.useAccuratePosition&&(w[0]+=x[0],w[1]+=x[1]);var I={position:C?"fixed":"absolute",display:O?"block":"none",visibility:R?"visible":"hidden",transform:"translate3d(".concat(w[0],"px, ").concat(w[1],"px, ").concat(l,")"),"--zoom":s,"--zoompx":"".concat(s,"px")};return v&&(I["--moveable-line-padding"]=v),d&&(I["--moveable-control-padding"]=d),tr(f,M({cspNonce:u,ref:dr(this,"controlBox"),className:"".concat(J("control-box",E===-1?"reverse":"",_?"dragging":"")," ").concat(D," ").concat(a)},T,{onClick:this._onPreventClick,style:I}),this.renderAbles(),this._renderLines())},r.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var e=this.props,n=e.parentMoveable,i=e.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!n&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},r.prototype.componentDidUpdate=function(e){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(e)},r.prototype.componentWillUnmount=function(){var e,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(e=this._reiszeObserver)===null||e===void 0||e.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),de(this,!1),de(this,!0);var a=this.events;for(var o in a){var s=a[o];s&&s.destroy()}},r.prototype.getTargets=function(){var e=this.props.target;return e?[e]:[]},r.prototype.getAble=function(e){var n=this.props.ables||[];return Yt(n,function(i){return i.name===e})},r.prototype.getContainer=function(){var e=this.props,n=e.parentMoveable,i=e.wrapperMoveable,a=e.container;return a||i&&i.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},r.prototype.getControlBoxElement=function(){return this.controlBox},r.prototype.getDragElement=function(){return this._dragTarget},r.prototype.isMoveableElement=function(e){var n;return e&&(((n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"class"))||"").indexOf(Hi)>-1},r.prototype.dragStart=function(e){var n=this.targetGesto,i=this.controlGesto;return n&&Oa(this)({inputEvent:e})?n.isFlag()||n.triggerDragStart(e):i&&this.isMoveableElement(e.target)&&(i.isFlag()||i.triggerDragStart(e)),this},r.prototype.hitTest=function(e){var n=this.state,i=n.target,a=n.pos1,o=n.pos2,s=n.pos3,u=n.pos4,l=n.targetClientRect;if(!i)return 0;var f;if(te(e)){var c=e.getBoundingClientRect();f={left:c.left,top:c.top,width:c.width,height:c.height}}else f=M({width:0,height:0},e);var v=f.left,d=f.top,p=f.width,h=f.height,g=Xs([a,o,u,s],l),m=cg(g,[[v,d],[v+p,d],[v+p,d+h],[v,d+h]]),y=Ws(g);return!m||!y?0:Math.min(100,m/y*100)},r.prototype.isInside=function(e,n){var i=this.state,a=i.target,o=i.pos1,s=i.pos2,u=i.pos3,l=i.pos4,f=i.targetClientRect;return a?zi([e,n],Xs([o,s,l,u],f)):!1},r.prototype.updateRect=function(e,n,i){i===void 0&&(i=!0);var a=this.props,o=!a.parentPosition&&!a.wrapperMoveable;o&&fe(!0);var s=a.parentMoveable,u=this.state,l=u.target||a.target,f=this.getContainer(),c=s?s._rootContainer:this._rootContainer,v=ka(this.controlBox,l,f,f,c||f,this._getRequestStyles());if(!l&&this._hasFirstTarget&&a.persistData){var d=wl(a.persistData);for(var p in d)v[p]=d[p]}o&&fe(),this.updateState(v,s?!1:i)},r.prototype.isDragging=function(e){var n,i,a=this.targetGesto,o=this.controlGesto;if(a!=null&&a.isFlag()){if(!e)return!0;var s=a.getEventData();return!!(!((n=s[e])===null||n===void 0)&&n.isEventStart)}if(o!=null&&o.isFlag()){if(!e)return!0;var s=o.getEventData();return!!(!((i=s[e])===null||i===void 0)&&i.isEventStart)}return!1},r.prototype.updateTarget=function(e){this.updateRect(e,!0)},r.prototype.getRect=function(){var e=this.state,n=Kt(this.state),i=P(n,4),a=i[0],o=i[1],s=i[2],u=i[3],l=qt(n),f=e.width,c=e.height,v=l.width,d=l.height,p=l.left,h=l.top,g=[e.left,e.top],m=ft(g,e.origin),y=ft(g,e.beforeOrigin),b=e.transformOrigin;return{width:v,height:d,left:p,top:h,pos1:a,pos2:o,pos3:s,pos4:u,offsetWidth:f,offsetHeight:c,beforeOrigin:y,origin:m,transformOrigin:b,rotation:this.getRotation()}},r.prototype.getManager=function(){return this},r.prototype.stopDrag=function(e){if(!e||e==="target"){var n=this.targetGesto;(n==null?void 0:n.isIdle())===!1&&xa(this,!1),n==null||n.stop()}if(!e||e==="control"){var n=this.controlGesto;(n==null?void 0:n.isIdle())===!1&&xa(this,!0),n==null||n.stop()}},r.prototype.getRotation=function(){var e=this.state,n=e.pos1,i=e.pos2,a=e.direction;return hm(n,i,a)},r.prototype.request=function(e,n,i){n===void 0&&(n={});var a=this,o=a.props,s=o.parentMoveable||o.wrapperMoveable||a,u=s.props.ables,l=o.groupable,f=Yt(u,function(m){return m.name===e});if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var c=f.request(a),v=i||n.isInstant,d=c.isControl?"controlAbles":"targetAbles",p="".concat(l?"Group":"").concat(c.isControl?"Control":""),h=N([],P(s[d]),!1),g={request:function(m){return Ue(a,h,["drag"],p,"",M(M({},c.request(m)),{requestAble:e,isRequest:!0}),v),g},requestEnd:function(){return Ue(a,h,["drag"],p,"End",M(M({},c.requestEnd()),{requestAble:e,isRequest:!0}),v),g}};return Ue(a,h,["drag"],p,"Start",M(M({},c.requestStart(n)),{requestAble:e,isRequest:!0}),v),v?g.request(n).requestEnd():g},r.prototype.getMoveables=function(){return[this]},r.prototype.destroy=function(){this.componentWillUnmount()},r.prototype.updateRenderPoses=function(){var e=this.getState(),n=this.props,i=n.padding,a=e.originalBeforeOrigin,o=e.transformOrigin,s=e.allMatrix,u=e.is3d,l=e.pos1,f=e.pos2,c=e.pos3,v=e.pos4,d=e.left,p=e.top,h=e.isPersisted;if(!i){e.renderPoses=[l,f,c,v];return}var g=cl(i),m=g.left,y=g.top,b=g.bottom,E=g.right,C=u?4:3,x=[];h?x=o:this.controlBox&&n.groupable?x=a:x=ft(a,[d,p]);var S=cn(C,$r(x.map(function(_){return-_}),C),s,$r(o,C));e.renderPoses=[Fn(S,l,[-m,-y],C),Fn(S,f,[E,-y],C),Fn(S,c,[-m,b],C),Fn(S,v,[E,b],C)]},r.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var e=this.props,n=e.target,i=e.container,a=e.parentMoveable,o=this.state,s=o.target,u=o.container;if(!(!s&&!n)){this.updateAbles();var l=!Ea(s,n),f=l||!Ea(u,i);if(f){var c=i||this.controlBox;c&&this.unsetAbles(),this.updateState({target:n,container:i}),!a&&c&&this.updateRect("End",!1,!1),this._isPropTargetChanged=l}}},r.prototype.waitToChangeTarget=function(){return new Promise(function(){})},r.prototype.triggerEvent=function(e,n){var i=this.props;if(this._emitter.trigger(e,n),i.parentMoveable&&n.isRequest&&!n.isRequestChild)return i.parentMoveable.triggerEvent(e,n,!0);var a=i[e];return a&&a(n)},r.prototype.useCSS=function(e,n){var i=this.props.customStyledMap,a=e+n;return i[a]||(i[a]=Ks(e,n)),i[a]},r.prototype.getState=function(){var e,n=this.props;(n.target||!((e=n.targets)===null||e===void 0)&&e.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=n.persistData,o=n.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&a){var s=wl(a);if(s)return this.updateState(s,!1),this.state}return this.state.isPersisted=!1,this.state},r.prototype.updateSelectors=function(){},r.prototype.unsetAbles=function(){var e=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(e)})},r.prototype.updateAbles=function(e,n){e===void 0&&(e=this.props.ables),n===void 0&&(n="");var i=this.props,a=i.triggerAblesSimultaneously,o=this.getEnabledAbles(e),s="drag".concat(n,"Start"),u="pinch".concat(n,"Start"),l="drag".concat(n,"ControlStart"),f=Ln(o,[s,u],a),c=Ln(o,[l],a);this.enabledAbles=o,this.targetAbles=f,this.controlAbles=c},r.prototype.updateState=function(e,n){if(n){if(this.isUnmounted)return;this.setState(e)}else{var i=this.state;for(var a in e)i[a]=e[a]}},r.prototype.getEnabledAbles=function(e){e===void 0&&(e=this.props.ables);var n=this.props;return e.filter(function(i){return i&&(i.always&&n[i.name]!==!1||n[i.name])})},r.prototype.renderAbles=function(){var e=this,n=this.props,i=n.triggerAblesSimultaneously,a={createElement:tr};return this.renderState={},vm(al(Ln(this.getEnabledAbles(),["render"],i).map(function(o){var s=o.render;return s(e,a)||[]})).filter(function(o){return o}),function(o){var s=o.key;return s}).map(function(o){return o[0]})},r.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},r.prototype._getRequestStyles=function(){var e=this.getEnabledAbles().reduce(function(n,i){var a,o,s=(o=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return N(N([],P(n),!1),P(s),!1)},N([],P(this.props.requestStyles||[]),!1));return e},r.prototype._updateObserver=function(e){this._updateResizeObserver(e),this._updateMutationObserver(e)},r.prototype._updateEvents=function(){var e=this.controlBox,n=this.targetAbles.length,i=this.controlAbles.length,a=this._dragTarget,o=!n&&this.targetGesto||this._isTargetChanged(!0);o&&(de(this,!1),this.updateState({gestos:{}})),i||de(this,!0),a&&n&&!this.targetGesto&&(this.targetGesto=Dl(this,a,"")),!this.controlGesto&&i&&(this.controlGesto=Ia(this,e,"controlAbles","Control"))},r.prototype._updateTargets=function(){var e=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=e.dragArea,this._propTarget=e.target,this._originalDragTarget=e.dragTarget||e.target,this._dragTarget=lr(this._originalDragTarget,!0)},r.prototype._renderLines=function(){var e=this.props,n=e,i=n.zoom,a=n.hideDefaultLines,o=n.hideChildMoveableDefaultLines,s=n.parentMoveable;if(a||s&&o)return[];var u=this.getState().renderPoses,l={createElement:tr};return[[0,1],[1,3],[3,2],[2,0]].map(function(f,c){var v=P(f,2),d=v[0],p=v[1];return je(l,"",u[d],u[p],i,"render-line-".concat(c))})},r.prototype._isTargetChanged=function(e){var n=this.props,i=n.dragTarget||n.target,a=this._prevOriginalDragTarget,o=this._prevDragArea,s=n.dragArea,u=!s&&a!==i,l=(e||s)&&o!==s;return u||l||this._prevPropTarget!=this._propTarget},r.prototype._updateNativeEvents=function(){var e=this,n=this.props,i=n.dragArea?this.areaElement:this.state.target,a=this.events,o=hr(a);if(this._isTargetChanged())for(var s in a){var u=a[s];u&&u.destroy(),a[s]=null}if(i){var l=this.enabledAbles;o.forEach(function(f){var c=Ln(l,[f]),v=c.length>0,d=a[f];if(!v){d&&(d.destroy(),a[f]=null);return}d||(d=new Wm(i,e,f),a[f]=d),d.setAbles(c)})}},r.prototype._checkUpdateRootContainer=function(){var e=this.props.rootContainer;!this._rootContainer&&e&&(this._rootContainer=lr(e,!0))},r.prototype._checkUpdateViewContainer=function(){var e=this.props.viewContainer;!this._viewContainer&&e&&(this._viewContainer=lr(e,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(N(N([],P(this._getAbleViewClassNames()),!1),[this.isDragging()?Sm:""],!1))},r.prototype._changeAbleViewClassNames=function(e){var n=this._viewContainer,i=il(e.filter(Boolean),function(l){return l}).map(function(l){var f=P(l,1),c=f[0];return c}),a=this._viewClassNames,o=De(a,i),s=o.removed,u=o.added;s.forEach(function(l){cs(n,a[l])}),u.forEach(function(l){fs(n,i[l])}),this._viewClassNames=i},r.prototype._getAbleViewClassNames=function(){var e=this;return(this.getEnabledAbles().map(function(n){var i;return((i=n.viewClassName)===null||i===void 0?void 0:i.call(n,e))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},r.prototype._getAbleClassName=function(e){var n=this;e===void 0&&(e="");var i=this.getEnabledAbles(),a=this.targetGesto,o=this.controlGesto,s=a!=null&&a.isFlag()?a.getEventData():{},u=o!=null&&o.isFlag()?o.getEventData():{};return i.map(function(l){var f,c,v,d=l.name,p=((f=l.className)===null||f===void 0?void 0:f.call(l,n))||"";return(!((c=s[d])===null||c===void 0)&&c.isEventStart||!((v=u[d])===null||v===void 0)&&v.isEventStart)&&(p+=" ".concat(J("".concat(d).concat(e,"-dragging")))),p.trim()}).filter(Boolean).join(" ")},r.prototype._updateResizeObserver=function(e){var n,i=this.props,a=i.target,o=Sr(this.getControlBoxElement());if(!o.ResizeObserver||!a||!i.useResizeObserver){(n=this._reiszeObserver)===null||n===void 0||n.disconnect();return}if(!(e.target===a&&this._reiszeObserver)){var s=new o.ResizeObserver(this.checkUpdateRect);s.observe(a,{box:"border-box"}),this._reiszeObserver=s}},r.prototype._updateMutationObserver=function(e){var n=this,i,a=this.props,o=a.target,s=Sr(this.getControlBoxElement());if(!s.MutationObserver||!o||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(e.target===o&&this._mutationObserver)){var u=new s.MutationObserver(function(l){var f,c;try{for(var v=Dg(l),d=v.next();!d.done;d=v.next()){var p=d.value;p.type==="attributes"&&p.attributeName==="style"&&n.checkUpdateRect()}}catch(h){f={error:h}}finally{try{d&&!d.done&&(c=v.return)&&c.call(v)}finally{if(f)throw f.error}}});u.observe(o,{attributes:!0}),this._mutationObserver=u}},r.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Vu,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},r}(Ss),Aa={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,r){var e,n=t.props,i=n.targets||[],a=t.getState(),o=a.left,s=a.top,u=a.isPersisted,l=n.zoom||1,f=t.renderGroupRects,c=((e=n.persistData)===null||e===void 0?void 0:e.children)||[];u?i=c.map(function(){return null}):c=[];var v=ge(t,"parentPosition",[o,s],function(p){return p.join(",")}),d=ge(t,"requestStyles",t.getRequestChildStyles(),function(p){return p.join(",")});return t.moveables=t.moveables.slice(0,i.length),N(N([],P(i.map(function(p,h){return r.createElement(me,{key:"moveable"+h,ref:Qo(t,"moveables",h),target:p,origin:!1,requestStyles:d,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[o,s],persistData:c[h],zoom:l})})),!1),P(al(f.map(function(p,h){var g=p.pos1,m=p.pos2,y=p.pos3,b=p.pos4,E=[g,m,y,b];return[[0,1],[1,3],[3,2],[2,0]].map(function(C,x){var S=P(C,2),_=S[0],T=S[1];return je(r,"",tt(E[_],v),tt(E[T],v),l,"group-rect-".concat(h,"-").concat(x))})}))),!1)}},Vm=ie("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,r){r.datas.inputTarget=r.inputEvent&&r.inputEvent.target},dragEnd:function(t,r){var e=t.props.target,n=r.inputEvent,i=r.inputTarget,a=t.isMoveableElement(i),o=!a&&t.controlBox.contains(i);if(!(!n||!i||r.isDrag||t.isMoveableElement(i)||o)){var s=e.contains(i);X(t,"onClick",nt(t,r,{isDouble:r.isDouble,inputTarget:i,isTarget:e===i,moveableTarget:t.props.target,containsTarget:s}))}},dragGroupEnd:function(t,r){var e=r.inputEvent,n=r.inputTarget;if(!(!e||!n||r.isDrag||t.isMoveableElement(n)||r.datas.inputTarget===n)){var i=t.props.targets,a=i.indexOf(n),o=a>-1,s=!1;a===-1&&(a=pr(i,function(u){return u.contains(n)}),s=a>-1),X(t,"onClickGroup",nt(t,r,{isDouble:r.isDouble,targets:i,inputTarget:n,targetIndex:a,isTarget:o,containsTarget:s,moveableTarget:i[a]}))}},dragControlEnd:function(t,r){this.dragEnd(t,r)},dragGroupControlEnd:function(t,r){this.dragEnd(t,r)}});function ye(t){var r=t.originalDatas.draggable;return r||(t.originalDatas.draggable={},r=t.originalDatas.draggable),M(M({},t),{datas:r})}var qm=ie("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,r){var e=t.props,n=e.edgeDraggable;return n?du(r,"edgeDraggable",n,t.getState().renderPoses,e.zoom):[]},dragCondition:function(t,r){var e,n=t.props,i=(e=r.inputEvent)===null||e===void 0?void 0:e.target;return!n.edgeDraggable||!i?!1:!n.draggable&&wt(i,J("direction"))&&wt(i,J("edge"))&&wt(i,J("edgeDraggable"))},dragStart:function(t,r){return Lt.dragStart(t,ye(r))},drag:function(t,r){return Lt.drag(t,ye(r))},dragEnd:function(t,r){return Lt.dragEnd(t,ye(r))},dragGroupCondition:function(t,r){var e,n=t.props,i=(e=r.inputEvent)===null||e===void 0?void 0:e.target;return!n.edgeDraggable||!i?!1:!n.draggable&&wt(i,J("direction"))&&wt(i,J("line"))},dragGroupStart:function(t,r){return Lt.dragGroupStart(t,ye(r))},dragGroup:function(t,r){return Lt.dragGroup(t,ye(r))},dragGroupEnd:function(t,r){return Lt.dragGroupEnd(t,ye(r))},unset:function(t){return Lt.unset(t)}}),Rl={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},Ba=[Tl,ml,J0,mm,Lt,qm,sa,ym,bm,B0,Mm,Tm,Cm,Lm,Gm,jm,Aa,Rl,Vm,gl,Pl],Um=Ba.reduce(function(t,r){return(r.events||[]).forEach(function(e){ls(t,e)}),t},[]),Km=Ba.reduce(function(t,r){return(r.props||[]).forEach(function(e){ls(t,e)}),t},[]);function Ol(t,r){var e=P(t,3),n=e[0],i=e[1],a=e[2];return(n*r[0]+i*r[1]+a)/Math.sqrt(n*n+i*i)}function Wn(t,r){var e=P(t,2),n=e[0],i=e[1];return-n*r[0]-i*r[1]}function Il(t,r){return Math.max.apply(Math,N([],P(t.map(function(e){var n=P(e,4),i=n[0],a=n[1],o=n[2],s=n[3];return Math.max(i[r],a[r],o[r],s[r])})),!1))}function kl(t,r){return Math.min.apply(Math,N([],P(t.map(function(e){var n=P(e,4),i=n[0],a=n[1],o=n[2],s=n[3];return Math.min(i[r],a[r],o[r],s[r])})),!1))}function Zm(t,r){var e,n,i,a=[0,0],o=[0,0],s=[0,0],u=[0,0],l=0,f=0;if(!t.length)return{pos1:a,pos2:o,pos3:s,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:l,height:f,rotation:r};var c=et(r,Gt);if(c%90){var v=c/180*Math.PI,d=Math.tan(v),p=-1/d,h=[qi,ru],g=[[0,0],[0,0]],m=[qi,ru],y=[[0,0],[0,0]];t.forEach(function(U){U.forEach(function(W){var H=Ol([-d,1,0],W),Y=Ol([-p,1,0],W);h[0]>H&&(g[0]=W,h[0]=H),h[1]<H&&(g[1]=W,h[1]=H),m[0]>Y&&(y[0]=W,m[0]=Y),m[1]<Y&&(y[1]=W,m[1]=Y)})});var b=P(g,2),E=b[0],C=b[1],x=P(y,2),S=x[0],_=x[1],T=[-d,1,Wn([-d,1],E)],D=[-d,1,Wn([-d,1],C)],O=[-p,1,Wn([-p,1],S)],R=[-p,1,Wn([-p,1],_)];e=P([[T,O],[T,R],[D,O],[D,R]].map(function(U){var W=P(U,2),H=W[0],Y=W[1];return Gi(H,Y)[0]}),4),a=e[0],o=e[1],s=e[2],u=e[3],l=m[1]-m[0],f=h[1]-h[0]}else{var w=kl(t,0),I=kl(t,1),k=Il(t,0),F=Il(t,1);if(a=[w,I],o=[k,I],s=[w,F],u=[k,F],l=k-w,f=F-I,c%180){var L=[s,a,u,o];n=P(L,4),a=n[0],o=n[1],s=n[2],u=n[3],l=F-I,f=k-w}}if(c%360>180){var L=[u,s,o,a];i=P(L,4),a=i[0],o=i[1],s=i[2],u=i[3]}var A=jr([a,o,s,u]),$=A.minX,j=A.minY,G=A.maxX,q=A.maxY;return{pos1:a,pos2:o,pos3:s,pos4:u,width:l,height:f,minX:$,minY:j,maxX:G,maxY:q,rotation:r}}function Al(t,r){var e=r.map(function(n){if(Tt(n)){var i=Al(t,n),a=i.length;return a>1?i:a===1?i[0]:null}else{var o=Yt(t,function(s){var u=s.manager;return u.props.target===n});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return e.length===1&&Tt(e[0])?e[0]:e}var Jm=function(t){Fe(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.differ=new js,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e._targetGroups=[],e._hasFirstTargets=!1,e}return r.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},r.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},r.prototype.getTargets=function(){return this.props.targets},r.prototype.updateRect=function(e,n,i){var a;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;fe(!0),this.moveables.forEach(function(Q){Q.updateRect(e,!1,!1)});var s=this.props,u=this.moveables,l=o.target||s.target,f=u.map(function(Q){return{finded:!1,manager:Q}}),c=this.props.targetGroups||[],v=Al(f,c),d=s.useDefaultGroupRotate;v.push.apply(v,N([],P(f.filter(function(Q){var it=Q.finded;return!it}).map(function(Q){var it=Q.manager;return it})),!1));var p=[],h=!n||e!==""&&s.updateGroup,g=s.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(a=s.persistData)===null||a===void 0?void 0:a.rotation;m!=null&&(g=m)}function y(Q,it,rt){var Z=Q.map(function(ht){if(Tt(ht)){var st=y(ht,it),vt=[st.pos1,st.pos2,st.pos3,st.pos4];return p.push(st),{poses:vt,rotation:st.rotation}}else return{poses:Kt(ht.state),rotation:ht.getRotation()}}),K=Z.map(function(ht){var st=ht.rotation;return st}),ct=0,at=K[0],ot=K.every(function(ht){return Math.abs(at-ht)<.1});h?ct=!d&&ot?at:g:ct=!d&&!rt&&ot?at:it;var lt=Z.map(function(ht){var st=ht.poses;return st}),Et=Zm(lt,ct);return Et}var b=y(v,this.rotation,!0);h&&(this.rotation=b.rotation,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=c,this.renderGroupRects=p;var E=this.transformOrigin,C=this.rotation,x=this.scale,S=b.width,_=b.height,T=b.minX,D=b.minY,O=gm([[0,0],[S,0],[0,_],[S,_]],Ta(E,S,_),this.rotation/180*Math.PI),R=jr(O.result),w=R.minX,I=R.minY,k=" rotate(".concat(C,"deg)")+" scale(".concat(Zt(x[0]),", ").concat(Zt(x[1]),")"),F="translate(".concat(-w,"px, ").concat(-I,"px)").concat(k);this.controlBox.style.transform="translate3d(".concat(T,"px, ").concat(D,"px, ").concat(this.props.translateZ||0,")"),l.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(E,";")+"width:".concat(S,"px;height:").concat(_,"px;")+"transform: ".concat(F),o.width=S,o.height=_;var L=this.getContainer(),A=ka(this.controlBox,l,this.controlBox,this.getContainer(),this._rootContainer||L,[]),$=[A.left,A.top],j=P(Kt(A),4),G=j[0],q=j[1],U=j[2],W=j[3],H=jr([G,q,U,W]),Y=[H.minX,H.minY],V=Zt(x[0]*x[1]);A.pos1=tt(G,Y),A.pos2=tt(q,Y),A.pos3=tt(U,Y),A.pos4=tt(W,Y),A.left=T-A.left+Y[0],A.top=D-A.top+Y[1],A.origin=tt(ft($,A.origin),Y),A.beforeOrigin=tt(ft($,A.beforeOrigin),Y),A.originalBeforeOrigin=ft($,A.originalBeforeOrigin),A.transformOrigin=tt(ft($,A.transformOrigin),Y),l.style.transform="translate(".concat(-w-Y[0],"px, ").concat(-I-Y[1],"px)")+k,fe(),this.updateState(M(M({},A),{posDelta:Y,direction:V,beforeDirection:V}),i)},r.prototype.getRect=function(){return M(M({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},r.prototype.triggerEvent=function(e,n,i){if(i||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,n);this._emitter.trigger(e,n)},r.prototype.getRequestChildStyles=function(){var e=this.getEnabledAbles().reduce(function(n,i){var a,o,s=(o=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return N(N([],P(n),!1),P(s),!1)},[]);return e},r.prototype.getMoveables=function(){return N([],P(this.moveables),!1)},r.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,N(N([],P(this.props.ables),!1),[Aa],!1),"Group")},r.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=lr(this._originalDragTarget,!0)},r.prototype._updateEvents=function(){var e=this.state,n=this.props,i=this._prevDragTarget,a=n.dragTarget||this.areaElement,o=n.targets,s=this.differ.update(o),u=s.added,l=s.changed,f=s.removed,c=u.length||f.length;(c||this._prevOriginalDragTarget!==this._originalDragTarget)&&(de(this,!1),de(this,!0),this.updateState({gestos:{}})),i!==a&&(e.target=null),e.target||(e.target=this.areaElement,this.controlBox.style.display="block"),e.target&&(this.targetGesto||(this.targetGesto=Dl(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=Ia(this,this.controlBox,"controlAbles","GroupControl")));var v=!Ea(e.container,n.container);v&&(e.container=n.container),(v||c||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||l.length||o.length&&!fl(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!c},r.prototype._updateObserver=function(){},r.defaultProps=M(M({},me.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),r}(me),Qm=function(t){Fe(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.moveables=[],e}return r.prototype.render=function(){var e=this,n,i=this.props,a=i.cspNonce,o=i.cssStyled,s=i.persistData,u=i.targets||[],l=u.length,f=this.isUnmounted||!l,c=(n=s==null?void 0:s.children)!==null&&n!==void 0?n:[];return f&&!l&&c.length?u=c.map(function(){return null}):f||(c=[]),tr(o,{cspNonce:a,ref:dr(this,"controlBox"),className:J("control-box")},u.map(function(v,d){var p,h,g=(h=(p=i.individualGroupableProps)===null||p===void 0?void 0:p.call(i,v,d))!==null&&h!==void 0?h:{};return tr(me,M({key:"moveable"+d,ref:Qo(e,"moveables",d)},i,g,{target:v,wrapperMoveable:e,isWrapperMounted:e.isMoveableMounted,persistData:c[d]}))}))},r.prototype.componentDidMount=function(){},r.prototype.componentDidUpdate=function(){},r.prototype.getTargets=function(){return this.props.targets},r.prototype.updateRect=function(e,n,i){i===void 0&&(i=!0),fe(!0),this.moveables.forEach(function(a){a.updateRect(e,n,i)}),fe()},r.prototype.getRect=function(){return M(M({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},r.prototype.request=function(e,n,i){n===void 0&&(n={});var a=this.moveables.map(function(u){return u.request(e,M(M({},n),{isInstant:!1}),!1)}),o=i||n.isInstant,s={request:function(u){return a.forEach(function(l){return l.request(u)}),this},requestEnd:function(){return a.forEach(function(u){return u.requestEnd()}),this}};return o?s.request(n).requestEnd():s},r.prototype.dragStart=function(e){var n=e.target,i=Yt(this.moveables,function(a){var o=a.getTargets()[0],s=a.getControlBoxElement(),u=a.getDragElement();return!o||!u?!1:u===n||u.contains(n)||u!==o&&o===n||o.contains(n)||s===n||s.contains(n)});return i&&i.dragStart(e),this},r.prototype.hitTest=function(){return 0},r.prototype.isInside=function(){return!1},r.prototype.isDragging=function(){return!1},r.prototype.getDragElement=function(){return null},r.prototype.getMoveables=function(){return N([],P(this.moveables),!1)},r.prototype.updateRenderPoses=function(){},r.prototype.checkUpdate=function(){},r.prototype.triggerEvent=function(){},r.prototype.updateAbles=function(){},r.prototype._updateEvents=function(){},r.prototype._updateObserver=function(){},r}(me);function Bl(t,r){var e=[];return t.forEach(function(n){if(n){if(jt(n)){r[n]&&e.push.apply(e,N([],P(r[n]),!1));return}Tt(n)?e.push.apply(e,N([],P(Bl(n,r)),!1)):e.push(n)}}),e}function zl(t,r){var e=[];return t.forEach(function(n){if(n){if(jt(n)){r[n]&&e.push.apply(e,N([],P(r[n]),!1));return}Tt(n)?e.push(zl(n,r)):e.push(n)}}),e}function Gl(t,r){return t.length!==r.length||t.some(function(e,n){var i=r[n];return!e&&!i?!1:e!=i?Tt(e)&&Tt(i)?Gl(e,i):!0:!1})}var t1=function(t){Fe(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new js,e._elementTargets=[],e._tmpRefTargets=[],e._tmpSelectorMap={},e._onChangeTargets=null,e}return r.makeStyled=function(){var e={},n=this.getTotalAbles();n.forEach(function(a){var o=a.css;o&&o.forEach(function(s){e[s]=!0})});var i=hr(e).join(`
`);this.defaultStyled=Ks("div",Hp(Hi,Fg+i))},r.getTotalAbles=function(){return N([ml,Aa,Rl,gl],P(this.defaultAbles),!1)},r.prototype.render=function(){var e,n=this.constructor;n.defaultStyled||n.makeStyled();var i=this.props,a=i.ables,o=i.props,s=Tg(i,["ables","props"]),u=P(this._updateRefs(!0),2),l=u[0],f=u[1],c=Bl(l,f),v=c.length>1,d=n.getTotalAbles(),p=N(N([],P(d),!1),P(a||[]),!1),h=M(M(M({},s),o||{}),{ables:p,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=c;var g=null,m=this.moveable,y=s.persistData;if(y!=null&&y.children&&(v=!0),s.individualGroupable)return tr(Qm,M({key:"individual-group",ref:dr(this,"moveable")},h,{target:null,targets:c}));if(v){var b=zl(l,f);if(m&&!m.props.groupable&&!m.props.individualGroupable){var E=m.props.target;E&&c.indexOf(E)>-1&&(g=M({},m.state))}return tr(Jm,M({key:"group",ref:dr(this,"moveable")},h,(e=s.groupableProps)!==null&&e!==void 0?e:{},{target:null,targets:c,targetGroups:b,firstRenderState:g}))}else{var C=c[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var x=m.moveables||[],S=Yt(x,function(_){return _.props.target===C});S&&(g=M({},S.state))}return tr(me,M({key:"single",ref:dr(this,"moveable")},h,{target:C,firstRenderState:g}))}},r.prototype.componentDidMount=function(){this._checkChangeTargets()},r.prototype.componentDidUpdate=function(){this._checkChangeTargets()},r.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},r.prototype.getTargets=function(){var e,n;return(n=(e=this.moveable)===null||e===void 0?void 0:e.getTargets())!==null&&n!==void 0?n:[]},r.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs()},r.prototype.waitToChangeTarget=function(){var e=this,n;return this._onChangeTargets=function(){e._onChangeTargets=null,n()},new Promise(function(i){n=i})},r.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},r.prototype.getManager=function(){return this.moveable},r.prototype.getMoveables=function(){return this.moveable.getMoveables()},r.prototype.getDragElement=function(){return this.moveable.getDragElement()},r.prototype._updateRefs=function(e){var n=this.refTargets,i=_a(this.props.target||this.props.targets),a=typeof document!="undefined",o=Gl(n,i),s=this.selectorMap,u={};return this.refTargets.forEach(function l(f){if(jt(f)){var c=s[f];c?u[f]=s[f]:a&&(o=!0,u[f]=[].slice.call(document.querySelectorAll(f)))}else Tt(f)&&f.forEach(l)}),this._tmpRefTargets=i,this._tmpSelectorMap=u,[i,u,!e&&o]},r.prototype._checkChangeTargets=function(){var e,n,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),o=a.added,s=a.removed,u=o.length||s.length;u&&((n=(e=this.props).onChangeTargets)===null||n===void 0||n.call(e,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var l=P(this._updateRefs(),3),f=l[0],c=l[1],v=l[2];this.refTargets=f,this.selectorMap=c,v&&this.forceUpdate()},r.defaultAbles=[],r.customStyledMap={},r.defaultStyled=null,Pg([Vp(nu)],r.prototype,"moveable",void 0),r}(Ss),r1=function(t){Fe(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.defaultAbles=Ba,r}(t1),za=function(t,r){return za=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},za(t,r)};function Ga(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");za(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Ke=function(){return Ke=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Ke.apply(this,arguments)};function e1(t,r,e,n){var i=arguments.length,a=i<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(r,e,a):o(r,e))||a);return i>3&&a&&Object.defineProperty(r,e,a),a}var n1=function(t){Ga(r,t);function r(n){var i=t.call(this,n)||this;return i.state={},i.state=i.props,i}var e=r.prototype;return e.render=function(){return tr(r1,Ke({ref:dr(this,"moveable")},this.state))},r}(Ci),i1=Km,a1=nu,o1=Um,s1=function(t){Ga(r,t);function r(n,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var o=Ke({},i),s={};o1.forEach(function(f){s[nh("on ".concat(f))]=function(c){return a.trigger(f,c)}});var u;i.warpSelf?(delete i.warpSelf,a._warp=!0,u=n):(u=Qr(n).createElement("div"),n.appendChild(u)),a.containerProvider=Ps(tr(n1,Ke({ref:dr(a,"innerMoveable")},o,s)),u),a.selfElement=u;var l=o.target;return Tt(l)&&l.length>1&&a.updateRect(),a}var e=r.prototype;return e.setState=function(n,i){this.innerMoveable.setState(n,i)},e.forceUpdate=function(n){this.innerMoveable.forceUpdate(n)},e.dragStart=function(n){var i=this.innerMoveable;i.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(n)},e.destroy=function(){var n,i=this.selfElement;Ps(null,i,this.containerProvider),this._warp||(n=i==null?void 0:i.parentElement)===null||n===void 0||n.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.moveable},r=e1([ts(a1,function(n,i){n[i]||(n[i]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var s=this.getMoveable();if(!(!s||!s[i]))return s[i].apply(s,a)})}),ts(i1,function(n,i){Object.defineProperty(n,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var o;this.setState((o={},o[i]=a,o))},enumerable:!0,configurable:!0})})],r),r}(dn),u1=function(t){Ga(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}(s1);function l1(t,r){return ie(t,r)}const f1=(t,r)=>Math.sqrt(Math.pow(Math.abs(t.x-r.x),2)+Math.pow(Math.abs(t.y-r.y),2));class c1 extends ci{constructor(e){super();B(this,"likeRectangleIns");B(this,"moveableIns",null);B(this,"rotationPointIns",null);B(this,"midPoint");B(this,"initAngle");B(this,"offset");B(this,"rotationLine");B(this,"customRotationDOMId",`ID${Ct()}`);B(this,"moveableElementId",`ID${Ct()}`);B(this,"targetElementId",`ID${Ct()}`);B(this,"genMarkerContent",(e=0)=>{const i=`width:${.1}px; height:${.1}px;`;e=Number.isNaN(+e)?0:+e;const a=`<div style="visibility: hidden; background: transparent; height: ${.1}px; width: ${.1}px"></div>`;return`
            <div
            style="${i}"
            data-rotatable-ref="${this.moveableElementId}"
            >
            <div
                data-rotatable-ref="${this.targetElementId}"
                style="${i} transform: translate(0,0) rotate(${e}deg);">
                ${a}
            </div>
            </div>
        `});B(this,"setMarkerRotatable",()=>{this.offset=this.calcInitOffset();const e=this,n=l1("customRotation",{render(o,s){const u=o.getRect(),{pos1:l,pos2:f}=o.state;return s.createElement("div",{key:"custom-rotation",id:e.customRotationDOMId,className:"moveable-custom-rotation",style:{display:"inline-block",position:"absolute",transform:`translate(-50%, -100%) translate(${(l[0]+f[0])/2}px, ${(l[1]+f[1])/2}px) rotate(${u.rotation}deg) translateY(-${e.offset}px)`,width:"10px",height:"10px",cursor:"move",background:"#fff",border:"2px solid #cc6666",borderRadius:"50%",transformOrigin:"50% 100%"}},[`
        `])}}),i=document.querySelector(`[data-rotatable-ref="${this.moveableElementId}"]`),a=document.querySelector(`[data-rotatable-ref="${this.targetElementId}"]`);this.moveableIns=new u1(i,{target:a,ables:[n],props:{customRotation:!0},rotatable:!0,throttleRotate:0,origin:!1,hideDefaultLines:!0,rotationTarget:".moveable-custom-rotation",rotationPosition:"none"}),this.registryEvent()});B(this,"onRotateStart",()=>{this.emit("rotateStart",this.likeRectangleIns)});B(this,"onRotate",e=>{e.target.style.transform=e.drag.transform;const n=+this.getDOMTransformRotate(e.target)-this.initAngle;this.rotate(n),this.emit("rotate",e)});B(this,"onRotateEnd",()=>{this.emit("rotateEnd",this.likeRectangleIns)});B(this,"rotate",e=>{const n=this.mapIns.lngLatToContainer(this.center),i=this.likeRectangleIns.leftTop,a=this.mapIns.lngLatToContainer(i),o=this.calcRotatePoint(a,n,e),s=new AMap.Pixel(o.x,o.y),u=this.mapIns.containerToLngLat(s),l=this.likeRectangleIns.rightTop,f=this.mapIns.lngLatToContainer(l),c=this.calcRotatePoint(f,n,e),v=new AMap.Pixel(c.x,c.y),d=this.mapIns.containerToLngLat(v),p=this.likeRectangleIns.rightBottom,h=this.mapIns.lngLatToContainer(p),g=this.calcRotatePoint(h,n,e),m=new AMap.Pixel(g.x,g.y),y=this.mapIns.containerToLngLat(m),b=this.likeRectangleIns.leftBottom,E=this.mapIns.lngLatToContainer(b),C=this.calcRotatePoint(E,n,e),x=new AMap.Pixel(C.x,C.y),S=this.mapIns.containerToLngLat(x),_=[[u.lng,u.lat],[d.lng,d.lat],[y.lng,y.lat],[S.lng,S.lat]];this.likeRectangleIns.setPath(_)});B(this,"calcRotatePoint",(e,n,i)=>{const a=e.x,o=e.y,s=n.x,u=n.y,l=i*Math.PI/180,f=a-s,c=o-u,v=f*Math.cos(l)-c*Math.sin(l)+s,d=f*Math.sin(l)+c*Math.cos(l)+u;return{x:v,y:d}});B(this,"getDOMTransformRotate",e=>{var a;if(!e)return 0;let n=null;return(((a=e==null?void 0:e.style)==null?void 0:a.transform)||"").replace(/rotate\((.*)deg\)/g,(o,s)=>n=s),+n||0});B(this,"updateRotationAbleOffset",()=>{var o;const e=document.querySelector(`#${this.customRotationDOMId}`);let n=null,i=((o=e==null?void 0:e.style)==null?void 0:o.transform)||"";if(i.replace(/translateY\((.*)px\)/g,(s,u)=>n=u),!n)return;const a=`-${this.calcInitOffset()}`;i=i.replace(new RegExp(n,"g"),a),e.style.transform=i,this.offset=this.calcInitOffset()});B(this,"onDragStart",()=>Rr(this,null,function*(){this.reset()}));B(this,"onDragEnd",()=>Rr(this,null,function*(){this.open()}));if(!e)throw new Error("likeRectangleIns is required");this.likeRectangleIns=e,this.open()}get mapIns(){return this.likeRectangleIns._map}get center(){return this.likeRectangleIns.likeRectangle.center}get draggable(){var n;return((n=this.likeRectangleIns)==null?void 0:n.getOptions()).draggable}open(){this.calcMidPoint(),this.calcInitAngle(),this.setRotationLine(),this.registryLikeRectangleEvents(),this.createRotationPoint()}reset(){var e,n,i,a;(n=(e=this.moveableIns)==null?void 0:e.destroy)==null||n.call(e),this.moveableIns=null,(a=(i=this.rotationPointIns)==null?void 0:i.destroy)==null||a.call(i),this.rotationPointIns=null}close(){this.reset(),this.destroyLikeRectangleEvents(),this.destroyEvent()}registryLikeRectangleEvents(){const e=this.likeRectangleIns.hasEvents("dragstart",this.onDragStart);this.draggable&&!e&&(this.likeRectangleIns.on("dragstart",this.onDragStart),this.likeRectangleIns.on("dragend",this.onDragEnd))}destroyLikeRectangleEvents(){this.likeRectangleIns.off("dragstart",this.onDragStart),this.likeRectangleIns.off("dragend",this.onDragEnd)}createRotationPoint(){return Rr(this,null,function*(){var e,n;(n=(e=this.rotationPointIns)==null?void 0:e.destroy)==null||n.call(e),this.rotationPointIns=null,this.rotationPointIns=new AMap.Marker({map:this.mapIns,position:this.center,content:this.genMarkerContent(this.initAngle)}),yield Promise.resolve(),this.setMarkerRotatable()})}registryEvent(){var e,n;this.moveableIns&&(this.moveableIns.on("rotateStart",this.onRotateStart),this.moveableIns.on("rotate",this.onRotate),this.moveableIns.on("rotateEnd",this.onRotateEnd),(n=(e=this.mapIns)==null?void 0:e.on)==null||n.call(e,"zoomchange",this.updateRotationAbleOffset))}destroyEvent(){var e,n;this.moveableIns&&(this.moveableIns.off("rotateStart",this.onRotateStart),this.moveableIns.off("rotate",this.onRotate),this.moveableIns.off("rotateEnd",this.onRotateEnd),(n=(e=this.mapIns)==null?void 0:e.off)==null||n.call(e,"zoomchange",this.updateRotationAbleOffset))}calcMidPoint(){var h,g,m;const e=(m=(g=(h=this.likeRectangleIns)==null?void 0:h.getPath)==null?void 0:g.call(h))==null?void 0:m.map(y=>[y.lng,y.lat]);if(!e.length||!this.mapIns)throw new Error("likeRectangle or map is undefined");const n=e[0],i=this.mapIns.lngLatToContainer(n),a=e[1],o=this.mapIns.lngLatToContainer(a),s=(i.y-o.y)/(i.x-o.x),u=i.y-s*i.x,l=this.mapIns.lngLatToContainer(this.center),f=-1/s,c=l.y-f*l.x,v=s===0?(i.x+o.x)/2:(c-u)/(s-f),d=s*v+u,p=new AMap.Pixel(v,d);return this.midPoint=this.mapIns.containerToLngLat(p),this.midPoint}calcInitAngle(){if(!this.mapIns)return;const e=this.mapIns.lngLatToContainer(this.midPoint),n=this.mapIns.lngLatToContainer(this.center),i=Math.atan2(e.y-n.y,e.x-n.x);return this.initAngle=180/Math.PI*i+90,this.initAngle}calcInitOffset(){if(!this.mapIns)return 0;const e=this.mapIns.lngLatToContainer(this.midPoint),n=this.mapIns.lngLatToContainer(this.center);return(f1(e,n)||100)-6}setRotationLine(){}}class Ll extends ci{constructor(e){super();B(this,"opts");B(this,"map");B(this,"width");B(this,"height");B(this,"center");B(this,"leftTop");B(this,"rightTop");B(this,"leftBottom");B(this,"rightBottom");B(this,"likeRectangle");B(this,"rotatableIns");B(this,"likeRectangleDestroy");this.bindOptsToSelf(e),e.path||this.setPoints();const n=this.create();return this.registerRotatable(),this.enhanceMethods(),n}bindOptsToSelf(e){this.opts=e,Object.entries(e).forEach(([n,i])=>{this[n]=i})}enhanceMethods(){this.likeRectangleDestroy=this.likeRectangle.destroy.bind(this.likeRectangle),this.likeRectangle.destroy=this.destroy.bind(this)}destroy(){var e,n;(n=(e=this.rotatableIns)==null?void 0:e.close)==null||n.call(e),this.likeRectangleDestroy()}registerRotatable(){if(!this.opts.rotatable)return;this.rotatableIns=new c1(this.likeRectangle);const e=this.likeRectangle;this.rotatableIns.on("rotateStart",n=>e.emit("rotateStart",n)),this.rotatableIns.on("rotate",n=>e.emit("rotate",n)),this.rotatableIns.on("rotateEnd",n=>e.emit("rotateEnd",n))}calcPoints(e){const[n,i]=e||this.center,a=new AMap.LngLat(n,i),o=Ze(this.width/2),s=Ze(this.height/2),u=a.offset(-o/2,s/2),l=a.offset(o/2,s/2),f=a.offset(-o/2,-s/2),c=a.offset(o/2,-s/2);return{leftTop:[u.lng,u.lat],rightTop:[l.lng,l.lat],leftBottom:[f.lng,f.lat],rightBottom:[c.lng,c.lat]}}setCenter(e){this.likeRectangle.likeRectangleCenter=this.center=e}setPoints(){const{leftTop:e,rightTop:n,leftBottom:i,rightBottom:a}=this.calcPoints();this.leftTop=e,this.rightTop=n,this.leftBottom=i,this.rightBottom=a}create(){var n,i,a;const e=((n=this.opts)==null?void 0:n.path)||[this.leftTop,this.rightTop,this.rightBottom,this.leftBottom];if(this.likeRectangle=new AMap.Polygon,this.likeRectangle.setOptions(Vt({path:e},this.opts)),this.enhanceProperty(),this.registryEvent(),(i=this.opts)!=null&&i.path){const[o,s,u,l]=(a=this.opts)==null?void 0:a.path;this.updatePoints(o,s,u,l)}return this.likeRectangle}enhanceProperty(){this.likeRectangle.likeRectangle=this,this.likeRectangle.leftTop=this.leftTop,this.likeRectangle.rightTop=this.rightTop,this.likeRectangle.rightBottom=this.rightBottom,this.likeRectangle.leftBottom=this.leftBottom,this.likeRectangle.likeRectangleCenter=this.center,this.likeRectangle.rotatable=this.opts.rotatable}registryEvent(){this.likeRectangle&&(this.onDragEnd=this.onDragEnd.bind(this),this.likeRectangle.on("dragend",this.onDragEnd))}onDragEnd(e){const i=e.target.getPath(),[a,o,s,u]=i;this.updatePoints(a,o,s,u)}updatePoints(e,n,i,a){this.likeRectangle.leftTop=this.leftTop=e,this.likeRectangle.rightTop=this.rightTop=n,this.likeRectangle.rightBottom=this.rightBottom=i,this.likeRectangle.leftBottom=this.leftBottom=a,this.setCenter(this.getCenter())}getCenter(){var n;return(n=this.map.getFitZoomAndCenterByOverlays([this.likeRectangle]))==null?void 0:n.pop()}}class v1{constructor(r,e,n){B(this,"point");B(this,"points");B(this,"center");B(this,"context");B(this,"isEnabled",!1);this.context=r,this.point=e,this.points=n,this.init(),this.clearClientEvent()}get len(){return this.points.length-1}get extData(){return this.point.getExtData()}get idx(){return this.extData.idx}get map(){return this.context.map}get xAxisMax(){return document.body.clientWidth}get yAxisMax(){return document.body.clientHeight}enable(){this.isEnabled||(this.isEnabled=!0,this.setCursorPointer("move"),this.registryEvent())}disable(){this.isEnabled=!1,this.setCursorPointer("pointer"),this.destroyEvent()}setCursorPointer(r){var e;(e=this.point)==null||e.setOptions({cursor:r})}init(){this.center=this.point.getCenter(),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDragging=Wp(this.onDragging.bind(this),4),this.onDragEnd=this.onDragEnd.bind(this),this.defaultRegistryEvent()}clearClientEvent(){this.point.clearEvents("click")}defaultRegistryEvent(){this.point.on("mouseover",this.onMouseOver),this.point.on("mouseout",this.onMouseOut)}registryEvent(){this.point.on("dragstart",this.onDragStart),this.point.on("dragging",this.onDragging),this.point.on("dragend",this.onDragEnd)}destroyEvent(){this.point.off("dragstart",this.onDragStart),this.point.off("dragging",this.onDragging),this.point.off("dragend",this.onDragEnd)}onMouseOver(){this.enable()}onMouseOut(){this.disable()}onDragStart(r){this.context.onDragStart(r)}onDragging(r){const{pixel:e}=r;this.updateNextLeftPoint(e,r),this.updateNextRightPoint(e,r),this.context.onDragging(r)}onDragEnd(r){const{target:e,pixel:n}=r;this.updateNextLeftPoint(n,r),this.updateNextRightPoint(n,r),this.center=e.getCenter(),this.context.onDragEnd(r)}updateNextLeftPoint(r,e){const n=this.idx-1>=0?this.idx-1:this.len,i=this.points[n],a=this.map.lngLatToContainer(i.getCenter()),o=n-1>=0?n-1:this.len,s=this.points[o],u=this.map.lngLatToContainer(s.getCenter()),l=(u.y-a.y)/(u.x-a.x),f=u.y-l*u.x,c=-1/l,v=r.y-c*r.x;let d;l===0?d=r.x:!Number.isFinite(l)||l>Number.MAX_SAFE_INTEGER||l<Number.MIN_SAFE_INTEGER?d=a.x:d=(v-f)/(l-c);let p;l===0?p=a.y:Number.isFinite(l)?p=l*d+f:p=r.y;const h=new AMap.Pixel(d,p);this.dispatch(i,h,e.originEvent)}updateNextRightPoint(r,e){const n=this.idx+1<=this.len?this.idx+1:0,i=this.points[n],a=this.map.lngLatToContainer(i.getCenter()),o=n+1<=this.len?n+1:0,s=this.points[o],u=this.map.lngLatToContainer(s.getCenter()),l=(u.y-a.y)/(u.x-a.x),f=u.y-l*u.x,c=-1/l,v=r.y-c*r.x;let d;l===0?d=r.x:!Number.isFinite(l)||l>Number.MAX_SAFE_INTEGER||l<Number.MIN_SAFE_INTEGER?d=a.x:d=(v-f)/(l-c);let p;l===0?p=a.y:Number.isFinite(l)?p=l*d+f:p=r.y;const h=new AMap.Pixel(d,p);this.dispatch(i,h,e.originEvent)}dispatch(r,e,n){const a={lnglat:this.map.containerToLngLat(e),originEvent:n};r.emit("dragend",a)}}const d1={rotatingCloseEditor:!0,editingCloseRotator:!0};class Fl{constructor(r,e,n){B(this,"opts");B(this,"map");B(this,"likeRectangle");B(this,"polygonEditor");B(this,"polygonEditorOpen");B(this,"polygonEditorClose");B(this,"controlPoints");B(this,"inEditing",!1);B(this,"isRestart",!1);B(this,"onDragStart",r=>{var e,n;(n=(e=this.rotatableIns)==null?void 0:e.close)==null||n.call(e),this.onChange("dragstart",r)});B(this,"onDragging",r=>{this.updateLikeRectanglePath(),this.onChange("dragging",r)});B(this,"onDragEnd",r=>{var e,n;(n=(e=this.rotatableIns)==null?void 0:e.open)==null||n.call(e),this.onChange("dragend",r)});B(this,"onChange",(r,e)=>{var n,i;(i=(n=this.opts)==null?void 0:n.onChange)==null||i.call(n,r,e)});B(this,"onRotateStart",()=>Rr(this,null,function*(){this.inEditing&&this.polygonEditorClose()}));B(this,"onRotateEnd",()=>Rr(this,null,function*(){this.inEditing&&this.open()}));return this.map=r,this.likeRectangle=e,this.opts=Vt(Vt({},d1),n),this.onChange=this.onChange.bind(this),this.createEditor()}get options(){return Ya(Vt({},this.opts),{midControlPoint:{radius:0}})}get rotatable(){var r;return(r=this.likeRectangle)==null?void 0:r.rotatable}get rotatingCloseEditor(){return this.opts.rotatingCloseEditor}get rotatableIns(){var r,e;return(e=(r=this.likeRectangle)==null?void 0:r.likeRectangle)==null?void 0:e.rotatableIns}open(){this.inEditing=!0,this.polygonEditorOpen(),this.registryLikeRectangleRotateEvents(),this.registryControlPoints()}close(){this.inEditing=!1,this.destroyLikeRectangleRotateEvents(),this.polygonEditorClose()}findControlPoint(r){return this.controlPoints.find(e=>{const n=e.point.getCenter(),i=`${n.lng}_${n.lat}`,a=r.getCenter(),o=`${a.lng}_${a.lat}`;return i===o})}createEditor(){const r=this.likeRectangle;return this.polygonEditor=new AMap.PolygonEditor(this.map,r,this.options),this.enhanceProperty(),this.polygonEditor}enhanceProperty(){this.polygonEditor.likeRectangleEditor=this,this.polygonEditorOpen=this.polygonEditor.open.bind(this.polygonEditor),this.polygonEditor.open=this.open.bind(this),this.polygonEditorClose=this.polygonEditor.close.bind(this.polygonEditor),this.polygonEditor.close=this.close.bind(this)}registryLikeRectangleRotateEvents(){this.rotatable&&this.rotatingCloseEditor&&(this.likeRectangle.on("rotateStart",this.onRotateStart),this.likeRectangle.on("rotateEnd",this.onRotateEnd))}destroyLikeRectangleRotateEvents(){this.rotatable&&this.rotatingCloseEditor&&(this.likeRectangle.off("rotateStart",this.onRotateStart),this.likeRectangle.off("rotateEnd",this.onRotateEnd))}registryControlPoints(){var e,n,i,a;const r=(a=(i=(n=(e=this.polygonEditor)==null?void 0:e.singleRingListHandle)==null?void 0:n.list)==null?void 0:i.editingVertexMarkerList)!=null?a:[];this.controlPoints=r.map((o,s)=>{const u=o.getExtData()||{};return o.setExtData(Ya(Vt({},u),{idx:s})),new v1(this,o,r)})}updateLikeRectanglePath(){const[r,e,n,i]=this.controlPoints,a=r.point.getCenter(),o=e.point.getCenter(),s=n.point.getCenter(),u=i.point.getCenter();this.likeRectangle.likeRectangle.updatePoints([a.lng,a.lat],[o.lng,o.lat],[s.lng,s.lat],[u.lng,u.lat])}}const p1={PolygonRangingInDrawing:Je,PolygonEditorRanging:Ko,PolygonEditorEvent:Jo,PolygonRanging:Zo,LikeRectangle:Ll,LikeRectangleEditor:Fl};ut.LikeRectangle=Ll,ut.LikeRectangleEditor=Fl,ut.PolygonEditorEvent=Jo,ut.PolygonEditorRanging=Ko,ut.PolygonRanging=Zo,ut.PolygonRangingInDrawing=Je,ut.default=p1,Object.defineProperties(ut,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
